(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function y0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tg={exports:{}},dl={},ng={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=Symbol.for("react.element"),_0=Symbol.for("react.portal"),v0=Symbol.for("react.fragment"),w0=Symbol.for("react.strict_mode"),E0=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),I0=Symbol.for("react.context"),S0=Symbol.for("react.forward_ref"),A0=Symbol.for("react.suspense"),x0=Symbol.for("react.memo"),C0=Symbol.for("react.lazy"),Ff=Symbol.iterator;function R0(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sg=Object.assign,ig={};function Vs(t,e,n){this.props=t,this.context=e,this.refs=ig,this.updater=n||rg}Vs.prototype.isReactComponent={};Vs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function og(){}og.prototype=Vs.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=ig,this.updater=n||rg}var oh=ih.prototype=new og;oh.constructor=ih;sg(oh,Vs.prototype);oh.isPureReactComponent=!0;var bf=Array.isArray,ag=Object.prototype.hasOwnProperty,ah={current:null},lg={key:!0,ref:!0,__self:!0,__source:!0};function ug(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ag.call(e,r)&&!lg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:uo,type:t,key:i,ref:a,props:s,_owner:ah.current}}function k0(t,e){return{$$typeof:uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===uo}function P0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uf=/\/+/g;function au(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P0(""+t.key):e.toString(36)}function fa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case uo:case _0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+au(a,0):r,bf(s)?(n="",t!=null&&(n=t.replace(Uf,"$&/")+"/"),fa(s,e,n,"",function(h){return h})):s!=null&&(lh(s)&&(s=k0(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Uf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",bf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+au(i,l);a+=fa(i,e,n,u,s)}else if(u=R0(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+au(i,l++),a+=fa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function zo(t,e,n){if(t==null)return t;var r=[],s=0;return fa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function N0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},pa={transition:null},D0={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:pa,ReactCurrentOwner:ah};function cg(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:zo,forEach:function(t,e,n){zo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zo(t,function(){e++}),e},toArray:function(t){return zo(t,function(e){return e})||[]},only:function(t){if(!lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Vs;se.Fragment=v0;se.Profiler=E0;se.PureComponent=ih;se.StrictMode=w0;se.Suspense=A0;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D0;se.act=cg;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=ah.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ag.call(e,u)&&!lg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:uo,type:t.type,key:s,ref:i,props:r,_owner:a}};se.createContext=function(t){return t={$$typeof:I0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T0,_context:t},t.Consumer=t};se.createElement=ug;se.createFactory=function(t){var e=ug.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:S0,render:t}};se.isValidElement=lh;se.lazy=function(t){return{$$typeof:C0,_payload:{_status:-1,_result:t},_init:N0}};se.memo=function(t,e){return{$$typeof:x0,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=pa.transition;pa.transition={};try{t()}finally{pa.transition=e}};se.unstable_act=cg;se.useCallback=function(t,e){return Et.current.useCallback(t,e)};se.useContext=function(t){return Et.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};se.useEffect=function(t,e){return Et.current.useEffect(t,e)};se.useId=function(){return Et.current.useId()};se.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Et.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};se.useRef=function(t){return Et.current.useRef(t)};se.useState=function(t){return Et.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Et.current.useTransition()};se.version="18.3.1";ng.exports=se;var re=ng.exports;const V0=y0(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0=re,O0=Symbol.for("react.element"),M0=Symbol.for("react.fragment"),j0=Object.prototype.hasOwnProperty,F0=L0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b0={key:!0,ref:!0,__self:!0,__source:!0};function hg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)j0.call(e,r)&&!b0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:O0,type:t,key:i,ref:a,props:s,_owner:F0.current}}dl.Fragment=M0;dl.jsx=hg;dl.jsxs=hg;tg.exports=dl;var C=tg.exports,$u={},dg={exports:{}},Ft={},fg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var Z=B.length;B.push(X);e:for(;0<Z;){var ge=Z-1>>>1,de=B[ge];if(0<s(de,X))B[ge]=X,B[Z]=de,Z=ge;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],Z=B.pop();if(Z!==X){B[0]=Z;e:for(var ge=0,de=B.length,W=de>>>1;ge<W;){var H=2*(ge+1)-1,Q=B[H],Y=H+1,fe=B[Y];if(0>s(Q,Z))Y<de&&0>s(fe,Q)?(B[ge]=fe,B[Y]=Z,ge=Y):(B[ge]=Q,B[H]=Z,ge=H);else if(Y<de&&0>s(fe,Z))B[ge]=fe,B[Y]=Z,ge=Y;else break e}}return X}function s(B,X){var Z=B.sortIndex-X.sortIndex;return Z!==0?Z:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,y=null,p=3,S=!1,P=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=B)r(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function V(B){if(D=!1,A(B),!P)if(n(u)!==null)P=!0,Pe(F);else{var X=n(h);X!==null&&nt(V,X.startTime-B)}}function F(B,X){P=!1,D&&(D=!1,I(g),g=-1),S=!0;var Z=p;try{for(A(X),y=n(u);y!==null&&(!(y.expirationTime>X)||B&&!x());){var ge=y.callback;if(typeof ge=="function"){y.callback=null,p=y.priorityLevel;var de=ge(y.expirationTime<=X);X=t.unstable_now(),typeof de=="function"?y.callback=de:y===n(u)&&r(u),A(X)}else r(u);y=n(u)}if(y!==null)var W=!0;else{var H=n(h);H!==null&&nt(V,H.startTime-X),W=!1}return W}finally{y=null,p=Z,S=!1}}var U=!1,_=null,g=-1,v=5,T=-1;function x(){return!(t.unstable_now()-T<v)}function R(){if(_!==null){var B=t.unstable_now();T=B;var X=!0;try{X=_(!0,B)}finally{X?E():(U=!1,_=null)}}else U=!1}var E;if(typeof w=="function")E=function(){w(R)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,J=K.port2;K.port1.onmessage=R,E=function(){J.postMessage(null)}}else E=function(){O(R,0)};function Pe(B){_=B,U||(U=!0,E())}function nt(B,X){g=O(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,Pe(F))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var Z=p;p=X;try{return B()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=p;p=B;try{return X()}finally{p=Z}},t.unstable_scheduleCallback=function(B,X,Z){var ge=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ge+Z:ge):Z=ge,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Z+de,B={id:f++,callback:X,priorityLevel:B,startTime:Z,expirationTime:de,sortIndex:-1},Z>ge?(B.sortIndex=Z,e(h,B),n(u)===null&&B===n(h)&&(D?(I(g),g=-1):D=!0,nt(V,Z-ge))):(B.sortIndex=de,e(u,B),P||S||(P=!0,Pe(F))),B},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(B){var X=p;return function(){var Z=p;p=X;try{return B.apply(this,arguments)}finally{p=Z}}}})(pg);fg.exports=pg;var U0=fg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0=re,jt=U0;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mg=new Set,Mi={};function Fr(t,e){vs(t,e),vs(t+"Capture",e)}function vs(t,e){for(Mi[t]=e,t=0;t<e.length;t++)mg.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=Object.prototype.hasOwnProperty,z0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bf={},zf={};function $0(t){return Wu.call(zf,t)?!0:Wu.call(Bf,t)?!1:z0.test(t)?zf[t]=!0:(Bf[t]=!0,!1)}function W0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q0(t,e,n,r){if(e===null||typeof e>"u"||W0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,ch);et[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,ch);et[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,ch);et[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q0(e,n,s,r)&&(n=null),r||s===null?$0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ln=B0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Jr=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),gg=Symbol.for("react.provider"),yg=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),_g=Symbol.for("react.offscreen"),$f=Symbol.iterator;function ni(t){return t===null||typeof t!="object"?null:(t=$f&&t[$f]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,lu;function fi(t){if(lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lu=e&&e[1]||""}return`
`+lu+t}var uu=!1;function cu(t,e){if(!t||uu)return"";uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{uu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fi(t):""}function H0(t){switch(t.tag){case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return fi("Suspense");case 19:return fi("SuspenseList");case 0:case 2:case 15:return t=cu(t.type,!1),t;case 11:return t=cu(t.type.render,!1),t;case 1:return t=cu(t.type,!0),t;default:return""}}function Gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jr:return"Fragment";case Xr:return"Portal";case qu:return"Profiler";case dh:return"StrictMode";case Hu:return"Suspense";case Qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yg:return(t.displayName||"Context")+".Consumer";case gg:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Gu(t.type)||"Memo";case bn:e=t._payload,t=t._init;try{return Gu(t(e))}catch{}}return null}function Q0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gu(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G0(t){var e=vg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wo(t){t._valueTracker||(t._valueTracker=G0(t))}function wg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ku(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Eg(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function Yu(t,e){Eg(t,e);var n=sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xu(t,e.type,sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xu(t,e,n){(e!=="number"||Na(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pi=Array.isArray;function cs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ju(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(pi(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sr(n)}}function Tg(t,e){var n=sr(e.value),r=sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ig(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ig(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qo,Sg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qo=qo||document.createElement("div"),qo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ji(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K0=["Webkit","ms","Moz","O"];Object.keys(Ti).forEach(function(t){K0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ti[e]=Ti[t]})});function Ag(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ti.hasOwnProperty(t)&&Ti[t]?(""+e).trim():e+"px"}function xg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ag(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Y0=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ec(t,e){if(e){if(Y0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function tc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rc=null,hs=null,ds=null;function Gf(t){if(t=fo(t)){if(typeof rc!="function")throw Error(j(280));var e=t.stateNode;e&&(e=yl(e),rc(t.stateNode,t.type,e))}}function Cg(t){hs?ds?ds.push(t):ds=[t]:hs=t}function Rg(){if(hs){var t=hs,e=ds;if(ds=hs=null,Gf(t),e)for(t=0;t<e.length;t++)Gf(e[t])}}function kg(t,e){return t(e)}function Pg(){}var hu=!1;function Ng(t,e,n){if(hu)return t(e,n);hu=!0;try{return kg(t,e,n)}finally{hu=!1,(hs!==null||ds!==null)&&(Pg(),Rg())}}function Fi(t,e){var n=t.stateNode;if(n===null)return null;var r=yl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var sc=!1;if(Cn)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){sc=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{sc=!1}function X0(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Ii=!1,Da=null,Va=!1,ic=null,J0={onError:function(t){Ii=!0,Da=t}};function Z0(t,e,n,r,s,i,a,l,u){Ii=!1,Da=null,X0.apply(J0,arguments)}function ew(t,e,n,r,s,i,a,l,u){if(Z0.apply(this,arguments),Ii){if(Ii){var h=Da;Ii=!1,Da=null}else throw Error(j(198));Va||(Va=!0,ic=h)}}function br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kf(t){if(br(t)!==t)throw Error(j(188))}function tw(t){var e=t.alternate;if(!e){if(e=br(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kf(s),t;if(i===r)return Kf(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Vg(t){return t=tw(t),t!==null?Lg(t):null}function Lg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lg(t);if(e!==null)return e;t=t.sibling}return null}var Og=jt.unstable_scheduleCallback,Yf=jt.unstable_cancelCallback,nw=jt.unstable_shouldYield,rw=jt.unstable_requestPaint,Me=jt.unstable_now,sw=jt.unstable_getCurrentPriorityLevel,gh=jt.unstable_ImmediatePriority,Mg=jt.unstable_UserBlockingPriority,La=jt.unstable_NormalPriority,iw=jt.unstable_LowPriority,jg=jt.unstable_IdlePriority,fl=null,cn=null;function ow(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(fl,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:uw,aw=Math.log,lw=Math.LN2;function uw(t){return t>>>=0,t===0?32:31-(aw(t)/lw|0)|0}var Ho=64,Qo=4194304;function mi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=mi(l):(i&=a,i!==0&&(r=mi(i)))}else a=n&~s,a!==0?r=mi(a):i!==0&&(r=mi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function cw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-nn(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=cw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function oc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fg(){var t=Ho;return Ho<<=1,!(Ho&4194240)&&(Ho=64),t}function du(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function co(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function dw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function bg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ug,_h,Bg,zg,$g,ac=!1,Go=[],Qn=null,Gn=null,Kn=null,bi=new Map,Ui=new Map,Bn=[],fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xf(t,e){switch(t){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":bi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ui.delete(e.pointerId)}}function si(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fo(e),e!==null&&_h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pw(t,e,n,r,s){switch(e){case"focusin":return Qn=si(Qn,t,e,n,r,s),!0;case"dragenter":return Gn=si(Gn,t,e,n,r,s),!0;case"mouseover":return Kn=si(Kn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return bi.set(i,si(bi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ui.set(i,si(Ui.get(i)||null,t,e,n,r,s)),!0}return!1}function Wg(t){var e=Tr(t.target);if(e!==null){var n=br(e);if(n!==null){if(e=n.tag,e===13){if(e=Dg(n),e!==null){t.blockedOn=e,$g(t.priority,function(){Bg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ma(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nc=r,n.target.dispatchEvent(r),nc=null}else return e=fo(n),e!==null&&_h(e),t.blockedOn=n,!1;e.shift()}return!0}function Jf(t,e,n){ma(t)&&n.delete(e)}function mw(){ac=!1,Qn!==null&&ma(Qn)&&(Qn=null),Gn!==null&&ma(Gn)&&(Gn=null),Kn!==null&&ma(Kn)&&(Kn=null),bi.forEach(Jf),Ui.forEach(Jf)}function ii(t,e){t.blockedOn===e&&(t.blockedOn=null,ac||(ac=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,mw)))}function Bi(t){function e(s){return ii(s,t)}if(0<Go.length){ii(Go[0],t);for(var n=1;n<Go.length;n++){var r=Go[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qn!==null&&ii(Qn,t),Gn!==null&&ii(Gn,t),Kn!==null&&ii(Kn,t),bi.forEach(e),Ui.forEach(e),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)Wg(n),n.blockedOn===null&&Bn.shift()}var fs=Ln.ReactCurrentBatchConfig,Ma=!0;function gw(t,e,n,r){var s=pe,i=fs.transition;fs.transition=null;try{pe=1,vh(t,e,n,r)}finally{pe=s,fs.transition=i}}function yw(t,e,n,r){var s=pe,i=fs.transition;fs.transition=null;try{pe=4,vh(t,e,n,r)}finally{pe=s,fs.transition=i}}function vh(t,e,n,r){if(Ma){var s=lc(t,e,n,r);if(s===null)Tu(t,e,r,ja,n),Xf(t,r);else if(pw(s,t,e,n,r))r.stopPropagation();else if(Xf(t,r),e&4&&-1<fw.indexOf(t)){for(;s!==null;){var i=fo(s);if(i!==null&&Ug(i),i=lc(t,e,n,r),i===null&&Tu(t,e,r,ja,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Tu(t,e,r,null,n)}}var ja=null;function lc(t,e,n,r){if(ja=null,t=mh(r),t=Tr(t),t!==null)if(e=br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ja=t,null}function qg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sw()){case gh:return 1;case Mg:return 4;case La:case iw:return 16;case jg:return 536870912;default:return 16}default:return 16}}var Wn=null,wh=null,ga=null;function Hg(){if(ga)return ga;var t,e=wh,n=e.length,r,s="value"in Wn?Wn.value:Wn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ga=s.slice(t,1<r?1-r:void 0)}function ya(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ko(){return!0}function Zf(){return!1}function bt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ko:Zf,this.isPropagationStopped=Zf,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),e}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eh=bt(Ls),ho=Re({},Ls,{view:0,detail:0}),_w=bt(ho),fu,pu,oi,pl=Re({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Th,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oi&&(oi&&t.type==="mousemove"?(fu=t.screenX-oi.screenX,pu=t.screenY-oi.screenY):pu=fu=0,oi=t),fu)},movementY:function(t){return"movementY"in t?t.movementY:pu}}),ep=bt(pl),vw=Re({},pl,{dataTransfer:0}),ww=bt(vw),Ew=Re({},ho,{relatedTarget:0}),mu=bt(Ew),Tw=Re({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Iw=bt(Tw),Sw=Re({},Ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aw=bt(Sw),xw=Re({},Ls,{data:0}),tp=bt(xw),Cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kw[t])?!!e[t]:!1}function Th(){return Pw}var Nw=Re({},ho,{key:function(t){if(t.key){var e=Cw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Th,charCode:function(t){return t.type==="keypress"?ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dw=bt(Nw),Vw=Re({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),np=bt(Vw),Lw=Re({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Th}),Ow=bt(Lw),Mw=Re({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),jw=bt(Mw),Fw=Re({},pl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bw=bt(Fw),Uw=[9,13,27,32],Ih=Cn&&"CompositionEvent"in window,Si=null;Cn&&"documentMode"in document&&(Si=document.documentMode);var Bw=Cn&&"TextEvent"in window&&!Si,Qg=Cn&&(!Ih||Si&&8<Si&&11>=Si),rp=" ",sp=!1;function Gg(t,e){switch(t){case"keyup":return Uw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zr=!1;function zw(t,e){switch(t){case"compositionend":return Kg(e);case"keypress":return e.which!==32?null:(sp=!0,rp);case"textInput":return t=e.data,t===rp&&sp?null:t;default:return null}}function $w(t,e){if(Zr)return t==="compositionend"||!Ih&&Gg(t,e)?(t=Hg(),ga=wh=Wn=null,Zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qg&&e.locale!=="ko"?null:e.data;default:return null}}var Ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ww[t.type]:e==="textarea"}function Yg(t,e,n,r){Cg(r),e=Fa(e,"onChange"),0<e.length&&(n=new Eh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ai=null,zi=null;function qw(t){ay(t,0)}function ml(t){var e=ns(t);if(wg(e))return t}function Hw(t,e){if(t==="change")return e}var Xg=!1;if(Cn){var gu;if(Cn){var yu="oninput"in document;if(!yu){var op=document.createElement("div");op.setAttribute("oninput","return;"),yu=typeof op.oninput=="function"}gu=yu}else gu=!1;Xg=gu&&(!document.documentMode||9<document.documentMode)}function ap(){Ai&&(Ai.detachEvent("onpropertychange",Jg),zi=Ai=null)}function Jg(t){if(t.propertyName==="value"&&ml(zi)){var e=[];Yg(e,zi,t,mh(t)),Ng(qw,e)}}function Qw(t,e,n){t==="focusin"?(ap(),Ai=e,zi=n,Ai.attachEvent("onpropertychange",Jg)):t==="focusout"&&ap()}function Gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ml(zi)}function Kw(t,e){if(t==="click")return ml(e)}function Yw(t,e){if(t==="input"||t==="change")return ml(e)}function Xw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:Xw;function $i(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wu.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function up(t,e){var n=lp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lp(n)}}function Zg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ey(){for(var t=window,e=Na();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Na(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jw(t){var e=ey(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zg(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=up(n,i);var a=up(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zw=Cn&&"documentMode"in document&&11>=document.documentMode,es=null,uc=null,xi=null,cc=!1;function cp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cc||es==null||es!==Na(r)||(r=es,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&$i(xi,r)||(xi=r,r=Fa(uc,"onSelect"),0<r.length&&(e=new Eh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=es)))}function Yo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ts={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},_u={},ty={};Cn&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function gl(t){if(_u[t])return _u[t];if(!ts[t])return t;var e=ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ty)return _u[t]=e[n];return t}var ny=gl("animationend"),ry=gl("animationiteration"),sy=gl("animationstart"),iy=gl("transitionend"),oy=new Map,hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){oy.set(t,e),Fr(e,[t])}for(var vu=0;vu<hp.length;vu++){var wu=hp[vu],eE=wu.toLowerCase(),tE=wu[0].toUpperCase()+wu.slice(1);ur(eE,"on"+tE)}ur(ny,"onAnimationEnd");ur(ry,"onAnimationIteration");ur(sy,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(iy,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nE=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function dp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ew(r,e,void 0,t),t.currentTarget=null}function ay(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;dp(s,l,h),i=u}}}if(Va)throw t=ic,Va=!1,ic=null,t}function Te(t,e){var n=e[mc];n===void 0&&(n=e[mc]=new Set);var r=t+"__bubble";n.has(r)||(ly(e,t,2,!1),n.add(r))}function Eu(t,e,n){var r=0;e&&(r|=4),ly(n,t,r,e)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function Wi(t){if(!t[Xo]){t[Xo]=!0,mg.forEach(function(n){n!=="selectionchange"&&(nE.has(n)||Eu(n,!1,t),Eu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xo]||(e[Xo]=!0,Eu("selectionchange",!1,e))}}function ly(t,e,n,r){switch(qg(e)){case 1:var s=gw;break;case 4:s=yw;break;default:s=vh}n=s.bind(null,e,n,t),s=void 0,!sc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Tu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Tr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Ng(function(){var h=i,f=mh(n),y=[];e:{var p=oy.get(t);if(p!==void 0){var S=Eh,P=t;switch(t){case"keypress":if(ya(n)===0)break e;case"keydown":case"keyup":S=Dw;break;case"focusin":P="focus",S=mu;break;case"focusout":P="blur",S=mu;break;case"beforeblur":case"afterblur":S=mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=ep;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Ow;break;case ny:case ry:case sy:S=Iw;break;case iy:S=jw;break;case"scroll":S=_w;break;case"wheel":S=bw;break;case"copy":case"cut":case"paste":S=Aw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=np}var D=(e&4)!==0,O=!D&&t==="scroll",I=D?p!==null?p+"Capture":null:p;D=[];for(var w=h,A;w!==null;){A=w;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,I!==null&&(V=Fi(w,I),V!=null&&D.push(qi(w,V,A)))),O)break;w=w.return}0<D.length&&(p=new S(p,P,null,n,f),y.push({event:p,listeners:D}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",p&&n!==nc&&(P=n.relatedTarget||n.fromElement)&&(Tr(P)||P[Rn]))break e;if((S||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,S?(P=n.relatedTarget||n.toElement,S=h,P=P?Tr(P):null,P!==null&&(O=br(P),P!==O||P.tag!==5&&P.tag!==6)&&(P=null)):(S=null,P=h),S!==P)){if(D=ep,V="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(D=np,V="onPointerLeave",I="onPointerEnter",w="pointer"),O=S==null?p:ns(S),A=P==null?p:ns(P),p=new D(V,w+"leave",S,n,f),p.target=O,p.relatedTarget=A,V=null,Tr(f)===h&&(D=new D(I,w+"enter",P,n,f),D.target=A,D.relatedTarget=O,V=D),O=V,S&&P)t:{for(D=S,I=P,w=0,A=D;A;A=Qr(A))w++;for(A=0,V=I;V;V=Qr(V))A++;for(;0<w-A;)D=Qr(D),w--;for(;0<A-w;)I=Qr(I),A--;for(;w--;){if(D===I||I!==null&&D===I.alternate)break t;D=Qr(D),I=Qr(I)}D=null}else D=null;S!==null&&fp(y,p,S,D,!1),P!==null&&O!==null&&fp(y,O,P,D,!0)}}e:{if(p=h?ns(h):window,S=p.nodeName&&p.nodeName.toLowerCase(),S==="select"||S==="input"&&p.type==="file")var F=Hw;else if(ip(p))if(Xg)F=Yw;else{F=Gw;var U=Qw}else(S=p.nodeName)&&S.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=Kw);if(F&&(F=F(t,h))){Yg(y,F,n,f);break e}U&&U(t,p,h),t==="focusout"&&(U=p._wrapperState)&&U.controlled&&p.type==="number"&&Xu(p,"number",p.value)}switch(U=h?ns(h):window,t){case"focusin":(ip(U)||U.contentEditable==="true")&&(es=U,uc=h,xi=null);break;case"focusout":xi=uc=es=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,cp(y,n,f);break;case"selectionchange":if(Zw)break;case"keydown":case"keyup":cp(y,n,f)}var _;if(Ih)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Zr?Gg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Qg&&n.locale!=="ko"&&(Zr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Zr&&(_=Hg()):(Wn=f,wh="value"in Wn?Wn.value:Wn.textContent,Zr=!0)),U=Fa(h,g),0<U.length&&(g=new tp(g,t,null,n,f),y.push({event:g,listeners:U}),_?g.data=_:(_=Kg(n),_!==null&&(g.data=_)))),(_=Bw?zw(t,n):$w(t,n))&&(h=Fa(h,"onBeforeInput"),0<h.length&&(f=new tp("onBeforeInput","beforeinput",null,n,f),y.push({event:f,listeners:h}),f.data=_))}ay(y,e)})}function qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fi(t,n),i!=null&&r.unshift(qi(t,i,s)),i=Fi(t,e),i!=null&&r.push(qi(t,i,s))),t=t.return}return r}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fp(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Fi(n,i),u!=null&&a.unshift(qi(n,u,l))):s||(u=Fi(n,i),u!=null&&a.push(qi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var rE=/\r\n?/g,sE=/\u0000|\uFFFD/g;function pp(t){return(typeof t=="string"?t:""+t).replace(rE,`
`).replace(sE,"")}function Jo(t,e,n){if(e=pp(e),pp(t)!==e&&n)throw Error(j(425))}function ba(){}var hc=null,dc=null;function fc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,iE=typeof clearTimeout=="function"?clearTimeout:void 0,mp=typeof Promise=="function"?Promise:void 0,oE=typeof queueMicrotask=="function"?queueMicrotask:typeof mp<"u"?function(t){return mp.resolve(null).then(t).catch(aE)}:pc;function aE(t){setTimeout(function(){throw t})}function Iu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bi(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Os=Math.random().toString(36).slice(2),un="__reactFiber$"+Os,Hi="__reactProps$"+Os,Rn="__reactContainer$"+Os,mc="__reactEvents$"+Os,lE="__reactListeners$"+Os,uE="__reactHandles$"+Os;function Tr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rn]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gp(t);t!==null;){if(n=t[un])return n;t=gp(t)}return e}t=n,n=t.parentNode}return null}function fo(t){return t=t[un]||t[Rn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function yl(t){return t[Hi]||null}var gc=[],rs=-1;function cr(t){return{current:t}}function Se(t){0>rs||(t.current=gc[rs],gc[rs]=null,rs--)}function we(t,e){rs++,gc[rs]=t.current,t.current=e}var ir={},pt=cr(ir),Ct=cr(!1),Pr=ir;function ws(t,e){var n=t.type.contextTypes;if(!n)return ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function Ua(){Se(Ct),Se(pt)}function yp(t,e,n){if(pt.current!==ir)throw Error(j(168));we(pt,e),we(Ct,n)}function uy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,Q0(t)||"Unknown",s));return Re({},n,r)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ir,Pr=pt.current,we(pt,t),we(Ct,Ct.current),!0}function _p(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=uy(t,e,Pr),r.__reactInternalMemoizedMergedChildContext=t,Se(Ct),Se(pt),we(pt,t)):Se(Ct),we(Ct,n)}var Tn=null,_l=!1,Su=!1;function cy(t){Tn===null?Tn=[t]:Tn.push(t)}function cE(t){_l=!0,cy(t)}function hr(){if(!Su&&Tn!==null){Su=!0;var t=0,e=pe;try{var n=Tn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,_l=!1}catch(s){throw Tn!==null&&(Tn=Tn.slice(t+1)),Og(gh,hr),s}finally{pe=e,Su=!1}}return null}var ss=[],is=0,za=null,$a=0,$t=[],Wt=0,Nr=null,In=1,Sn="";function vr(t,e){ss[is++]=$a,ss[is++]=za,za=t,$a=e}function hy(t,e,n){$t[Wt++]=In,$t[Wt++]=Sn,$t[Wt++]=Nr,Nr=t;var r=In;t=Sn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,In=1<<32-nn(e)+s|n<<s|r,Sn=i+t}else In=1<<i|n<<s|r,Sn=t}function Ah(t){t.return!==null&&(vr(t,1),hy(t,1,0))}function xh(t){for(;t===za;)za=ss[--is],ss[is]=null,$a=ss[--is],ss[is]=null;for(;t===Nr;)Nr=$t[--Wt],$t[Wt]=null,Sn=$t[--Wt],$t[Wt]=null,In=$t[--Wt],$t[Wt]=null}var Mt=null,Lt=null,Ae=!1,tn=null;function dy(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Nr!==null?{id:In,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Lt=null,!0):!1;default:return!1}}function yc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _c(t){if(Ae){var e=Lt;if(e){var n=e;if(!vp(t,e)){if(yc(t))throw Error(j(418));e=Yn(n.nextSibling);var r=Mt;e&&vp(t,e)?dy(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Mt=t)}}else{if(yc(t))throw Error(j(418));t.flags=t.flags&-4097|2,Ae=!1,Mt=t}}}function wp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Zo(t){if(t!==Mt)return!1;if(!Ae)return wp(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fc(t.type,t.memoizedProps)),e&&(e=Lt)){if(yc(t))throw fy(),Error(j(418));for(;e;)dy(t,e),e=Yn(e.nextSibling)}if(wp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Mt?Yn(t.stateNode.nextSibling):null;return!0}function fy(){for(var t=Lt;t;)t=Yn(t.nextSibling)}function Es(){Lt=Mt=null,Ae=!1}function Ch(t){tn===null?tn=[t]:tn.push(t)}var hE=Ln.ReactCurrentBatchConfig;function ai(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function ea(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ep(t){var e=t._init;return e(t._payload)}function py(t){function e(I,w){if(t){var A=I.deletions;A===null?(I.deletions=[w],I.flags|=16):A.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=er(I,w),I.index=0,I.sibling=null,I}function i(I,w,A){return I.index=A,t?(A=I.alternate,A!==null?(A=A.index,A<w?(I.flags|=2,w):A):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,A,V){return w===null||w.tag!==6?(w=Nu(A,I.mode,V),w.return=I,w):(w=s(w,A),w.return=I,w)}function u(I,w,A,V){var F=A.type;return F===Jr?f(I,w,A.props.children,V,A.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===bn&&Ep(F)===w.type)?(V=s(w,A.props),V.ref=ai(I,w,A),V.return=I,V):(V=Sa(A.type,A.key,A.props,null,I.mode,V),V.ref=ai(I,w,A),V.return=I,V)}function h(I,w,A,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Du(A,I.mode,V),w.return=I,w):(w=s(w,A.children||[]),w.return=I,w)}function f(I,w,A,V,F){return w===null||w.tag!==7?(w=Cr(A,I.mode,V,F),w.return=I,w):(w=s(w,A),w.return=I,w)}function y(I,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nu(""+w,I.mode,A),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $o:return A=Sa(w.type,w.key,w.props,null,I.mode,A),A.ref=ai(I,null,w),A.return=I,A;case Xr:return w=Du(w,I.mode,A),w.return=I,w;case bn:var V=w._init;return y(I,V(w._payload),A)}if(pi(w)||ni(w))return w=Cr(w,I.mode,A,null),w.return=I,w;ea(I,w)}return null}function p(I,w,A,V){var F=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return F!==null?null:l(I,w,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case $o:return A.key===F?u(I,w,A,V):null;case Xr:return A.key===F?h(I,w,A,V):null;case bn:return F=A._init,p(I,w,F(A._payload),V)}if(pi(A)||ni(A))return F!==null?null:f(I,w,A,V,null);ea(I,A)}return null}function S(I,w,A,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return I=I.get(A)||null,l(w,I,""+V,F);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case $o:return I=I.get(V.key===null?A:V.key)||null,u(w,I,V,F);case Xr:return I=I.get(V.key===null?A:V.key)||null,h(w,I,V,F);case bn:var U=V._init;return S(I,w,A,U(V._payload),F)}if(pi(V)||ni(V))return I=I.get(A)||null,f(w,I,V,F,null);ea(w,V)}return null}function P(I,w,A,V){for(var F=null,U=null,_=w,g=w=0,v=null;_!==null&&g<A.length;g++){_.index>g?(v=_,_=null):v=_.sibling;var T=p(I,_,A[g],V);if(T===null){_===null&&(_=v);break}t&&_&&T.alternate===null&&e(I,_),w=i(T,w,g),U===null?F=T:U.sibling=T,U=T,_=v}if(g===A.length)return n(I,_),Ae&&vr(I,g),F;if(_===null){for(;g<A.length;g++)_=y(I,A[g],V),_!==null&&(w=i(_,w,g),U===null?F=_:U.sibling=_,U=_);return Ae&&vr(I,g),F}for(_=r(I,_);g<A.length;g++)v=S(_,I,g,A[g],V),v!==null&&(t&&v.alternate!==null&&_.delete(v.key===null?g:v.key),w=i(v,w,g),U===null?F=v:U.sibling=v,U=v);return t&&_.forEach(function(x){return e(I,x)}),Ae&&vr(I,g),F}function D(I,w,A,V){var F=ni(A);if(typeof F!="function")throw Error(j(150));if(A=F.call(A),A==null)throw Error(j(151));for(var U=F=null,_=w,g=w=0,v=null,T=A.next();_!==null&&!T.done;g++,T=A.next()){_.index>g?(v=_,_=null):v=_.sibling;var x=p(I,_,T.value,V);if(x===null){_===null&&(_=v);break}t&&_&&x.alternate===null&&e(I,_),w=i(x,w,g),U===null?F=x:U.sibling=x,U=x,_=v}if(T.done)return n(I,_),Ae&&vr(I,g),F;if(_===null){for(;!T.done;g++,T=A.next())T=y(I,T.value,V),T!==null&&(w=i(T,w,g),U===null?F=T:U.sibling=T,U=T);return Ae&&vr(I,g),F}for(_=r(I,_);!T.done;g++,T=A.next())T=S(_,I,g,T.value,V),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?g:T.key),w=i(T,w,g),U===null?F=T:U.sibling=T,U=T);return t&&_.forEach(function(R){return e(I,R)}),Ae&&vr(I,g),F}function O(I,w,A,V){if(typeof A=="object"&&A!==null&&A.type===Jr&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case $o:e:{for(var F=A.key,U=w;U!==null;){if(U.key===F){if(F=A.type,F===Jr){if(U.tag===7){n(I,U.sibling),w=s(U,A.props.children),w.return=I,I=w;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===bn&&Ep(F)===U.type){n(I,U.sibling),w=s(U,A.props),w.ref=ai(I,U,A),w.return=I,I=w;break e}n(I,U);break}else e(I,U);U=U.sibling}A.type===Jr?(w=Cr(A.props.children,I.mode,V,A.key),w.return=I,I=w):(V=Sa(A.type,A.key,A.props,null,I.mode,V),V.ref=ai(I,w,A),V.return=I,I=V)}return a(I);case Xr:e:{for(U=A.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(I,w.sibling),w=s(w,A.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=Du(A,I.mode,V),w.return=I,I=w}return a(I);case bn:return U=A._init,O(I,w,U(A._payload),V)}if(pi(A))return P(I,w,A,V);if(ni(A))return D(I,w,A,V);ea(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,A),w.return=I,I=w):(n(I,w),w=Nu(A,I.mode,V),w.return=I,I=w),a(I)):n(I,w)}return O}var Ts=py(!0),my=py(!1),Wa=cr(null),qa=null,os=null,Rh=null;function kh(){Rh=os=qa=null}function Ph(t){var e=Wa.current;Se(Wa),t._currentValue=e}function vc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ps(t,e){qa=t,Rh=os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(Rh!==t)if(t={context:t,memoizedValue:e,next:null},os===null){if(qa===null)throw Error(j(308));os=t,qa.dependencies={lanes:0,firstContext:t}}else os=os.next=t;return e}var Ir=null;function Nh(t){Ir===null?Ir=[t]:Ir.push(t)}function gy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nh(e)):(n.next=s.next,s.next=n),e.interleaved=n,kn(t,r)}function kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function Dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,kn(t,n)}return s=r.interleaved,s===null?(e.next=e,Nh(r)):(e.next=s.next,s.next=e),r.interleaved=e,kn(t,n)}function _a(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function Tp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ha(t,e,n,r){var s=t.updateQueue;Un=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var y=s.baseState;a=0,f=h=u=null,l=i;do{var p=l.lane,S=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,D=l;switch(p=e,S=n,D.tag){case 1:if(P=D.payload,typeof P=="function"){y=P.call(S,y,p);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=D.payload,p=typeof P=="function"?P.call(S,y,p):P,p==null)break e;y=Re({},y,p);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else S={eventTime:S,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=S,u=y):f=f.next=S,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(u=y),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vr|=a,t.lanes=a,t.memoizedState=y}}function Ip(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var po={},hn=cr(po),Qi=cr(po),Gi=cr(po);function Sr(t){if(t===po)throw Error(j(174));return t}function Vh(t,e){switch(we(Gi,e),we(Qi,t),we(hn,po),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zu(e,t)}Se(hn),we(hn,e)}function Is(){Se(hn),Se(Qi),Se(Gi)}function _y(t){Sr(Gi.current);var e=Sr(hn.current),n=Zu(e,t.type);e!==n&&(we(Qi,t),we(hn,n))}function Lh(t){Qi.current===t&&(Se(hn),Se(Qi))}var xe=cr(0);function Qa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Au=[];function Oh(){for(var t=0;t<Au.length;t++)Au[t]._workInProgressVersionPrimary=null;Au.length=0}var va=Ln.ReactCurrentDispatcher,xu=Ln.ReactCurrentBatchConfig,Dr=0,Ce=null,Be=null,qe=null,Ga=!1,Ci=!1,Ki=0,dE=0;function at(){throw Error(j(321))}function Mh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,s,i){if(Dr=i,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,va.current=t===null||t.memoizedState===null?gE:yE,t=n(r,s),Ci){i=0;do{if(Ci=!1,Ki=0,25<=i)throw Error(j(301));i+=1,qe=Be=null,e.updateQueue=null,va.current=_E,t=n(r,s)}while(Ci)}if(va.current=Ka,e=Be!==null&&Be.next!==null,Dr=0,qe=Be=Ce=null,Ga=!1,e)throw Error(j(300));return t}function Fh(){var t=Ki!==0;return Ki=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ce.memoizedState=qe=t:qe=qe.next=t,qe}function Gt(){if(Be===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=qe===null?Ce.memoizedState:qe.next;if(e!==null)qe=e,Be=t;else{if(t===null)throw Error(j(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},qe===null?Ce.memoizedState=qe=t:qe=qe.next=t}return qe}function Yi(t,e){return typeof e=="function"?e(t):e}function Cu(t){var e=Gt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var f=h.lane;if((Dr&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,Ce.lanes|=f,Vr|=f}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,sn(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ce.lanes|=i,Vr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ru(t){var e=Gt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);sn(i,e.memoizedState)||(xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function vy(){}function wy(t,e){var n=Ce,r=Gt(),s=e(),i=!sn(r.memoizedState,s);if(i&&(r.memoizedState=s,xt=!0),r=r.queue,bh(Iy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Xi(9,Ty.bind(null,n,r,s,e),void 0,null),He===null)throw Error(j(349));Dr&30||Ey(n,e,s)}return s}function Ey(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ty(t,e,n,r){e.value=n,e.getSnapshot=r,Sy(e)&&Ay(t)}function Iy(t,e,n){return n(function(){Sy(e)&&Ay(t)})}function Sy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function Ay(t){var e=kn(t,1);e!==null&&rn(e,t,1,-1)}function Sp(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},e.queue=t,t=t.dispatch=mE.bind(null,Ce,t),[e.memoizedState,t]}function Xi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xy(){return Gt().memoizedState}function wa(t,e,n,r){var s=ln();Ce.flags|=t,s.memoizedState=Xi(1|e,n,void 0,r===void 0?null:r)}function vl(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Be!==null){var a=Be.memoizedState;if(i=a.destroy,r!==null&&Mh(r,a.deps)){s.memoizedState=Xi(e,n,i,r);return}}Ce.flags|=t,s.memoizedState=Xi(1|e,n,i,r)}function Ap(t,e){return wa(8390656,8,t,e)}function bh(t,e){return vl(2048,8,t,e)}function Cy(t,e){return vl(4,2,t,e)}function Ry(t,e){return vl(4,4,t,e)}function ky(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Py(t,e,n){return n=n!=null?n.concat([t]):null,vl(4,4,ky.bind(null,e,t),n)}function Uh(){}function Ny(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dy(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vy(t,e,n){return Dr&21?(sn(n,e)||(n=Fg(),Ce.lanes|=n,Vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function fE(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=xu.transition;xu.transition={};try{t(!1),e()}finally{pe=n,xu.transition=r}}function Ly(){return Gt().memoizedState}function pE(t,e,n){var r=Zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oy(t))My(e,n);else if(n=gy(t,e,n,r),n!==null){var s=_t();rn(n,t,r,s),jy(n,e,r)}}function mE(t,e,n){var r=Zn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oy(t))My(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,sn(l,a)){var u=e.interleaved;u===null?(s.next=s,Nh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=gy(t,e,s,r),n!==null&&(s=_t(),rn(n,t,r,s),jy(n,e,r))}}function Oy(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function My(t,e){Ci=Ga=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var Ka={readContext:Qt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},gE={readContext:Qt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:Ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wa(4194308,4,ky.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wa(4194308,4,t,e)},useInsertionEffect:function(t,e){return wa(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pE.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:Sp,useDebugValue:Uh,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=Sp(!1),e=t[0];return t=fE.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,s=ln();if(Ae){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),He===null)throw Error(j(349));Dr&30||Ey(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ap(Iy.bind(null,r,i,t),[t]),r.flags|=2048,Xi(9,Ty.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ln(),e=He.identifierPrefix;if(Ae){var n=Sn,r=In;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ki++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yE={readContext:Qt,useCallback:Ny,useContext:Qt,useEffect:bh,useImperativeHandle:Py,useInsertionEffect:Cy,useLayoutEffect:Ry,useMemo:Dy,useReducer:Cu,useRef:xy,useState:function(){return Cu(Yi)},useDebugValue:Uh,useDeferredValue:function(t){var e=Gt();return Vy(e,Be.memoizedState,t)},useTransition:function(){var t=Cu(Yi)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:vy,useSyncExternalStore:wy,useId:Ly,unstable_isNewReconciler:!1},_E={readContext:Qt,useCallback:Ny,useContext:Qt,useEffect:bh,useImperativeHandle:Py,useInsertionEffect:Cy,useLayoutEffect:Ry,useMemo:Dy,useReducer:Ru,useRef:xy,useState:function(){return Ru(Yi)},useDebugValue:Uh,useDeferredValue:function(t){var e=Gt();return Be===null?e.memoizedState=t:Vy(e,Be.memoizedState,t)},useTransition:function(){var t=Ru(Yi)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:vy,useSyncExternalStore:wy,useId:Ly,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wl={isMounted:function(t){return(t=t._reactInternals)?br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Zn(t),i=An(r,s);i.payload=e,n!=null&&(i.callback=n),e=Xn(t,i,s),e!==null&&(rn(e,t,s,r),_a(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Zn(t),i=An(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Xn(t,i,s),e!==null&&(rn(e,t,s,r),_a(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=Zn(t),s=An(n,r);s.tag=2,e!=null&&(s.callback=e),e=Xn(t,s,r),e!==null&&(rn(e,t,r,n),_a(e,t,r))}};function xp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!$i(n,r)||!$i(s,i):!0}function Fy(t,e,n){var r=!1,s=ir,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=Rt(e)?Pr:pt.current,r=e.contextTypes,i=(r=r!=null)?ws(t,s):ir),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wl.enqueueReplaceState(e,e.state,null)}function Ec(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Dh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=Rt(e)?Pr:pt.current,s.context=ws(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wl.enqueueReplaceState(s,s.state,null),Ha(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ss(t,e){try{var n="",r=e;do n+=H0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vE=typeof WeakMap=="function"?WeakMap:Map;function by(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xa||(Xa=!0,Dc=r),Tc(t,e)},n}function Uy(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Tc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Tc(t,e),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Rp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=VE.bind(null,t,e,n),e.then(t,t))}function kp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,Xn(n,e,1))),n.lanes|=1),t)}var wE=Ln.ReactCurrentOwner,xt=!1;function yt(t,e,n,r){e.child=t===null?my(e,null,n,r):Ts(e,t.child,n,r)}function Np(t,e,n,r,s){n=n.render;var i=e.ref;return ps(e,s),r=jh(t,e,n,r,i,s),n=Fh(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pn(t,e,s)):(Ae&&n&&Ah(e),e.flags|=1,yt(t,e,r,s),e.child)}function Dp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Gh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,By(t,e,i,r,s)):(t=Sa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:$i,n(a,r)&&t.ref===e.ref)return Pn(t,e,s)}return e.flags|=1,t=er(i,r),t.ref=e.ref,t.return=e,e.child=t}function By(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if($i(i,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,Pn(t,e,s)}return Ic(t,e,n,r,s)}function zy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(ls,Vt),Vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(ls,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(ls,Vt),Vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(ls,Vt),Vt|=r;return yt(t,e,s,n),e.child}function $y(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ic(t,e,n,r,s){var i=Rt(n)?Pr:pt.current;return i=ws(e,i),ps(e,s),n=jh(t,e,n,r,i,s),r=Fh(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pn(t,e,s)):(Ae&&r&&Ah(e),e.flags|=1,yt(t,e,n,s),e.child)}function Vp(t,e,n,r,s){if(Rt(n)){var i=!0;Ba(e)}else i=!1;if(ps(e,s),e.stateNode===null)Ea(t,e),Fy(e,n,r),Ec(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Qt(h):(h=Rt(n)?Pr:pt.current,h=ws(e,h));var f=n.getDerivedStateFromProps,y=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Cp(e,a,r,h),Un=!1;var p=e.memoizedState;a.state=p,Ha(e,r,a,s),u=e.memoizedState,l!==r||p!==u||Ct.current||Un?(typeof f=="function"&&(wc(e,n,f,r),u=e.memoizedState),(l=Un||xp(e,n,l,r,p,u,h))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,yy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Zt(e.type,l),a.props=h,y=e.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qt(u):(u=Rt(n)?Pr:pt.current,u=ws(e,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||p!==u)&&Cp(e,a,r,u),Un=!1,p=e.memoizedState,a.state=p,Ha(e,r,a,s);var P=e.memoizedState;l!==y||p!==P||Ct.current||Un?(typeof S=="function"&&(wc(e,n,S,r),P=e.memoizedState),(h=Un||xp(e,n,h,r,p,P,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,P,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,P,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),a.props=r,a.state=P,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Sc(t,e,n,r,i,s)}function Sc(t,e,n,r,s,i){$y(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&_p(e,n,!1),Pn(t,e,i);r=e.stateNode,wE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ts(e,t.child,null,i),e.child=Ts(e,null,l,i)):yt(t,e,l,i),e.memoizedState=r.state,s&&_p(e,n,!0),e.child}function Wy(t){var e=t.stateNode;e.pendingContext?yp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yp(t,e.context,!1),Vh(t,e.containerInfo)}function Lp(t,e,n,r,s){return Es(),Ch(s),e.flags|=256,yt(t,e,n,r),e.child}var Ac={dehydrated:null,treeContext:null,retryLane:0};function xc(t){return{baseLanes:t,cachePool:null,transitions:null}}function qy(t,e,n){var r=e.pendingProps,s=xe.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(xe,s&1),t===null)return _c(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Il(a,r,0,null),t=Cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=xc(n),e.memoizedState=Ac,t):Bh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return EE(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=er(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=er(l,i):(i=Cr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?xc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ac,r}return i=t.child,t=i.sibling,r=er(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bh(t,e){return e=Il({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ta(t,e,n,r){return r!==null&&Ch(r),Ts(e,t.child,null,n),t=Bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EE(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=ku(Error(j(422))),ta(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Il({mode:"visible",children:r.children},s,0,null),i=Cr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ts(e,t.child,null,a),e.child.memoizedState=xc(a),e.memoizedState=Ac,i);if(!(e.mode&1))return ta(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(j(419)),r=ku(i,r,void 0),ta(t,e,a,r)}if(l=(a&t.childLanes)!==0,xt||l){if(r=He,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kn(t,s),rn(r,t,s,-1))}return Qh(),r=ku(Error(j(421))),ta(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=Yn(s.nextSibling),Mt=e,Ae=!0,tn=null,t!==null&&($t[Wt++]=In,$t[Wt++]=Sn,$t[Wt++]=Nr,In=t.id,Sn=t.overflow,Nr=e),e=Bh(e,r.children),e.flags|=4096,e)}function Op(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vc(t.return,e,n)}function Pu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Hy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(yt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,e);else if(t.tag===19)Op(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Pu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Pu(e,!0,n,null,i);break;case"together":Pu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TE(t,e,n){switch(e.tag){case 3:Wy(e),Es();break;case 5:_y(e);break;case 1:Rt(e.type)&&Ba(e);break;case 4:Vh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(Wa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?qy(t,e,n):(we(xe,xe.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);we(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,zy(t,e,n)}return Pn(t,e,n)}var Qy,Cc,Gy,Ky;Qy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cc=function(){};Gy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Sr(hn.current);var i=null;switch(n){case"input":s=Ku(t,s),r=Ku(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Ju(t,s),r=Ju(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ba)}ec(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Mi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Mi.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Te("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ky=function(t,e,n,r){n!==r&&(e.flags|=4)};function li(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IE(t,e,n){var r=e.pendingProps;switch(xh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Rt(e.type)&&Ua(),lt(e),null;case 3:return r=e.stateNode,Is(),Se(Ct),Se(pt),Oh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Oc(tn),tn=null))),Cc(t,e),lt(e),null;case 5:Lh(e);var s=Sr(Gi.current);if(n=e.type,t!==null&&e.stateNode!=null)Gy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return lt(e),null}if(t=Sr(hn.current),Zo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[un]=e,r[Hi]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<gi.length;s++)Te(gi[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":Wf(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":Hf(r,i),Te("invalid",r)}ec(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Jo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Jo(r.textContent,l,t),s=["children",""+l]):Mi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Te("scroll",r)}switch(n){case"input":Wo(r),qf(r,i,!0);break;case"textarea":Wo(r),Qf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ba)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ig(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[un]=e,t[Hi]=r,Qy(t,e,!1,!1),e.stateNode=t;e:{switch(a=tc(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<gi.length;s++)Te(gi[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":Wf(t,r),s=Ku(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Te("invalid",t);break;case"textarea":Hf(t,r),s=Ju(t,r),Te("invalid",t);break;default:s=r}ec(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?xg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Sg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ji(t,u):typeof u=="number"&&ji(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",t):u!=null&&hh(t,i,u,a))}switch(n){case"input":Wo(t),qf(t,r,!1);break;case"textarea":Wo(t),Qf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?cs(t,!!r.multiple,i,!1):r.defaultValue!=null&&cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ba)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)Ky(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Sr(Gi.current),Sr(hn.current),Zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Jo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return lt(e),null;case 13:if(Se(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Lt!==null&&e.mode&1&&!(e.flags&128))fy(),Es(),e.flags|=98560,i=!1;else if(i=Zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[un]=e}else Es(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else tn!==null&&(Oc(tn),tn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?ze===0&&(ze=3):Qh())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Is(),Cc(t,e),t===null&&Wi(e.stateNode.containerInfo),lt(e),null;case 10:return Ph(e.type._context),lt(e),null;case 17:return Rt(e.type)&&Ua(),lt(e),null;case 19:if(Se(xe),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)li(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Qa(t),a!==null){for(e.flags|=128,li(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>As&&(e.flags|=128,r=!0,li(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),li(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ae)return lt(e),null}else 2*Me()-i.renderingStartTime>As&&n!==1073741824&&(e.flags|=128,r=!0,li(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=xe.current,we(xe,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Hh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function SE(t,e){switch(xh(e),e.tag){case 1:return Rt(e.type)&&Ua(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Is(),Se(Ct),Se(pt),Oh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(Se(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Es()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(xe),null;case 4:return Is(),null;case 10:return Ph(e.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var na=!1,ht=!1,AE=typeof WeakSet=="function"?WeakSet:Set,$=null;function as(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Rc(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Mp=!1;function xE(t,e){if(hc=Ma,t=ey(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,y=t,p=null;t:for(;;){for(var S;y!==n||s!==0&&y.nodeType!==3||(l=a+s),y!==i||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)p=y,y=S;for(;;){if(y===t)break t;if(p===n&&++h===s&&(l=a),p===i&&++f===r&&(u=a),(S=y.nextSibling)!==null)break;y=p,p=y.parentNode}y=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dc={focusedElem:t,selectionRange:n},Ma=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var D=P.memoizedProps,O=P.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?D:Zt(e.type,D),O);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(V){Ve(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return P=Mp,Mp=!1,P}function Ri(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rc(e,n,i)}s=s.next}while(s!==r)}}function El(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yy(t){var e=t.alternate;e!==null&&(t.alternate=null,Yy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[Hi],delete e[mc],delete e[lE],delete e[uE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xy(t){return t.tag===5||t.tag===3||t.tag===4}function jp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ba));else if(r!==4&&(t=t.child,t!==null))for(Pc(t,e,n),t=t.sibling;t!==null;)Pc(t,e,n),t=t.sibling}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}var Ke=null,en=!1;function Fn(t,e,n){for(n=n.child;n!==null;)Jy(t,e,n),n=n.sibling}function Jy(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(fl,n)}catch{}switch(n.tag){case 5:ht||as(n,e);case 6:var r=Ke,s=en;Ke=null,Fn(t,e,n),Ke=r,en=s,Ke!==null&&(en?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(en?(t=Ke,n=n.stateNode,t.nodeType===8?Iu(t.parentNode,n):t.nodeType===1&&Iu(t,n),Bi(t)):Iu(Ke,n.stateNode));break;case 4:r=Ke,s=en,Ke=n.stateNode.containerInfo,en=!0,Fn(t,e,n),Ke=r,en=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Rc(n,e,a),s=s.next}while(s!==r)}Fn(t,e,n);break;case 1:if(!ht&&(as(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,e,l)}Fn(t,e,n);break;case 21:Fn(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Fn(t,e,n),ht=r):Fn(t,e,n);break;default:Fn(t,e,n)}}function Fp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AE),e.forEach(function(r){var s=OE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,en=!1;break e;case 3:Ke=l.stateNode.containerInfo,en=!0;break e;case 4:Ke=l.stateNode.containerInfo,en=!0;break e}l=l.return}if(Ke===null)throw Error(j(160));Jy(i,a,s),Ke=null,en=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ve(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zy(e,t),e=e.sibling}function Zy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),an(t),r&4){try{Ri(3,t,t.return),El(3,t)}catch(D){Ve(t,t.return,D)}try{Ri(5,t,t.return)}catch(D){Ve(t,t.return,D)}}break;case 1:Jt(e,t),an(t),r&512&&n!==null&&as(n,n.return);break;case 5:if(Jt(e,t),an(t),r&512&&n!==null&&as(n,n.return),t.flags&32){var s=t.stateNode;try{ji(s,"")}catch(D){Ve(t,t.return,D)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Eg(s,i),tc(l,a);var h=tc(l,i);for(a=0;a<u.length;a+=2){var f=u[a],y=u[a+1];f==="style"?xg(s,y):f==="dangerouslySetInnerHTML"?Sg(s,y):f==="children"?ji(s,y):hh(s,f,y,h)}switch(l){case"input":Yu(s,i);break;case"textarea":Tg(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?cs(s,!!i.multiple,S,!1):p!==!!i.multiple&&(i.defaultValue!=null?cs(s,!!i.multiple,i.defaultValue,!0):cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hi]=i}catch(D){Ve(t,t.return,D)}}break;case 6:if(Jt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(D){Ve(t,t.return,D)}}break;case 3:if(Jt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bi(e.containerInfo)}catch(D){Ve(t,t.return,D)}break;case 4:Jt(e,t),an(t);break;case 13:Jt(e,t),an(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Wh=Me())),r&4&&Fp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(h=ht)||f,Jt(e,t),ht=h):Jt(e,t),an(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for($=t,f=t.child;f!==null;){for(y=$=f;$!==null;){switch(p=$,S=p.child,p.tag){case 0:case 11:case 14:case 15:Ri(4,p,p.return);break;case 1:as(p,p.return);var P=p.stateNode;if(typeof P.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(D){Ve(r,n,D)}}break;case 5:as(p,p.return);break;case 22:if(p.memoizedState!==null){Up(y);continue}}S!==null?(S.return=p,$=S):Up(y)}f=f.sibling}e:for(f=null,y=t;;){if(y.tag===5){if(f===null){f=y;try{s=y.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ag("display",a))}catch(D){Ve(t,t.return,D)}}}else if(y.tag===6){if(f===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(D){Ve(t,t.return,D)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;f===y&&(f=null),y=y.return}f===y&&(f=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Jt(e,t),an(t),r&4&&Fp(t);break;case 21:break;default:Jt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xy(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ji(s,""),r.flags&=-33);var i=jp(t);Nc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=jp(t);Pc(t,l,a);break;default:throw Error(j(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CE(t,e,n){$=t,e_(t)}function e_(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||na;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ht;l=na;var h=ht;if(na=a,(ht=u)&&!h)for($=s;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?Bp(s):u!==null?(u.return=a,$=u):Bp(s);for(;i!==null;)$=i,e_(i),i=i.sibling;$=s,na=l,ht=h}bp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):bp(t)}}function bp(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||El(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ip(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ip(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var y=f.dehydrated;y!==null&&Bi(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}ht||e.flags&512&&kc(e)}catch(p){Ve(e,e.return,p)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Up(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Bp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{El(4,e)}catch(u){Ve(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ve(e,s,u)}}var i=e.return;try{kc(e)}catch(u){Ve(e,i,u)}break;case 5:var a=e.return;try{kc(e)}catch(u){Ve(e,a,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var RE=Math.ceil,Ya=Ln.ReactCurrentDispatcher,zh=Ln.ReactCurrentOwner,Ht=Ln.ReactCurrentBatchConfig,le=0,He=null,Fe=null,Je=0,Vt=0,ls=cr(0),ze=0,Ji=null,Vr=0,Tl=0,$h=0,ki=null,St=null,Wh=0,As=1/0,En=null,Xa=!1,Dc=null,Jn=null,ra=!1,qn=null,Ja=0,Pi=0,Vc=null,Ta=-1,Ia=0;function _t(){return le&6?Me():Ta!==-1?Ta:Ta=Me()}function Zn(t){return t.mode&1?le&2&&Je!==0?Je&-Je:hE.transition!==null?(Ia===0&&(Ia=Fg()),Ia):(t=pe,t!==0||(t=window.event,t=t===void 0?16:qg(t.type)),t):1}function rn(t,e,n,r){if(50<Pi)throw Pi=0,Vc=null,Error(j(185));co(t,n,r),(!(le&2)||t!==He)&&(t===He&&(!(le&2)&&(Tl|=n),ze===4&&zn(t,Je)),kt(t,r),n===1&&le===0&&!(e.mode&1)&&(As=Me()+500,_l&&hr()))}function kt(t,e){var n=t.callbackNode;hw(t,e);var r=Oa(t,t===He?Je:0);if(r===0)n!==null&&Yf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yf(n),e===1)t.tag===0?cE(zp.bind(null,t)):cy(zp.bind(null,t)),oE(function(){!(le&6)&&hr()}),n=null;else{switch(bg(r)){case 1:n=gh;break;case 4:n=Mg;break;case 16:n=La;break;case 536870912:n=jg;break;default:n=La}n=l_(n,t_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t_(t,e){if(Ta=-1,Ia=0,le&6)throw Error(j(327));var n=t.callbackNode;if(ms()&&t.callbackNode!==n)return null;var r=Oa(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Za(t,r);else{e=r;var s=le;le|=2;var i=r_();(He!==t||Je!==e)&&(En=null,As=Me()+500,xr(t,e));do try{NE();break}catch(l){n_(t,l)}while(!0);kh(),Ya.current=i,le=s,Fe!==null?e=0:(He=null,Je=0,e=ze)}if(e!==0){if(e===2&&(s=oc(t),s!==0&&(r=s,e=Lc(t,s))),e===1)throw n=Ji,xr(t,0),zn(t,r),kt(t,Me()),n;if(e===6)zn(t,r);else{if(s=t.current.alternate,!(r&30)&&!kE(s)&&(e=Za(t,r),e===2&&(i=oc(t),i!==0&&(r=i,e=Lc(t,i))),e===1))throw n=Ji,xr(t,0),zn(t,r),kt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:wr(t,St,En);break;case 3:if(zn(t,r),(r&130023424)===r&&(e=Wh+500-Me(),10<e)){if(Oa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=pc(wr.bind(null,t,St,En),e);break}wr(t,St,En);break;case 4:if(zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-nn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RE(r/1960))-r,10<r){t.timeoutHandle=pc(wr.bind(null,t,St,En),r);break}wr(t,St,En);break;case 5:wr(t,St,En);break;default:throw Error(j(329))}}}return kt(t,Me()),t.callbackNode===n?t_.bind(null,t):null}function Lc(t,e){var n=ki;return t.current.memoizedState.isDehydrated&&(xr(t,e).flags|=256),t=Za(t,e),t!==2&&(e=St,St=n,e!==null&&Oc(e)),t}function Oc(t){St===null?St=t:St.push.apply(St,t)}function kE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zn(t,e){for(e&=~$h,e&=~Tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function zp(t){if(le&6)throw Error(j(327));ms();var e=Oa(t,0);if(!(e&1))return kt(t,Me()),null;var n=Za(t,e);if(t.tag!==0&&n===2){var r=oc(t);r!==0&&(e=r,n=Lc(t,r))}if(n===1)throw n=Ji,xr(t,0),zn(t,e),kt(t,Me()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wr(t,St,En),kt(t,Me()),null}function qh(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(As=Me()+500,_l&&hr())}}function Lr(t){qn!==null&&qn.tag===0&&!(le&6)&&ms();var e=le;le|=1;var n=Ht.transition,r=pe;try{if(Ht.transition=null,pe=1,t)return t()}finally{pe=r,Ht.transition=n,le=e,!(le&6)&&hr()}}function Hh(){Vt=ls.current,Se(ls)}function xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iE(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(xh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ua();break;case 3:Is(),Se(Ct),Se(pt),Oh();break;case 5:Lh(r);break;case 4:Is();break;case 13:Se(xe);break;case 19:Se(xe);break;case 10:Ph(r.type._context);break;case 22:case 23:Hh()}n=n.return}if(He=t,Fe=t=er(t.current,null),Je=Vt=e,ze=0,Ji=null,$h=Tl=Vr=0,St=ki=null,Ir!==null){for(e=0;e<Ir.length;e++)if(n=Ir[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ir=null}return t}function n_(t,e){do{var n=Fe;try{if(kh(),va.current=Ka,Ga){for(var r=Ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ga=!1}if(Dr=0,qe=Be=Ce=null,Ci=!1,Ki=0,zh.current=null,n===null||n.return===null){ze=1,Ji=e,Fe=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=Je,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,y=f.tag;if(!(f.mode&1)&&(y===0||y===11||y===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=kp(a);if(S!==null){S.flags&=-257,Pp(S,a,l,i,e),S.mode&1&&Rp(i,h,e),e=S,u=h;var P=e.updateQueue;if(P===null){var D=new Set;D.add(u),e.updateQueue=D}else P.add(u);break e}else{if(!(e&1)){Rp(i,h,e),Qh();break e}u=Error(j(426))}}else if(Ae&&l.mode&1){var O=kp(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Pp(O,a,l,i,e),Ch(Ss(u,l));break e}}i=u=Ss(u,l),ze!==4&&(ze=2),ki===null?ki=[i]:ki.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=by(i,u,e);Tp(i,I);break e;case 1:l=u;var w=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Jn===null||!Jn.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=Uy(i,l,e);Tp(i,V);break e}}i=i.return}while(i!==null)}i_(n)}catch(F){e=F,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function r_(){var t=Ya.current;return Ya.current=Ka,t===null?Ka:t}function Qh(){(ze===0||ze===3||ze===2)&&(ze=4),He===null||!(Vr&268435455)&&!(Tl&268435455)||zn(He,Je)}function Za(t,e){var n=le;le|=2;var r=r_();(He!==t||Je!==e)&&(En=null,xr(t,e));do try{PE();break}catch(s){n_(t,s)}while(!0);if(kh(),le=n,Ya.current=r,Fe!==null)throw Error(j(261));return He=null,Je=0,ze}function PE(){for(;Fe!==null;)s_(Fe)}function NE(){for(;Fe!==null&&!nw();)s_(Fe)}function s_(t){var e=a_(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?i_(t):Fe=e,zh.current=null}function i_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SE(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Fe=null;return}}else if(n=IE(n,e,Vt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);ze===0&&(ze=5)}function wr(t,e,n){var r=pe,s=Ht.transition;try{Ht.transition=null,pe=1,DE(t,e,n,r)}finally{Ht.transition=s,pe=r}return null}function DE(t,e,n,r){do ms();while(qn!==null);if(le&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(dw(t,i),t===He&&(Fe=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ra||(ra=!0,l_(La,function(){return ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var a=pe;pe=1;var l=le;le|=4,zh.current=null,xE(t,n),Zy(n,t),Jw(dc),Ma=!!hc,dc=hc=null,t.current=n,CE(n),rw(),le=l,pe=a,Ht.transition=i}else t.current=n;if(ra&&(ra=!1,qn=t,Ja=s),i=t.pendingLanes,i===0&&(Jn=null),ow(n.stateNode),kt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xa)throw Xa=!1,t=Dc,Dc=null,t;return Ja&1&&t.tag!==0&&ms(),i=t.pendingLanes,i&1?t===Vc?Pi++:(Pi=0,Vc=t):Pi=0,hr(),null}function ms(){if(qn!==null){var t=bg(Ja),e=Ht.transition,n=pe;try{if(Ht.transition=null,pe=16>t?16:t,qn===null)var r=!1;else{if(t=qn,qn=null,Ja=0,le&6)throw Error(j(331));var s=le;for(le|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for($=h;$!==null;){var f=$;switch(f.tag){case 0:case 11:case 15:Ri(8,f,i)}var y=f.child;if(y!==null)y.return=f,$=y;else for(;$!==null;){f=$;var p=f.sibling,S=f.return;if(Yy(f),f===h){$=null;break}if(p!==null){p.return=S,$=p;break}$=S}}}var P=i.alternate;if(P!==null){var D=P.child;if(D!==null){P.child=null;do{var O=D.sibling;D.sibling=null,D=O}while(D!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ri(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,$=I;break e}$=i.return}}var w=t.current;for($=w;$!==null;){a=$;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,$=A;else e:for(a=w;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:El(9,l)}}catch(F){Ve(l,l.return,F)}if(l===a){$=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,$=V;break e}$=l.return}}if(le=s,hr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(fl,t)}catch{}r=!0}return r}finally{pe=n,Ht.transition=e}}return!1}function $p(t,e,n){e=Ss(n,e),e=by(t,e,1),t=Xn(t,e,1),e=_t(),t!==null&&(co(t,1,e),kt(t,e))}function Ve(t,e,n){if(t.tag===3)$p(t,t,n);else for(;e!==null;){if(e.tag===3){$p(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){t=Ss(n,t),t=Uy(e,t,1),e=Xn(e,t,1),t=_t(),e!==null&&(co(e,1,t),kt(e,t));break}}e=e.return}}function VE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&(ze===4||ze===3&&(Je&130023424)===Je&&500>Me()-Wh?xr(t,0):$h|=n),kt(t,e)}function o_(t,e){e===0&&(t.mode&1?(e=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):e=1);var n=_t();t=kn(t,e),t!==null&&(co(t,e,n),kt(t,n))}function LE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o_(t,n)}function OE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),o_(t,n)}var a_;a_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,TE(t,e,n);xt=!!(t.flags&131072)}else xt=!1,Ae&&e.flags&1048576&&hy(e,$a,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ea(t,e),t=e.pendingProps;var s=ws(e,pt.current);ps(e,n),s=jh(null,e,r,t,s,n);var i=Fh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,Ba(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dh(e),s.updater=wl,e.stateNode=s,s._reactInternals=e,Ec(e,r,t,n),e=Sc(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&Ah(e),yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ea(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=jE(r),t=Zt(r,t),s){case 0:e=Ic(null,e,r,t,n);break e;case 1:e=Vp(null,e,r,t,n);break e;case 11:e=Np(null,e,r,t,n);break e;case 14:e=Dp(null,e,r,Zt(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Ic(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Vp(t,e,r,s,n);case 3:e:{if(Wy(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,yy(t,e),Ha(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ss(Error(j(423)),e),e=Lp(t,e,r,n,s);break e}else if(r!==s){s=Ss(Error(j(424)),e),e=Lp(t,e,r,n,s);break e}else for(Lt=Yn(e.stateNode.containerInfo.firstChild),Mt=e,Ae=!0,tn=null,n=my(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Es(),r===s){e=Pn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return _y(e),t===null&&_c(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,fc(r,s)?a=null:i!==null&&fc(r,i)&&(e.flags|=32),$y(t,e),yt(t,e,a,n),e.child;case 6:return t===null&&_c(e),null;case 13:return qy(t,e,n);case 4:return Vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ts(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Np(t,e,r,s,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,we(Wa,r._currentValue),r._currentValue=a,i!==null)if(sn(i.value,a)){if(i.children===s.children&&!Ct.current){e=Pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=An(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),vc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(j(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),vc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ps(e,n),s=Qt(s),r=r(s),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,s=Zt(r,e.pendingProps),s=Zt(r.type,s),Dp(t,e,r,s,n);case 15:return By(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Ea(t,e),e.tag=1,Rt(r)?(t=!0,Ba(e)):t=!1,ps(e,n),Fy(e,r,s),Ec(e,r,s,n),Sc(null,e,r,!0,t,n);case 19:return Hy(t,e,n);case 22:return zy(t,e,n)}throw Error(j(156,e.tag))};function l_(t,e){return Og(t,e)}function ME(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new ME(t,e,n,r)}function Gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jE(t){if(typeof t=="function")return Gh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===ph)return 14}return 2}function er(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sa(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Gh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Jr:return Cr(n.children,s,i,e);case dh:a=8,s|=8;break;case qu:return t=qt(12,n,e,s|2),t.elementType=qu,t.lanes=i,t;case Hu:return t=qt(13,n,e,s),t.elementType=Hu,t.lanes=i,t;case Qu:return t=qt(19,n,e,s),t.elementType=Qu,t.lanes=i,t;case _g:return Il(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gg:a=10;break e;case yg:a=9;break e;case fh:a=11;break e;case ph:a=14;break e;case bn:a=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=qt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cr(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Il(t,e,n,r){return t=qt(22,t,r,e),t.elementType=_g,t.lanes=n,t.stateNode={isHidden:!1},t}function Nu(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=du(0),this.expirationTimes=du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kh(t,e,n,r,s,i,a,l,u){return t=new FE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(i),t}function bE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function u_(t){if(!t)return ir;t=t._reactInternals;e:{if(br(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Rt(n))return uy(t,n,e)}return e}function c_(t,e,n,r,s,i,a,l,u){return t=Kh(n,r,!0,t,s,i,a,l,u),t.context=u_(null),n=t.current,r=_t(),s=Zn(n),i=An(r,s),i.callback=e??null,Xn(n,i,s),t.current.lanes=s,co(t,s,r),kt(t,r),t}function Sl(t,e,n,r){var s=e.current,i=_t(),a=Zn(s);return n=u_(n),e.context===null?e.context=n:e.pendingContext=n,e=An(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xn(s,e,a),t!==null&&(rn(t,s,a,i),_a(t,s,a)),a}function el(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){Wp(t,e),(t=t.alternate)&&Wp(t,e)}function UE(){return null}var h_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}Al.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Sl(t,e,null,null)};Al.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){Sl(null,t,null,null)}),e[Rn]=null}};function Al(t){this._internalRoot=t}Al.prototype.unstable_scheduleHydration=function(t){if(t){var e=zg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bn.length&&e!==0&&e<Bn[n].priority;n++);Bn.splice(n,0,t),n===0&&Wg(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qp(){}function BE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=el(a);i.call(h)}}var a=c_(e,r,t,0,null,!1,!1,"",qp);return t._reactRootContainer=a,t[Rn]=a.current,Wi(t.nodeType===8?t.parentNode:t),Lr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=el(u);l.call(h)}}var u=Kh(t,0,!1,null,null,!1,!1,"",qp);return t._reactRootContainer=u,t[Rn]=u.current,Wi(t.nodeType===8?t.parentNode:t),Lr(function(){Sl(e,u,n,r)}),u}function Cl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=el(a);l.call(u)}}Sl(e,a,t,s)}else a=BE(n,e,t,s,r);return el(a)}Ug=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mi(e.pendingLanes);n!==0&&(yh(e,n|1),kt(e,Me()),!(le&6)&&(As=Me()+500,hr()))}break;case 13:Lr(function(){var r=kn(t,1);if(r!==null){var s=_t();rn(r,t,1,s)}}),Yh(t,1)}};_h=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var n=_t();rn(e,t,134217728,n)}Yh(t,134217728)}};Bg=function(t){if(t.tag===13){var e=Zn(t),n=kn(t,e);if(n!==null){var r=_t();rn(n,t,e,r)}Yh(t,e)}};zg=function(){return pe};$g=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};rc=function(t,e,n){switch(e){case"input":if(Yu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yl(r);if(!s)throw Error(j(90));wg(r),Yu(r,s)}}}break;case"textarea":Tg(t,n);break;case"select":e=n.value,e!=null&&cs(t,!!n.multiple,e,!1)}};kg=qh;Pg=Lr;var zE={usingClientEntryPoint:!1,Events:[fo,ns,yl,Cg,Rg,qh]},ui={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$E={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vg(t),t===null?null:t.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||UE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{fl=sa.inject($E),cn=sa}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(j(200));return bE(t,e,null,n)};Ft.createRoot=function(t,e){if(!Jh(t))throw Error(j(299));var n=!1,r="",s=h_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kh(t,1,!1,null,null,n,!1,r,s),t[Rn]=e.current,Wi(t.nodeType===8?t.parentNode:t),new Xh(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Vg(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return Lr(t)};Ft.hydrate=function(t,e,n){if(!xl(e))throw Error(j(200));return Cl(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=h_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=c_(e,null,t,1,n??null,s,!1,i,a),t[Rn]=e.current,Wi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Al(e)};Ft.render=function(t,e,n){if(!xl(e))throw Error(j(200));return Cl(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!xl(t))throw Error(j(40));return t._reactRootContainer?(Lr(function(){Cl(null,null,t,!1,function(){t._reactRootContainer=null,t[Rn]=null})}),!0):!1};Ft.unstable_batchedUpdates=qh;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xl(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Cl(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function d_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d_)}catch(t){console.error(t)}}d_(),dg.exports=Ft;var WE=dg.exports,Hp=WE;$u.createRoot=Hp.createRoot,$u.hydrateRoot=Hp.hydrateRoot;var Qp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},p_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,y=(i&3)<<4|l>>4;let p=(l&15)<<2|h>>6,S=h&63;u||(S=64,a||(p=64)),r.push(n[f],n[y],n[p],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||y==null)throw new HE;const p=i<<2|l>>4;if(r.push(p),h!==64){const S=l<<4&240|h>>2;if(r.push(S),y!==64){const P=h<<6&192|y;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QE=function(t){const e=f_(t);return p_.encodeByteArray(e,!0)},tl=function(t){return QE(t).replace(/\./g,"")},GE=function(t){try{return p_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=()=>KE().__FIREBASE_DEFAULTS__,XE=()=>{if(typeof process>"u"||typeof Qp>"u")return;const t=Qp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GE(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return YE()||XE()||JE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZE=t=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eT=t=>{const e=ZE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},m_=()=>{var t;return(t=Zh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tl(JSON.stringify(n)),tl(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sT(){var t;const e=(t=Zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iT(){return!sT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oT(){try{return typeof indexedDB=="object"}catch{return!1}}function aT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="FirebaseError";class Ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lT,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,g_.prototype.create)}}class g_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?uT(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ms(s,l,r)}}function uT(t,e){return t.replace(cT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cT=/\{\$([^}]+)}/g;function Mc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Gp(i)&&Gp(a)){if(!Mc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Gp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){return t&&t._delegate?t._delegate:t}class Zi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fT(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dT(t){return t===Er?void 0:t}function fT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const mT={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},gT=ae.INFO,yT={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},_T=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=yT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y_{constructor(e){this.name=e,this._logLevel=gT,this._logHandler=_T,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const vT=(t,e)=>e.some(n=>t instanceof n);let Kp,Yp;function wT(){return Kp||(Kp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ET(){return Yp||(Yp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const __=new WeakMap,jc=new WeakMap,v_=new WeakMap,Vu=new WeakMap,ed=new WeakMap;function TT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(tr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&__.set(n,t)}).catch(()=>{}),ed.set(e,t),e}function IT(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});jc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||v_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ST(t){Fc=t(Fc)}function AT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lu(this),e,...n);return v_.set(r,e.sort?e.sort():[e]),tr(r)}:ET().includes(t)?function(...e){return t.apply(Lu(this),e),tr(__.get(this))}:function(...e){return tr(t.apply(Lu(this),e))}}function xT(t){return typeof t=="function"?AT(t):(t instanceof IDBTransaction&&IT(t),vT(t,wT())?new Proxy(t,Fc):t)}function tr(t){if(t instanceof IDBRequest)return TT(t);if(Vu.has(t))return Vu.get(t);const e=xT(t);return e!==t&&(Vu.set(t,e),ed.set(e,t)),e}const Lu=t=>ed.get(t);function CT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=tr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(tr(a.result),u.oldVersion,u.newVersion,tr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const RT=["get","getKey","getAll","getAllKeys","count"],kT=["put","add","delete","clear"],Ou=new Map;function Xp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ou.get(e))return Ou.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||RT.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Ou.set(e,i),i}ST(t=>({...t,get:(e,n,r)=>Xp(e,n)||t.get(e,n,r),has:(e,n)=>!!Xp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bc="@firebase/app",Jp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new y_("@firebase/app"),DT="@firebase/app-compat",VT="@firebase/analytics-compat",LT="@firebase/analytics",OT="@firebase/app-check-compat",MT="@firebase/app-check",jT="@firebase/auth",FT="@firebase/auth-compat",bT="@firebase/database",UT="@firebase/data-connect",BT="@firebase/database-compat",zT="@firebase/functions",$T="@firebase/functions-compat",WT="@firebase/installations",qT="@firebase/installations-compat",HT="@firebase/messaging",QT="@firebase/messaging-compat",GT="@firebase/performance",KT="@firebase/performance-compat",YT="@firebase/remote-config",XT="@firebase/remote-config-compat",JT="@firebase/storage",ZT="@firebase/storage-compat",eI="@firebase/firestore",tI="@firebase/vertexai-preview",nI="@firebase/firestore-compat",rI="firebase",sI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc="[DEFAULT]",iI={[bc]:"fire-core",[DT]:"fire-core-compat",[LT]:"fire-analytics",[VT]:"fire-analytics-compat",[MT]:"fire-app-check",[OT]:"fire-app-check-compat",[jT]:"fire-auth",[FT]:"fire-auth-compat",[bT]:"fire-rtdb",[UT]:"fire-data-connect",[BT]:"fire-rtdb-compat",[zT]:"fire-fn",[$T]:"fire-fn-compat",[WT]:"fire-iid",[qT]:"fire-iid-compat",[HT]:"fire-fcm",[QT]:"fire-fcm-compat",[GT]:"fire-perf",[KT]:"fire-perf-compat",[YT]:"fire-rc",[XT]:"fire-rc-compat",[JT]:"fire-gcs",[ZT]:"fire-gcs-compat",[eI]:"fire-fst",[nI]:"fire-fst-compat",[tI]:"fire-vertex","fire-js":"fire-js",[rI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Map,oI=new Map,Bc=new Map;function Zp(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rl(t){const e=t.name;if(Bc.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;Bc.set(e,t);for(const n of nl.values())Zp(n,t);for(const n of oI.values())Zp(n,t);return!0}function aI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new g_("app","Firebase",lI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=sI;function w_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Uc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw nr.create("bad-app-name",{appName:String(s)});if(n||(n=m_()),!n)throw nr.create("no-options");const i=nl.get(s);if(i){if(Mc(n,i.options)&&Mc(r,i.config))return i;throw nr.create("duplicate-app",{appName:s})}const a=new pT(s);for(const u of Bc.values())a.addComponent(u);const l=new uI(n,r,a);return nl.set(s,l),l}function hI(t=Uc){const e=nl.get(t);if(!e&&t===Uc&&m_())return w_();if(!e)throw nr.create("no-app",{appName:t});return e}function gs(t,e,n){var r;let s=(r=iI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(l.join(" "));return}rl(new Zi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firebase-heartbeat-database",fI=1,eo="firebase-heartbeat-store";let Mu=null;function E_(){return Mu||(Mu=CT(dI,fI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eo)}catch(n){console.warn(n)}}}}).catch(t=>{throw nr.create("idb-open",{originalErrorMessage:t.message})})),Mu}async function pI(t){try{const n=(await E_()).transaction(eo),r=await n.objectStore(eo).get(T_(t));return await n.done,r}catch(e){if(e instanceof Ms)Nn.warn(e.message);else{const n=nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function em(t,e){try{const r=(await E_()).transaction(eo,"readwrite");await r.objectStore(eo).put(e,T_(t)),await r.done}catch(n){if(n instanceof Ms)Nn.warn(n.message);else{const r=nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function T_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=1024,gI=30*24*60*60*1e3;class yI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=gI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tm(),{heartbeatsToSend:r,unsentEntries:s}=_I(this._heartbeatsCache.heartbeats),i=tl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Nn.warn(n),""}}}function tm(){return new Date().toISOString().substring(0,10)}function _I(t,e=mI){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),nm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),nm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oT()?aT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return em(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return em(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nm(t){return tl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){rl(new Zi("platform-logger",e=>new PT(e),"PRIVATE")),rl(new Zi("heartbeat",e=>new yI(e),"PRIVATE")),gs(bc,Jp,t),gs(bc,Jp,"esm2017"),gs("fire-js","")}wI("");var EI="firebase",TI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(EI,TI,"app");var rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,I_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function v(){}v.prototype=g.prototype,_.D=g.prototype,_.prototype=new v,_.prototype.constructor=_,_.C=function(T,x,R){for(var E=Array(arguments.length-2),K=2;K<arguments.length;K++)E[K-2]=arguments[K];return g.prototype[x].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,g,v){v||(v=0);var T=Array(16);if(typeof g=="string")for(var x=0;16>x;++x)T[x]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(x=0;16>x;++x)T[x]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=_.g[0],v=_.g[1],x=_.g[2];var R=_.g[3],E=g+(R^v&(x^R))+T[0]+3614090360&4294967295;g=v+(E<<7&4294967295|E>>>25),E=R+(x^g&(v^x))+T[1]+3905402710&4294967295,R=g+(E<<12&4294967295|E>>>20),E=x+(v^R&(g^v))+T[2]+606105819&4294967295,x=R+(E<<17&4294967295|E>>>15),E=v+(g^x&(R^g))+T[3]+3250441966&4294967295,v=x+(E<<22&4294967295|E>>>10),E=g+(R^v&(x^R))+T[4]+4118548399&4294967295,g=v+(E<<7&4294967295|E>>>25),E=R+(x^g&(v^x))+T[5]+1200080426&4294967295,R=g+(E<<12&4294967295|E>>>20),E=x+(v^R&(g^v))+T[6]+2821735955&4294967295,x=R+(E<<17&4294967295|E>>>15),E=v+(g^x&(R^g))+T[7]+4249261313&4294967295,v=x+(E<<22&4294967295|E>>>10),E=g+(R^v&(x^R))+T[8]+1770035416&4294967295,g=v+(E<<7&4294967295|E>>>25),E=R+(x^g&(v^x))+T[9]+2336552879&4294967295,R=g+(E<<12&4294967295|E>>>20),E=x+(v^R&(g^v))+T[10]+4294925233&4294967295,x=R+(E<<17&4294967295|E>>>15),E=v+(g^x&(R^g))+T[11]+2304563134&4294967295,v=x+(E<<22&4294967295|E>>>10),E=g+(R^v&(x^R))+T[12]+1804603682&4294967295,g=v+(E<<7&4294967295|E>>>25),E=R+(x^g&(v^x))+T[13]+4254626195&4294967295,R=g+(E<<12&4294967295|E>>>20),E=x+(v^R&(g^v))+T[14]+2792965006&4294967295,x=R+(E<<17&4294967295|E>>>15),E=v+(g^x&(R^g))+T[15]+1236535329&4294967295,v=x+(E<<22&4294967295|E>>>10),E=g+(x^R&(v^x))+T[1]+4129170786&4294967295,g=v+(E<<5&4294967295|E>>>27),E=R+(v^x&(g^v))+T[6]+3225465664&4294967295,R=g+(E<<9&4294967295|E>>>23),E=x+(g^v&(R^g))+T[11]+643717713&4294967295,x=R+(E<<14&4294967295|E>>>18),E=v+(R^g&(x^R))+T[0]+3921069994&4294967295,v=x+(E<<20&4294967295|E>>>12),E=g+(x^R&(v^x))+T[5]+3593408605&4294967295,g=v+(E<<5&4294967295|E>>>27),E=R+(v^x&(g^v))+T[10]+38016083&4294967295,R=g+(E<<9&4294967295|E>>>23),E=x+(g^v&(R^g))+T[15]+3634488961&4294967295,x=R+(E<<14&4294967295|E>>>18),E=v+(R^g&(x^R))+T[4]+3889429448&4294967295,v=x+(E<<20&4294967295|E>>>12),E=g+(x^R&(v^x))+T[9]+568446438&4294967295,g=v+(E<<5&4294967295|E>>>27),E=R+(v^x&(g^v))+T[14]+3275163606&4294967295,R=g+(E<<9&4294967295|E>>>23),E=x+(g^v&(R^g))+T[3]+4107603335&4294967295,x=R+(E<<14&4294967295|E>>>18),E=v+(R^g&(x^R))+T[8]+1163531501&4294967295,v=x+(E<<20&4294967295|E>>>12),E=g+(x^R&(v^x))+T[13]+2850285829&4294967295,g=v+(E<<5&4294967295|E>>>27),E=R+(v^x&(g^v))+T[2]+4243563512&4294967295,R=g+(E<<9&4294967295|E>>>23),E=x+(g^v&(R^g))+T[7]+1735328473&4294967295,x=R+(E<<14&4294967295|E>>>18),E=v+(R^g&(x^R))+T[12]+2368359562&4294967295,v=x+(E<<20&4294967295|E>>>12),E=g+(v^x^R)+T[5]+4294588738&4294967295,g=v+(E<<4&4294967295|E>>>28),E=R+(g^v^x)+T[8]+2272392833&4294967295,R=g+(E<<11&4294967295|E>>>21),E=x+(R^g^v)+T[11]+1839030562&4294967295,x=R+(E<<16&4294967295|E>>>16),E=v+(x^R^g)+T[14]+4259657740&4294967295,v=x+(E<<23&4294967295|E>>>9),E=g+(v^x^R)+T[1]+2763975236&4294967295,g=v+(E<<4&4294967295|E>>>28),E=R+(g^v^x)+T[4]+1272893353&4294967295,R=g+(E<<11&4294967295|E>>>21),E=x+(R^g^v)+T[7]+4139469664&4294967295,x=R+(E<<16&4294967295|E>>>16),E=v+(x^R^g)+T[10]+3200236656&4294967295,v=x+(E<<23&4294967295|E>>>9),E=g+(v^x^R)+T[13]+681279174&4294967295,g=v+(E<<4&4294967295|E>>>28),E=R+(g^v^x)+T[0]+3936430074&4294967295,R=g+(E<<11&4294967295|E>>>21),E=x+(R^g^v)+T[3]+3572445317&4294967295,x=R+(E<<16&4294967295|E>>>16),E=v+(x^R^g)+T[6]+76029189&4294967295,v=x+(E<<23&4294967295|E>>>9),E=g+(v^x^R)+T[9]+3654602809&4294967295,g=v+(E<<4&4294967295|E>>>28),E=R+(g^v^x)+T[12]+3873151461&4294967295,R=g+(E<<11&4294967295|E>>>21),E=x+(R^g^v)+T[15]+530742520&4294967295,x=R+(E<<16&4294967295|E>>>16),E=v+(x^R^g)+T[2]+3299628645&4294967295,v=x+(E<<23&4294967295|E>>>9),E=g+(x^(v|~R))+T[0]+4096336452&4294967295,g=v+(E<<6&4294967295|E>>>26),E=R+(v^(g|~x))+T[7]+1126891415&4294967295,R=g+(E<<10&4294967295|E>>>22),E=x+(g^(R|~v))+T[14]+2878612391&4294967295,x=R+(E<<15&4294967295|E>>>17),E=v+(R^(x|~g))+T[5]+4237533241&4294967295,v=x+(E<<21&4294967295|E>>>11),E=g+(x^(v|~R))+T[12]+1700485571&4294967295,g=v+(E<<6&4294967295|E>>>26),E=R+(v^(g|~x))+T[3]+2399980690&4294967295,R=g+(E<<10&4294967295|E>>>22),E=x+(g^(R|~v))+T[10]+4293915773&4294967295,x=R+(E<<15&4294967295|E>>>17),E=v+(R^(x|~g))+T[1]+2240044497&4294967295,v=x+(E<<21&4294967295|E>>>11),E=g+(x^(v|~R))+T[8]+1873313359&4294967295,g=v+(E<<6&4294967295|E>>>26),E=R+(v^(g|~x))+T[15]+4264355552&4294967295,R=g+(E<<10&4294967295|E>>>22),E=x+(g^(R|~v))+T[6]+2734768916&4294967295,x=R+(E<<15&4294967295|E>>>17),E=v+(R^(x|~g))+T[13]+1309151649&4294967295,v=x+(E<<21&4294967295|E>>>11),E=g+(x^(v|~R))+T[4]+4149444226&4294967295,g=v+(E<<6&4294967295|E>>>26),E=R+(v^(g|~x))+T[11]+3174756917&4294967295,R=g+(E<<10&4294967295|E>>>22),E=x+(g^(R|~v))+T[2]+718787259&4294967295,x=R+(E<<15&4294967295|E>>>17),E=v+(R^(x|~g))+T[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(x+(E<<21&4294967295|E>>>11))&4294967295,_.g[2]=_.g[2]+x&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.u=function(_,g){g===void 0&&(g=_.length);for(var v=g-this.blockSize,T=this.B,x=this.h,R=0;R<g;){if(x==0)for(;R<=v;)s(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<g;)if(T[x++]=_.charCodeAt(R++),x==this.blockSize){s(this,T),x=0;break}}else for(;R<g;)if(T[x++]=_[R++],x==this.blockSize){s(this,T),x=0;break}}this.h=x,this.o+=g},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;var v=8*this.o;for(g=_.length-8;g<_.length;++g)_[g]=v&255,v/=256;for(this.u(_),_=Array(16),g=v=0;4>g;++g)for(var T=0;32>T;T+=8)_[v++]=this.g[g]>>>T&255;return _};function i(_,g){var v=l;return Object.prototype.hasOwnProperty.call(v,_)?v[_]:v[_]=g(_)}function a(_,g){this.h=g;for(var v=[],T=!0,x=_.length-1;0<=x;x--){var R=_[x]|0;T&&R==g||(v[x]=R,T=!1)}this.g=v}var l={};function u(_){return-128<=_&&128>_?i(_,function(g){return new a([g|0],0>g?-1:0)}):new a([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return y;if(0>_)return O(h(-_));for(var g=[],v=1,T=0;_>=v;T++)g[T]=_/v|0,v*=4294967296;return new a(g,0)}function f(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return O(f(_.substring(1),g));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(g,8)),T=y,x=0;x<_.length;x+=8){var R=Math.min(8,_.length-x),E=parseInt(_.substring(x,x+R),g);8>R?(R=h(Math.pow(g,R)),T=T.j(R).add(h(E))):(T=T.j(v),T=T.add(h(E)))}return T}var y=u(0),p=u(1),S=u(16777216);t=a.prototype,t.m=function(){if(D(this))return-O(this).m();for(var _=0,g=1,v=0;v<this.g.length;v++){var T=this.i(v);_+=(0<=T?T:4294967296+T)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(P(this))return"0";if(D(this))return"-"+O(this).toString(_);for(var g=h(Math.pow(_,6)),v=this,T="";;){var x=V(v,g).g;v=I(v,x.j(g));var R=((0<v.g.length?v.g[0]:v.h)>>>0).toString(_);if(v=x,P(v))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function P(_){if(_.h!=0)return!1;for(var g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function D(_){return _.h==-1}t.l=function(_){return _=I(this,_),D(_)?-1:P(_)?0:1};function O(_){for(var g=_.g.length,v=[],T=0;T<g;T++)v[T]=~_.g[T];return new a(v,~_.h).add(p)}t.abs=function(){return D(this)?O(this):this},t.add=function(_){for(var g=Math.max(this.g.length,_.g.length),v=[],T=0,x=0;x<=g;x++){var R=T+(this.i(x)&65535)+(_.i(x)&65535),E=(R>>>16)+(this.i(x)>>>16)+(_.i(x)>>>16);T=E>>>16,R&=65535,E&=65535,v[x]=E<<16|R}return new a(v,v[v.length-1]&-2147483648?-1:0)};function I(_,g){return _.add(O(g))}t.j=function(_){if(P(this)||P(_))return y;if(D(this))return D(_)?O(this).j(O(_)):O(O(this).j(_));if(D(_))return O(this.j(O(_)));if(0>this.l(S)&&0>_.l(S))return h(this.m()*_.m());for(var g=this.g.length+_.g.length,v=[],T=0;T<2*g;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(var x=0;x<_.g.length;x++){var R=this.i(T)>>>16,E=this.i(T)&65535,K=_.i(x)>>>16,J=_.i(x)&65535;v[2*T+2*x]+=E*J,w(v,2*T+2*x),v[2*T+2*x+1]+=R*J,w(v,2*T+2*x+1),v[2*T+2*x+1]+=E*K,w(v,2*T+2*x+1),v[2*T+2*x+2]+=R*K,w(v,2*T+2*x+2)}for(T=0;T<g;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=g;T<2*g;T++)v[T]=0;return new a(v,0)};function w(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function A(_,g){this.g=_,this.h=g}function V(_,g){if(P(g))throw Error("division by zero");if(P(_))return new A(y,y);if(D(_))return g=V(O(_),g),new A(O(g.g),O(g.h));if(D(g))return g=V(_,O(g)),new A(O(g.g),g.h);if(30<_.g.length){if(D(_)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var v=p,T=g;0>=T.l(_);)v=F(v),T=F(T);var x=U(v,1),R=U(T,1);for(T=U(T,2),v=U(v,2);!P(T);){var E=R.add(T);0>=E.l(_)&&(x=x.add(v),R=E),T=U(T,1),v=U(v,1)}return g=I(_,x.j(g)),new A(x,g)}for(x=y;0<=_.l(g);){for(v=Math.max(1,Math.floor(_.m()/g.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=h(v),E=R.j(g);D(E)||0<E.l(_);)v-=T,R=h(v),E=R.j(g);P(R)&&(R=p),x=x.add(R),_=I(_,E)}return new A(x,_)}t.A=function(_){return V(this,_).h},t.and=function(_){for(var g=Math.max(this.g.length,_.g.length),v=[],T=0;T<g;T++)v[T]=this.i(T)&_.i(T);return new a(v,this.h&_.h)},t.or=function(_){for(var g=Math.max(this.g.length,_.g.length),v=[],T=0;T<g;T++)v[T]=this.i(T)|_.i(T);return new a(v,this.h|_.h)},t.xor=function(_){for(var g=Math.max(this.g.length,_.g.length),v=[],T=0;T<g;T++)v[T]=this.i(T)^_.i(T);return new a(v,this.h^_.h)};function F(_){for(var g=_.g.length+1,v=[],T=0;T<g;T++)v[T]=_.i(T)<<1|_.i(T-1)>>>31;return new a(v,_.h)}function U(_,g){var v=g>>5;g%=32;for(var T=_.g.length-v,x=[],R=0;R<T;R++)x[R]=0<g?_.i(R+v)>>>g|_.i(R+v+1)<<32-g:_.i(R+v);return new a(x,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,I_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Rr=a}).apply(typeof rm<"u"?rm:typeof self<"u"?self:typeof window<"u"?window:{});var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S_,yi,A_,Aa,zc,x_,C_,R_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ia=="object"&&ia];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var k=o[m];if(!(k in d))break e;d=d[k]}o=o[o.length-1],m=d[o],c=c(m),c!=m&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var d=0,m=!1,k={next:function(){if(!m&&d<o.length){var N=d++;return{value:c(N,o[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function f(o,c,d){return o.call.apply(o.bind,arguments)}function y(o,c,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,m),o.apply(c,k)}}return function(){return o.apply(c,arguments)}}function p(o,c,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:y,p.apply(null,arguments)}function S(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function P(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,k,N){for(var b=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)b[_e-2]=arguments[_e];return c.prototype[k].apply(m,b)}}function D(o){const c=o.length;if(0<c){const d=Array(c);for(let m=0;m<c;m++)d[m]=o[m];return d}return[]}function O(o,c){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(u(m)){const k=o.length||0,N=m.length||0;o.length=k+N;for(let b=0;b<N;b++)o[k+b]=m[b]}else o.push(m)}}class I{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(o){return/^[\s\xa0]*$/.test(o)}function A(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function V(o){return V[" "](o),o}V[" "]=function(){};var F=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function U(o,c,d){for(const m in o)c.call(d,o[m],m,o)}function _(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function g(o){const c={};for(const d in o)c[d]=o[d];return c}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,c){let d,m;for(let k=1;k<arguments.length;k++){m=arguments[k];for(d in m)o[d]=m[d];for(let N=0;N<v.length;N++)d=v[N],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function x(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function R(o){l.setTimeout(()=>{throw o},0)}function E(){var o=X;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class K{constructor(){this.h=this.g=null}add(c,d){const m=J.get();m.set(c,d),this.h?this.h.next=m:this.g=m,this.h=m}}var J=new I(()=>new Pe,o=>o.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,B=!1,X=new K,Z=()=>{const o=l.Promise.resolve(void 0);nt=()=>{o.then(ge)}};var ge=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(d){R(d)}var c=J;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}B=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function Q(o,c){if(W.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(F){e:{try{V(c.nodeName);var k=!0;break e}catch{}k=!1}k||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Y[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Q.aa.h.call(this)}}P(Q,W);var Y={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),rt=0;function ue(o,c,d,m,k){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!m,this.ha=k,this.key=++rt,this.da=this.fa=!1}function Ne(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ve(o){this.src=o,this.g={},this.h=0}ve.prototype.add=function(o,c,d,m,k){var N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);var b=Pt(o,c,m,k);return-1<b?(c=o[b],d||(c.fa=!1)):(c=new ue(c,this.src,N,!!m,k),c.fa=d,o.push(c)),c};function Qe(o,c){var d=c.type;if(d in o.g){var m=o.g[d],k=Array.prototype.indexOf.call(m,c,void 0),N;(N=0<=k)&&Array.prototype.splice.call(m,k,1),N&&(Ne(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Pt(o,c,d,m){for(var k=0;k<o.length;++k){var N=o[k];if(!N.da&&N.listener==c&&N.capture==!!d&&N.ha==m)return k}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),gn={};function It(o,c,d,m,k){if(Array.isArray(c)){for(var N=0;N<c.length;N++)It(o,c[N],d,m,k);return null}return d=Bd(d),o&&o[fe]?o.K(c,d,h(m)?!!m.capture:!1,k):Ut(o,c,d,!1,m,k)}function Ut(o,c,d,m,k,N){if(!c)throw Error("Invalid event type");var b=h(k)?!!k.capture:!!k,_e=Yt(o);if(_e||(o[ye]=_e=new ve(o)),d=_e.add(c,d,m,b,N),d.proxy)return d;if(m=Bt(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)H||(k=b),k===void 0&&(k=!1),o.addEventListener(c.toString(),m,k);else if(o.attachEvent)o.attachEvent(zr(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Bt(){function o(d){return c.call(o.src,o.listener,d)}const c=yn;return o}function Ue(o,c,d,m,k){if(Array.isArray(c))for(var N=0;N<c.length;N++)Ue(o,c[N],d,m,k);else m=h(m)?!!m.capture:!!m,d=Bd(d),o&&o[fe]?(o=o.i,c=String(c).toString(),c in o.g&&(N=o.g[c],d=Pt(N,d,m,k),-1<d&&(Ne(N[d]),Array.prototype.splice.call(N,d,1),N.length==0&&(delete o.g[c],o.h--)))):o&&(o=Yt(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Pt(c,d,m,k)),(d=-1<o?c[o]:null)&&Nt(d))}function Nt(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[fe])Qe(c.i,o);else{var d=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(d,m,o.capture):c.detachEvent?c.detachEvent(zr(d),m):c.addListener&&c.removeListener&&c.removeListener(m),(d=Yt(c))?(Qe(d,o),d.h==0&&(d.src=null,c[ye]=null)):Ne(o)}}}function zr(o){return o in gn?gn[o]:gn[o]="on"+o}function yn(o,c){if(o.da)o=!0;else{c=new Q(c,this);var d=o.listener,m=o.ha||o.src;o.fa&&Nt(o),o=d.call(m,c)}return o}function Yt(o){return o=o[ye],o instanceof ve?o:null}var zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bd(o){return typeof o=="function"?o:(o[zs]||(o[zs]=function(c){return o.handleEvent(c)}),o[zs])}function st(){de.call(this),this.i=new ve(this),this.M=this,this.F=null}P(st,de),st.prototype[fe]=!0,st.prototype.removeEventListener=function(o,c,d,m){Ue(this,o,c,d,m)};function mt(o,c){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new W(c,o);else if(c instanceof W)c.target=c.target||o;else{var k=c;c=new W(m,o),T(c,k)}if(k=!0,d)for(var N=d.length-1;0<=N;N--){var b=c.g=d[N];k=xo(b,m,!0,c)&&k}if(b=c.g=o,k=xo(b,m,!0,c)&&k,k=xo(b,m,!1,c)&&k,d)for(N=0;N<d.length;N++)b=c.g=d[N],k=xo(b,m,!1,c)&&k}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],m=0;m<d.length;m++)Ne(d[m]);delete o.g[c],o.h--}}this.F=null},st.prototype.K=function(o,c,d,m){return this.i.add(String(o),c,!1,d,m)},st.prototype.L=function(o,c,d,m){return this.i.add(String(o),c,!0,d,m)};function xo(o,c,d,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var k=!0,N=0;N<c.length;++N){var b=c[N];if(b&&!b.da&&b.capture==d){var _e=b.listener,Ge=b.ha||b.src;b.fa&&Qe(o.i,b),k=_e.call(Ge,m)!==!1&&k}}return k&&!m.defaultPrevented}function zd(o,c,d){if(typeof o=="function")d&&(o=p(o,d));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function $d(o){o.g=zd(()=>{o.g=null,o.i&&(o.i=!1,$d(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class qv extends de{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:$d(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(o){de.call(this),this.h=o,this.g={}}P($s,de);var Wd=[];function qd(o){U(o.g,function(c,d){this.g.hasOwnProperty(d)&&Nt(c)},o),o.g={}}$s.prototype.N=function(){$s.aa.N.call(this),qd(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ql=l.JSON.stringify,Hv=l.JSON.parse,Qv=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Hl(){}Hl.prototype.h=null;function Hd(o){return o.h||(o.h=o.i())}function Qd(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ql(){W.call(this,"d")}P(Ql,W);function Gl(){W.call(this,"c")}P(Gl,W);var pr={},Gd=null;function Co(){return Gd=Gd||new st}pr.La="serverreachability";function Kd(o){W.call(this,pr.La,o)}P(Kd,W);function qs(o){const c=Co();mt(c,new Kd(c))}pr.STAT_EVENT="statevent";function Yd(o,c){W.call(this,pr.STAT_EVENT,o),this.stat=c}P(Yd,W);function gt(o){const c=Co();mt(c,new Yd(c,o))}pr.Ma="timingevent";function Xd(o,c){W.call(this,pr.Ma,o),this.size=c}P(Xd,W);function Hs(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Qs(){this.g=!0}Qs.prototype.xa=function(){this.g=!1};function Gv(o,c,d,m,k,N){o.info(function(){if(o.g)if(N)for(var b="",_e=N.split("&"),Ge=0;Ge<_e.length;Ge++){var ce=_e[Ge].split("=");if(1<ce.length){var it=ce[0];ce=ce[1];var ot=it.split("_");b=2<=ot.length&&ot[1]=="type"?b+(it+"="+ce+"&"):b+(it+"=redacted&")}}else b=null;else b=N;return"XMLHTTP REQ ("+m+") [attempt "+k+"]: "+c+`
`+d+`
`+b})}function Kv(o,c,d,m,k,N,b){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+k+"]: "+c+`
`+d+`
`+N+" "+b})}function $r(o,c,d,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Xv(o,d)+(m?" "+m:"")})}function Yv(o,c){o.info(function(){return"TIMEOUT: "+c})}Qs.prototype.info=function(){};function Xv(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var k=m[1];if(Array.isArray(k)&&!(1>k.length)){var N=k[0];if(N!="noop"&&N!="stop"&&N!="close")for(var b=1;b<k.length;b++)k[b]=""}}}}return ql(d)}catch{return c}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kl;function ko(){}P(ko,Hl),ko.prototype.g=function(){return new XMLHttpRequest},ko.prototype.i=function(){return{}},Kl=new ko;function On(o,c,d,m){this.j=o,this.i=c,this.l=d,this.R=m||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zd}function Zd(){this.i=null,this.g="",this.h=!1}var ef={},Yl={};function Xl(o,c,d){o.L=1,o.v=Vo(_n(c)),o.m=d,o.P=!0,tf(o,null)}function tf(o,c){o.F=Date.now(),Po(o),o.A=_n(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),gf(d.i,"t",m),o.C=0,d=o.j.J,o.h=new Zd,o.g=Lf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new qv(p(o.Y,o,o.g),o.O)),c=o.U,d=o.g,m=o.ca;var k="readystatechange";Array.isArray(k)||(k&&(Wd[0]=k.toString()),k=Wd);for(var N=0;N<k.length;N++){var b=It(d,k[N],m||c.handleEvent,!1,c.h||c);if(!b)break;c.g[b.key]=b}c=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),qs(),Gv(o.i,o.u,o.A,o.l,o.R,o.m)}On.prototype.ca=function(o){o=o.target;const c=this.M;c&&vn(o)==3?c.j():this.Y(o)},On.prototype.Y=function(o){try{if(o==this.g)e:{const ot=vn(this.g);var c=this.g.Ba();const Hr=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||If(this.g)))){this.J||ot!=4||c==7||(c==8||0>=Hr?qs(3):qs(2)),Jl(this);var d=this.g.Z();this.X=d;t:if(nf(this)){var m=If(this.g);o="";var k=m.length,N=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),Gs(this);var b="";break t}this.h.i=new l.TextDecoder}for(c=0;c<k;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(N&&c==k-1)});m.length=0,this.h.g+=o,this.C=0,b=this.h.g}else b=this.g.oa();if(this.o=d==200,Kv(this.i,this.u,this.A,this.l,this.R,ot,d),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,Ge=this.g;if((_e=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(_e)){var ce=_e;break t}}ce=null}if(d=ce)$r(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zl(this,d);else{this.o=!1,this.s=3,gt(12),mr(this),Gs(this);break e}}if(this.P){d=!0;let Xt;for(;!this.J&&this.C<b.length;)if(Xt=Jv(this,b),Xt==Yl){ot==4&&(this.s=4,gt(14),d=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==ef){this.s=4,gt(15),$r(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else $r(this.i,this.l,Xt,null),Zl(this,Xt);if(nf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||b.length!=0||this.h.h||(this.s=1,gt(16),d=!1),this.o=this.o&&d,!d)$r(this.i,this.l,b,"[Invalid Chunked Response]"),mr(this),Gs(this);else if(0<b.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),iu(it),it.M=!0,gt(11))}}else $r(this.i,this.l,b,null),Zl(this,b);ot==4&&mr(this),this.o&&!this.J&&(ot==4?Pf(this.j,this):(this.o=!1,Po(this)))}else m0(this.g),d==400&&0<b.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),mr(this),Gs(this)}}}catch{}finally{}};function nf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Jv(o,c){var d=o.C,m=c.indexOf(`
`,d);return m==-1?Yl:(d=Number(c.substring(d,m)),isNaN(d)?ef:(m+=1,m+d>c.length?Yl:(c=c.slice(m,m+d),o.C=m+d,c)))}On.prototype.cancel=function(){this.J=!0,mr(this)};function Po(o){o.S=Date.now()+o.I,rf(o,o.I)}function rf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Hs(p(o.ba,o),c)}function Jl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}On.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Yv(this.i,this.A),this.L!=2&&(qs(),gt(17)),mr(this),this.s=2,Gs(this)):rf(this,this.S-o)};function Gs(o){o.j.G==0||o.J||Pf(o.j,o)}function mr(o){Jl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,qd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Zl(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||eu(d.h,o))){if(!o.K&&eu(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var k=m;if(k[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)bo(d),jo(d);else break e;su(d),gt(18)}}else d.za=k[1],0<d.za-d.T&&37500>k[2]&&d.F&&d.v==0&&!d.C&&(d.C=Hs(p(d.Za,d),6e3));if(1>=af(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else yr(d,11)}else if((o.K||d.g==o)&&bo(d),!w(c))for(k=d.Da.g.parse(c),c=0;c<k.length;c++){let ce=k[c];if(d.T=ce[0],ce=ce[1],d.G==2)if(ce[0]=="c"){d.K=ce[1],d.ia=ce[2];const it=ce[3];it!=null&&(d.la=it,d.j.info("VER="+d.la));const ot=ce[4];ot!=null&&(d.Aa=ot,d.j.info("SVER="+d.Aa));const Hr=ce[5];Hr!=null&&typeof Hr=="number"&&0<Hr&&(m=1.5*Hr,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Xt=o.g;if(Xt){const Bo=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var N=m.h;N.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(tu(N,N.h),N.h=null))}if(m.D){const ou=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;ou&&(m.ya=ou,Ee(m.I,m.D,ou))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var b=o;if(m.qa=Vf(m,m.J?m.ia:null,m.W),b.K){lf(m.h,b);var _e=b,Ge=m.L;Ge&&(_e.I=Ge),_e.B&&(Jl(_e),Po(_e)),m.g=b}else Rf(m);0<d.i.length&&Fo(d)}else ce[0]!="stop"&&ce[0]!="close"||yr(d,7);else d.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?yr(d,7):ru(d):ce[0]!="noop"&&d.l&&d.l.ta(ce),d.v=0)}}qs(4)}catch{}}var Zv=class{constructor(o,c){this.g=o,this.map=c}};function sf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function of(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function af(o){return o.h?1:o.g?o.g.size:0}function eu(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function tu(o,c){o.g?o.g.add(c):o.h=c}function lf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}sf.prototype.cancel=function(){if(this.i=uf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function uf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return D(o.i)}function e0(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,m=0;m<d;m++)c.push(o[m]);return c}c=[],d=0;for(m in o)c[d++]=o[m];return c}function t0(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const m in o)c[d++]=m;return c}}}function cf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=t0(o),m=e0(o),k=m.length,N=0;N<k;N++)c.call(void 0,m[N],d&&d[N],o)}var hf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n0(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),k=null;if(0<=m){var N=o[d].substring(0,m);k=o[d].substring(m+1)}else N=o[d];c(N,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function gr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof gr){this.h=o.h,No(this,o.j),this.o=o.o,this.g=o.g,Do(this,o.s),this.l=o.l;var c=o.i,d=new Xs;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),df(this,d),this.m=o.m}else o&&(c=String(o).match(hf))?(this.h=!1,No(this,c[1]||"",!0),this.o=Ks(c[2]||""),this.g=Ks(c[3]||"",!0),Do(this,c[4]),this.l=Ks(c[5]||"",!0),df(this,c[6]||"",!0),this.m=Ks(c[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}gr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ys(c,ff,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ys(c,ff,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Ys(d,d.charAt(0)=="/"?i0:s0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Ys(d,a0)),o.join("")};function _n(o){return new gr(o)}function No(o,c,d){o.j=d?Ks(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Do(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function df(o,c,d){c instanceof Xs?(o.i=c,l0(o.i,o.h)):(d||(c=Ys(c,o0)),o.i=new Xs(c,o.h))}function Ee(o,c,d){o.i.set(c,d)}function Vo(o){return Ee(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ks(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ys(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,r0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function r0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ff=/[#\/\?@]/g,s0=/[#\?:]/g,i0=/[#\?]/g,o0=/[#\?@]/g,a0=/#/g;function Xs(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Mn(o){o.g||(o.g=new Map,o.h=0,o.i&&n0(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Xs.prototype,t.add=function(o,c){Mn(this),this.i=null,o=Wr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function pf(o,c){Mn(o),c=Wr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function mf(o,c){return Mn(o),c=Wr(o,c),o.g.has(c)}t.forEach=function(o,c){Mn(this),this.g.forEach(function(d,m){d.forEach(function(k){o.call(c,k,m,this)},this)},this)},t.na=function(){Mn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let m=0;m<c.length;m++){const k=o[m];for(let N=0;N<k.length;N++)d.push(c[m])}return d},t.V=function(o){Mn(this);let c=[];if(typeof o=="string")mf(this,o)&&(c=c.concat(this.g.get(Wr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return Mn(this),this.i=null,o=Wr(this,o),mf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function gf(o,c,d){pf(o,c),0<d.length&&(o.i=null,o.g.set(Wr(o,c),D(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var m=c[d];const N=encodeURIComponent(String(m)),b=this.V(m);for(m=0;m<b.length;m++){var k=N;b[m]!==""&&(k+="="+encodeURIComponent(String(b[m]))),o.push(k)}}return this.i=o.join("&")};function Wr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function l0(o,c){c&&!o.j&&(Mn(o),o.i=null,o.g.forEach(function(d,m){var k=m.toLowerCase();m!=k&&(pf(this,m),gf(this,k,d))},o)),o.j=c}function u0(o,c){const d=new Qs;if(l.Image){const m=new Image;m.onload=S(jn,d,"TestLoadImage: loaded",!0,c,m),m.onerror=S(jn,d,"TestLoadImage: error",!1,c,m),m.onabort=S(jn,d,"TestLoadImage: abort",!1,c,m),m.ontimeout=S(jn,d,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function c0(o,c){const d=new Qs,m=new AbortController,k=setTimeout(()=>{m.abort(),jn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(N=>{clearTimeout(k),N.ok?jn(d,"TestPingServer: ok",!0,c):jn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),jn(d,"TestPingServer: error",!1,c)})}function jn(o,c,d,m,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),m(d)}catch{}}function h0(){this.g=new Qv}function d0(o,c,d){const m=d||"";try{cf(o,function(k,N){let b=k;h(k)&&(b=ql(k)),c.push(m+N+"="+encodeURIComponent(b))})}catch(k){throw c.push(m+"type="+encodeURIComponent("_badmap")),k}}function Lo(o){this.l=o.Ub||null,this.j=o.eb||!1}P(Lo,Hl),Lo.prototype.g=function(){return new Oo(this.l,this.j)},Lo.prototype.i=function(o){return function(){return o}}({});function Oo(o,c){st.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Oo,st),t=Oo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Zs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function yf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Js(this):Zs(this),this.readyState==3&&yf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Js(this))},t.Qa=function(o){this.g&&(this.response=o,Js(this))},t.ga=function(){this.g&&Js(this)};function Js(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Zs(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Zs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function _f(o){let c="";return U(o,function(d,m){c+=m,c+=":",c+=d,c+=`\r
`}),c}function nu(o,c,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=_f(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Ee(o,c,d))}function De(o){st.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(De,st);var f0=/^https?$/i,p0=["POST","PUT"];t=De.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kl.g(),this.v=this.o?Hd(this.o):Hd(Kl),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(N){vf(this,N);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var k in m)d.set(k,m[k]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const N of m.keys())d.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),k=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(p0,c,void 0))||m||k||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,b]of d)this.g.setRequestHeader(N,b);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tf(this),this.u=!0,this.g.send(o),this.u=!1}catch(N){vf(this,N)}};function vf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,wf(o),Mo(o)}function wf(o){o.A||(o.A=!0,mt(o,"complete"),mt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,mt(this,"complete"),mt(this,"abort"),Mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ef(this):this.bb())},t.bb=function(){Ef(this)};function Ef(o){if(o.h&&typeof a<"u"&&(!o.v[1]||vn(o)!=4||o.Z()!=2)){if(o.u&&vn(o)==4)zd(o.Ea,0,o);else if(mt(o,"readystatechange"),vn(o)==4){o.h=!1;try{const b=o.Z();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var m;if(m=b===0){var k=String(o.D).match(hf)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),m=!f0.test(k?k.toLowerCase():"")}d=m}if(d)mt(o,"complete"),mt(o,"success");else{o.m=6;try{var N=2<vn(o)?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.Z()+"]",wf(o)}}finally{Mo(o)}}}}function Mo(o,c){if(o.g){Tf(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||mt(o,"ready");try{d.onreadystatechange=m}catch{}}}function Tf(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function vn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Hv(c)}};function If(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function m0(o){const c={};o=(o.g&&2<=vn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(w(o[m]))continue;var d=x(o[m]);const k=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=c[k]||[];c[k]=N,N.push(d)}_(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Sf(o){this.Aa=0,this.i=[],this.j=new Qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,o),this.cb=ei("retryDelaySeedMs",1e4,o),this.Wa=ei("forwardChannelMaxRetries",2,o),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new sf(o&&o.concurrentRequestLimit),this.Da=new h0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sf.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,m){gt(0),this.W=o,this.H=c||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=Vf(this,null,this.W),Fo(this)};function ru(o){if(Af(o),o.G==3){var c=o.U++,d=_n(o.I);if(Ee(d,"SID",o.K),Ee(d,"RID",c),Ee(d,"TYPE","terminate"),ti(o,d),c=new On(o,o.j,c),c.L=2,c.v=Vo(_n(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Lf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Po(c)}Df(o)}function jo(o){o.g&&(iu(o),o.g.cancel(),o.g=null)}function Af(o){jo(o),o.u&&(l.clearTimeout(o.u),o.u=null),bo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Fo(o){if(!of(o.h)&&!o.s){o.s=!0;var c=o.Ga;nt||Z(),B||(nt(),B=!0),X.add(c,o),o.B=0}}function g0(o,c){return af(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Hs(p(o.Ga,o,c),Nf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const k=new On(this,this.j,o);let N=this.o;if(this.S&&(N?(N=g(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(k.H=N,N=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Cf(this,k,c),d=_n(this.I),Ee(d,"RID",o),Ee(d,"CVER",22),this.D&&Ee(d,"X-HTTP-Session-Id",this.D),ti(this,d),N&&(this.O?c="headers="+encodeURIComponent(String(_f(N)))+"&"+c:this.m&&nu(d,this.m,N)),tu(this.h,k),this.Ua&&Ee(d,"TYPE","init"),this.P?(Ee(d,"$req",c),Ee(d,"SID","null"),k.T=!0,Xl(k,d,null)):Xl(k,d,c),this.G=2}}else this.G==3&&(o?xf(this,o):this.i.length==0||of(this.h)||xf(this))};function xf(o,c){var d;c?d=c.l:d=o.U++;const m=_n(o.I);Ee(m,"SID",o.K),Ee(m,"RID",d),Ee(m,"AID",o.T),ti(o,m),o.m&&o.o&&nu(m,o.m,o.o),d=new On(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Cf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),tu(o.h,d),Xl(d,m,c)}function ti(o,c){o.H&&U(o.H,function(d,m){Ee(c,m,d)}),o.l&&cf({},function(d,m){Ee(c,m,d)})}function Cf(o,c,d){d=Math.min(o.i.length,d);var m=o.l?p(o.l.Na,o.l,o):null;e:{var k=o.i;let N=-1;for(;;){const b=["count="+d];N==-1?0<d?(N=k[0].g,b.push("ofs="+N)):N=0:b.push("ofs="+N);let _e=!0;for(let Ge=0;Ge<d;Ge++){let ce=k[Ge].g;const it=k[Ge].map;if(ce-=N,0>ce)N=Math.max(0,k[Ge].g-100),_e=!1;else try{d0(it,b,"req"+ce+"_")}catch{m&&m(it)}}if(_e){m=b.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,m}function Rf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;nt||Z(),B||(nt(),B=!0),X.add(c,o),o.v=0}}function su(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Hs(p(o.Fa,o),Nf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,kf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Hs(p(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),jo(this),kf(this))};function iu(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function kf(o){o.g=new On(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=_n(o.qa);Ee(c,"RID","rpc"),Ee(c,"SID",o.K),Ee(c,"AID",o.T),Ee(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ee(c,"TO",o.ja),Ee(c,"TYPE","xmlhttp"),ti(o,c),o.m&&o.o&&nu(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Vo(_n(c)),d.m=null,d.P=!0,tf(d,o)}t.Za=function(){this.C!=null&&(this.C=null,jo(this),su(this),gt(19))};function bo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Pf(o,c){var d=null;if(o.g==c){bo(o),iu(o),o.g=null;var m=2}else if(eu(o.h,c))d=c.D,lf(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var k=o.B;m=Co(),mt(m,new Xd(m,d)),Fo(o)}else Rf(o);else if(k=c.s,k==3||k==0&&0<c.X||!(m==1&&g0(o,c)||m==2&&su(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),k){case 1:yr(o,5);break;case 4:yr(o,10);break;case 3:yr(o,6);break;default:yr(o,2)}}}function Nf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function yr(o,c){if(o.j.info("Error code "+c),c==2){var d=p(o.fb,o),m=o.Xa;const k=!m;m=new gr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||No(m,"https"),Vo(m),k?u0(m.toString(),d):c0(m.toString(),d)}else gt(2);o.G=0,o.l&&o.l.sa(c),Df(o),Af(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Df(o){if(o.G=0,o.ka=[],o.l){const c=uf(o.h);(c.length!=0||o.i.length!=0)&&(O(o.ka,c),O(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function Vf(o,c,d){var m=d instanceof gr?_n(d):new gr(d);if(m.g!="")c&&(m.g=c+"."+m.g),Do(m,m.s);else{var k=l.location;m=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;var N=new gr(null);m&&No(N,m),c&&(N.g=c),k&&Do(N,k),d&&(N.l=d),m=N}return d=o.D,c=o.ya,d&&c&&Ee(m,d,c),Ee(m,"VER",o.la),ti(o,m),m}function Lf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new De(new Lo({eb:d})):new De(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}t=Of.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Uo(){}Uo.prototype.g=function(o,c){return new Dt(o,c)};function Dt(o,c){st.call(this),this.g=new Sf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!w(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new qr(this)}P(Dt,st),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){ru(this.g)},Dt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=ql(o),o=d);c.i.push(new Zv(c.Ya++,o)),c.G==3&&Fo(c)},Dt.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,Dt.aa.N.call(this)};function Mf(o){Ql.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}P(Mf,Ql);function jf(){Gl.call(this),this.status=1}P(jf,Gl);function qr(o){this.g=o}P(qr,Of),qr.prototype.ua=function(){mt(this.g,"a")},qr.prototype.ta=function(o){mt(this.g,new Mf(o))},qr.prototype.sa=function(o){mt(this.g,new jf)},qr.prototype.ra=function(){mt(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,R_=function(){return new Uo},C_=function(){return Co()},x_=pr,zc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Aa=Ro,Jd.COMPLETE="complete",A_=Jd,Qd.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",st.prototype.listen=st.prototype.K,yi=Qd,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,S_=De}).apply(typeof ia<"u"?ia:typeof self<"u"?self:typeof window<"u"?window:{});const sm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let js="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new y_("@firebase/firestore");function ci(){return Or.logLevel}function q(t,...e){if(Or.logLevel<=ae.DEBUG){const n=e.map(td);Or.debug(`Firestore (${js}): ${t}`,...n)}}function Dn(t,...e){if(Or.logLevel<=ae.ERROR){const n=e.map(td);Or.error(`Firestore (${js}): ${t}`,...n)}}function xs(t,...e){if(Or.logLevel<=ae.WARN){const n=e.map(td);Or.warn(`Firestore (${js}): ${t}`,...n)}}function td(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${js}) INTERNAL ASSERTION FAILED: `+t;throw Dn(e),new Error(e)}function me(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class II{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class SI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AI{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new k_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new ct(e)}}class xI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new RI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=PI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Cs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new $e(0,0))}static max(){return new te(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return to.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof to?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends to{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const NI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends to{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return NI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ie.fromString(e))}static fromName(e){return new G(Ie.fromString(e).popFirst(5))}static empty(){return new G(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ie(e.slice()))}}function DI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new or(s,G.empty(),e)}function VI(t){return new or(t.readTime,t.key,-1)}class or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new or(te.min(),G.empty(),-1)}static max(){return new or(te.max(),G.empty(),-1)}}function LI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==OI)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function jI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nd.oe=-1;function Rl(t){return t==null}function sl(t){return t===0&&1/t==-1/0}function FI(t){return typeof t=="number"&&Number.isInteger(t)&&!sl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function N_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oa(this.root,e,this.comparator,!0)}}class oa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ye.RED,this.left=s??Ye.EMPTY,this.right=i??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ye(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ye.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new om(this.data.getIterator())}getIteratorFrom(e){return new om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class om{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new Ze(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new D_("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const bI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(me(!!t),typeof t=="string"){let e=0;const n=bI.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sd(t){const e=t.mapValue.fields.__previous_value__;return rd(e)?sd(e):e}function no(t){const e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,r,s,i,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class ro{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa={mapValue:{}};function jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rd(t)?4:zI(t)?9007199254740991:BI(t)?10:11:ee()}function pn(t,e){if(t===e)return!0;const n=jr(t);if(n!==jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return no(t).isEqual(no(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ar(s.timestampValue),l=ar(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Mr(s.bytesValue).isEqual(Mr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Oe(s.doubleValue),l=Oe(i.doubleValue);return a===l?sl(a)===sl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Cs(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(im(a)!==im(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!pn(a[u],l[u])))return!1;return!0}(t,e);default:return ee()}}function so(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function Rs(t,e){if(t===e)return 0;const n=jr(t),r=jr(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Oe(i.integerValue||i.doubleValue),u=Oe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return am(t.timestampValue,e.timestampValue);case 4:return am(no(t),no(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Mr(i),u=Mr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=he(l[h],u[h]);if(f!==0)return f}return he(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=he(Oe(i.latitude),Oe(a.latitude));return l!==0?l:he(Oe(i.longitude),Oe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lm(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,h,f;const y=i.fields||{},p=a.fields||{},S=(l=y.value)===null||l===void 0?void 0:l.arrayValue,P=(u=p.value)===null||u===void 0?void 0:u.arrayValue,D=he(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return D!==0?D:lm(S,P)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===aa.mapValue&&a===aa.mapValue)return 0;if(i===aa.mapValue)return 1;if(a===aa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let y=0;y<u.length&&y<f.length;++y){const p=he(u[y],f[y]);if(p!==0)return p;const S=Rs(l[u[y]],h[f[y]]);if(S!==0)return S}return he(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ee()}}function am(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=ar(t),r=ar(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function lm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Rs(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function ks(t){return $c(t)}function $c(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$c(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${$c(n.fields[a])}`;return s+"}"}(t.mapValue):ee()}function um(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wc(t){return!!t&&"integerValue"in t}function id(t){return!!t&&"arrayValue"in t}function cm(t){return!!t&&"nullValue"in t}function hm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xa(t){return!!t&&"mapValue"in t}function BI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ni(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ur(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ni(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ni(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ni(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ni(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());xa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];xa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ur(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Ni(this.value))}}function V_(t){const e=[];return Ur(t.fields,(n,r)=>{const s=new Xe([n]);if(xa(r)){const i=V_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,te.min(),te.min(),te.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,te.min(),te.min(),At.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,te.min(),te.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.position=e,this.inclusive=n}}function dm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(a.referenceValue),n.key):r=Rs(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function fm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n="asc"){this.field=e,this.dir=n}}function $I(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{}class be extends L_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qI(e,n,r):n==="array-contains"?new GI(e,r):n==="in"?new KI(e,r):n==="not-in"?new YI(e,r):n==="array-contains-any"?new XI(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HI(e,r):new QI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rs(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(Rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends L_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new on(e,n)}matches(e){return O_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function O_(t){return t.op==="and"}function M_(t){return WI(t)&&O_(t)}function WI(t){for(const e of t.filters)if(e instanceof on)return!1;return!0}function qc(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+ks(t.value);if(M_(t))return t.filters.map(e=>qc(e)).join(",");{const e=t.filters.map(n=>qc(n)).join(",");return`${t.op}(${e})`}}function j_(t,e){return t instanceof be?function(r,s){return s instanceof be&&r.op===s.op&&r.field.isEqual(s.field)&&pn(r.value,s.value)}(t,e):t instanceof on?function(r,s){return s instanceof on&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&j_(a,s.filters[l]),!0):!1}(t,e):void ee()}function F_(t){return t instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${ks(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map(F_).join(" ,")+"}"}(t):"Filter"}class qI extends be{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class HI extends be{constructor(e,n){super(e,"in",n),this.keys=b_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QI extends be{constructor(e,n){super(e,"not-in",n),this.keys=b_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function b_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class GI extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return id(n)&&so(n.arrayValue,this.value)}}class KI extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&so(this.value.arrayValue,n)}}class YI extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(so(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!so(this.value.arrayValue,n)}}class XI extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!id(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>so(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function pm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new JI(t,e,n,r,s,i,a)}function od(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ks(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ks(r)).join(",")),e.ue=n}return e.ue}function ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$I(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fm(t.startAt,e.startAt)&&fm(t.endAt,e.endAt)}function Hc(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZI(t,e,n,r,s,i,a,l){return new Fs(t,e,n,r,s,i,a,l)}function kl(t){return new Fs(t)}function mm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function U_(t){return t.collectionGroup!==null}function Di(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ze(Xe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new io(i,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new io(Xe.keyField(),r))}return e.ce}function dn(t){const e=ne(t);return e.le||(e.le=e1(e,Di(t))),e.le}function e1(t,e){if(t.limitType==="F")return pm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new io(s.field,i)});const n=t.endAt?new il(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new il(t.startAt.position,t.startAt.inclusive):null;return pm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qc(t,e){const n=t.filters.concat([e]);return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gc(t,e,n){return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pl(t,e){return ad(dn(t),dn(e))&&t.limitType===e.limitType}function B_(t){return`${od(dn(t))}|lt:${t.limitType}`}function Gr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>F_(s)).join(", ")}]`),Rl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ks(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ks(s)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Nl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Di(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=dm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Di(r),s)||r.endAt&&!function(a,l,u){const h=dm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Di(r),s))}(t,e)}function t1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function z_(t){return(e,n)=>{let r=!1;for(const s of Di(t)){const i=n1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function n1(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Rs(u,h):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return N_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new ke(G.comparator);function Vn(){return r1}const $_=new ke(G.comparator);function _i(...t){let e=$_;for(const n of t)e=e.insert(n.key,n);return e}function W_(t){let e=$_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ar(){return Vi()}function q_(){return Vi()}function Vi(){return new bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const s1=new ke(G.comparator),i1=new Ze(G.comparator);function ie(...t){let e=i1;for(const n of t)e=e.add(n);return e}const o1=new Ze(he);function a1(){return o1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sl(e)?"-0":e}}function H_(t){return{integerValue:""+t}}function l1(t,e){return FI(e)?H_(e):ld(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this._=void 0}}function u1(t,e,n){return t instanceof oo?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rd(i)&&(i=sd(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof ao?G_(t,e):t instanceof lo?K_(t,e):function(s,i){const a=Q_(s,i),l=gm(a)+gm(s.Pe);return Wc(a)&&Wc(s.Pe)?H_(l):ld(s.serializer,l)}(t,e)}function c1(t,e,n){return t instanceof ao?G_(t,e):t instanceof lo?K_(t,e):n}function Q_(t,e){return t instanceof ol?function(r){return Wc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class oo extends Dl{}class ao extends Dl{constructor(e){super(),this.elements=e}}function G_(t,e){const n=Y_(e);for(const r of t.elements)n.some(s=>pn(s,r))||n.push(r);return{arrayValue:{values:n}}}class lo extends Dl{constructor(e){super(),this.elements=e}}function K_(t,e){let n=Y_(e);for(const r of t.elements)n=n.filter(s=>!pn(s,r));return{arrayValue:{values:n}}}class ol extends Dl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function gm(t){return Oe(t.integerValue||t.doubleValue)}function Y_(t){return id(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this.field=e,this.transform=n}}function d1(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ao&&s instanceof ao||r instanceof lo&&s instanceof lo?Cs(r.elements,s.elements,pn):r instanceof ol&&s instanceof ol?pn(r.Pe,s.Pe):r instanceof oo&&s instanceof oo}(t.transform,e.transform)}class f1{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ca(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vl{}function X_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ll(t.key,vt.none()):new yo(t.key,t.data,vt.none());{const n=t.data,r=At.empty();let s=new Ze(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new dr(t.key,r,new Ot(s.toArray()),vt.none())}}function p1(t,e,n){t instanceof yo?function(s,i,a){const l=s.value.clone(),u=_m(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof dr?function(s,i,a){if(!Ca(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=_m(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(J_(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Li(t,e,n,r){return t instanceof yo?function(i,a,l,u){if(!Ca(i.precondition,a))return l;const h=i.value.clone(),f=vm(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof dr?function(i,a,l,u){if(!Ca(i.precondition,a))return l;const h=vm(i.fieldTransforms,u,a),f=a.data;return f.setAll(J_(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(i,a,l){return Ca(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function m1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Q_(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function ym(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cs(r,s,(i,a)=>d1(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends Vl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class dr extends Vl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function J_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _m(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,c1(a,l,n[s]))}return r}function vm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,u1(i,a,e))}return r}class Ll extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g1 extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&p1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Li(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Li(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=q_();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=X_(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,(n,r)=>ym(n,r))&&Cs(this.baseMutations,e.baseMutations,(n,r)=>ym(n,r))}}class ud{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return s1}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new ud(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,oe;function w1(t){switch(t){default:return ee();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function Z_(t){if(t===void 0)return Dn("GRPC error has no .code"),L.UNKNOWN;switch(t){case je.OK:return L.OK;case je.CANCELLED:return L.CANCELLED;case je.UNKNOWN:return L.UNKNOWN;case je.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case je.INTERNAL:return L.INTERNAL;case je.UNAVAILABLE:return L.UNAVAILABLE;case je.UNAUTHENTICATED:return L.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case je.NOT_FOUND:return L.NOT_FOUND;case je.ALREADY_EXISTS:return L.ALREADY_EXISTS;case je.PERMISSION_DENIED:return L.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case je.ABORTED:return L.ABORTED;case je.OUT_OF_RANGE:return L.OUT_OF_RANGE;case je.UNIMPLEMENTED:return L.UNIMPLEMENTED;case je.DATA_LOSS:return L.DATA_LOSS;default:return ee()}}(oe=je||(je={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new Rr([4294967295,4294967295],0);function wm(t){const e=E1().encode(t),n=new I_;return n.update(e),new Uint8Array(n.digest())}function Em(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([s,i],0)]}class cd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vi(`Invalid padding: ${n}`);if(r<0)throw new vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Rr.fromNumber(r)));return s.compare(T1)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=wm(e),[r,s]=Em(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new cd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=wm(e),[r,s]=Em(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_o.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ol(te.min(),s,new ke(he),Vn(),ie())}}class _o{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _o(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class ev{constructor(e,n){this.targetId=e,this.me=n}}class tv{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Tm{constructor(){this.fe=0,this.ge=Sm(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new _o(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Sm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class I1{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vn(),this.qe=Im(),this.Qe=new ke(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Hc(i))if(r===0){const a=new G(i.path);this.Ue(n,a,dt.newNoDocument(a,te.min()))}else me(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Mr(r).toUint8Array()}catch(u){if(u instanceof D_)return xs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new cd(a,s,i)}catch(u){return xs(u instanceof vi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Hc(l.target)){const u=new G(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,dt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Ol(e,n,this.Qe,this.ke,r);return this.ke=Vn(),this.qe=Im(),this.Qe=new ke(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Tm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ze(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Im(){return new ke(G.comparator)}function Sm(){return new ke(G.comparator)}const S1={asc:"ASCENDING",desc:"DESCENDING"},A1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x1={and:"AND",or:"OR"};class C1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kc(t,e){return t.useProto3Json||Rl(e)?e:{value:e}}function al(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R1(t,e){return al(t,e.toTimestamp())}function fn(t){return me(!!t),te.fromTimestamp(function(n){const r=ar(n);return new $e(r.seconds,r.nanos)}(t))}function hd(t,e){return Yc(t,e).canonicalString()}function Yc(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rv(t){const e=Ie.fromString(t);return me(lv(e)),e}function Xc(t,e){return hd(t.databaseId,e.path)}function ju(t,e){const n=rv(e);if(n.get(1)!==t.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(iv(n))}function sv(t,e){return hd(t.databaseId,e)}function k1(t){const e=rv(t);return e.length===4?Ie.emptyPath():iv(e)}function Jc(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iv(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Am(t,e,n){return{name:Xc(t,e),fields:n.value.mapValue.fields}}function P1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(me(f===void 0||typeof f=="string"),tt.fromBase64String(f||"")):(me(f===void 0||f instanceof Buffer||f instanceof Uint8Array),tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?L.UNKNOWN:Z_(h.code);return new z(f,h.message||"")}(a);n=new tv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ju(t,r.document.name),i=fn(r.document.updateTime),a=r.document.createTime?fn(r.document.createTime):te.min(),l=new At({mapValue:{fields:r.document.fields}}),u=dt.newFoundDocument(s,i,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Ra(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ju(t,r.document),i=r.readTime?fn(r.readTime):te.min(),a=dt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ra([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ju(t,r.document),i=r.removedTargetIds||[];n=new Ra([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new v1(s,i),l=r.targetId;n=new ev(l,a)}}return n}function N1(t,e){let n;if(e instanceof yo)n={update:Am(t,e.key,e.value)};else if(e instanceof Ll)n={delete:Xc(t,e.key)};else if(e instanceof dr)n={update:Am(t,e.key,e.data),updateMask:U1(e.fieldMask)};else{if(!(e instanceof g1))return ee();n={verify:Xc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof oo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ao)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ol)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:R1(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function D1(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?fn(s.updateTime):fn(i);return a.isEqual(te.min())&&(a=fn(i)),new f1(a,s.transformResults||[])}(n,e))):[]}function V1(t,e){return{documents:[sv(t,e.path)]}}function L1(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sv(t,s);const i=function(h){if(h.length!==0)return av(on.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(f=>function(p){return{field:Kr(p.field),direction:j1(p.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Kc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function O1(t){let e=k1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(y){const p=ov(y);return p instanceof on&&M_(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(p=>function(P){return new io(Yr(P.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(y){let p;return p=typeof y=="object"?y.value:y,Rl(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(y){const p=!!y.before,S=y.values||[];return new il(S,p)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const p=!y.before,S=y.values||[];return new il(S,p)}(n.endAt)),ZI(e,s,a,i,l,"F",u,h)}function M1(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ov(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yr(n.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Yr(n.unaryFilter.field);return be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yr(n.unaryFilter.field);return be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Yr(n.unaryFilter.field);return be.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return be.create(Yr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>ov(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function j1(t){return S1[t]}function F1(t){return A1[t]}function b1(t){return x1[t]}function Kr(t){return{fieldPath:t.canonicalString()}}function Yr(t){return Xe.fromServerFormat(t.fieldPath)}function av(t){return t instanceof be?function(n){if(n.op==="=="){if(hm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NAN"}};if(cm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NAN"}};if(cm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kr(n.field),op:F1(n.op),value:n.value}}}(t):t instanceof on?function(n){const r=n.getFilters().map(s=>av(s));return r.length===1?r[0]:{compositeFilter:{op:b1(n.op),filters:r}}}(t):ee()}function U1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r,s,i=te.min(),a=te.min(),l=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.ct=e}}function z1(t){const e=O1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.un=new W1}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(or.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class W1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ps(0)}static kn(){return new Ps(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.changes=new bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Li(r.mutation,s,Ot.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=Ar();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=_i();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ar();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Vn();const a=Vi(),l=function(){return Vi()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof dr)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Li(f.mutation,h,f.mutation.getFieldMask(),$e.now())):a.set(h.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var y;return l.set(h,new H1(f,(y=a.get(h))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Vi();let s=new ke((a,l)=>a-l),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Ot.empty();f=l.applyToLocalView(h,f),r.set(u,f);const y=(s.get(l.batchId)||ie()).add(u);s=s.insert(l.batchId,y)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,y=q_();f.forEach(p=>{if(!i.has(p)){const S=X_(n.get(p),r.get(p));S!==null&&y.set(p,S),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):U_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Ar());let l=-1,u=i;return a.next(h=>M.forEach(h,(f,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{u=u.insert(f,p)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ie())).next(f=>({batchId:l,changes:W_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=_i();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=_i();return this.indexManager.getCollectionParents(e,i).next(l=>M.forEach(l,u=>{const h=function(y,p){return new Fs(p,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((y,p)=>{a=a.insert(y,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,dt.newInvalidDocument(f)))});let l=_i();return a.forEach((u,h)=>{const f=i.get(u);f!==void 0&&Li(f.mutation,h,Ot.empty(),$e.now()),Nl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fn(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:z1(s.bundledQuery),readTime:fn(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.overlays=new ke(G.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ar();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Ar(),i=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=Ar(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Ar(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return M.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new _1(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this.Tr=new Ze(We.Er),this.dr=new Ze(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Ie([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Ie([])),r=new We(n,e),s=new We(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ze(We.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new y1(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(he);return n.forEach(s=>{const i=new We(s,0),a=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const a=new We(new G(i),0);let l=new Ze(he);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},a),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.Mr=e,this.docs=function(){return new ke(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Vn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Vn();const a=n.path,l=new G(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||LI(VI(f),r)<=0||(s.has(f.key)||Nl(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z1(this)}getSize(e){return M.resolve(this.size)}}class Z1 extends q1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.persistence=e,this.Nr=new bs(n=>od(n),ad),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dd,this.targetCount=0,this.kr=Ps.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ps(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nd(0),this.Kr=!1,this.Kr=!0,this.$r=new Y1,this.referenceDelegate=e(this),this.Ur=new eS(this),this.indexManager=new $1,this.remoteDocumentCache=function(s){return new J1(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new B1(n),this.Gr=new G1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new K1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new X1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new nS(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class nS extends MI{constructor(e){super(),this.currentSequenceNumber=e}}class fd{constructor(e){this.persistence=e,this.Jr=new dd,this.Yr=null}static Zr(e){return new fd(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iT()?8:jI(rT())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new rS;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ci()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(ci()<=ae.DEBUG&&q("QueryEngine","Query:",Gr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ci()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):M.resolve())}Yi(e,n){if(mm(n))return M.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gc(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ie(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Gc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return mm(n)||s.isEqual(te.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?M.resolve(null):(ci()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gr(n)),this.rs(e,a,n,DI(s,-1)).next(l=>l))})}ts(e,n){let r=new Ze(z_(e));return n.forEach((s,i)=>{Nl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ci()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Gr(n)),this.Ji.getDocumentsMatchingQuery(e,n,or.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ke(he),this._s=new bs(i=>od(i),ad),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function oS(t,e,n,r){return new iS(t,e,n,r)}async function uv(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ie();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function aS(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const y=h.batch,p=y.keys();let S=M.resolve();return p.forEach(P=>{S=S.next(()=>f.getEntry(u,P)).next(D=>{const O=h.docVersions.get(P);me(O!==null),D.version.compareTo(O)<0&&(y.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),f.addEntry(D)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function cv(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lS(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,y)=>{const p=s.get(y);if(!p)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,y)));let S=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(tt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),s=s.insert(y,S),function(D,O,I){return D.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,S,f)&&l.push(n.Ur.updateTargetData(i,S))});let u=Vn(),h=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(uS(i,a,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(te.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(y=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function uS(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Vn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function cS(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hS(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new Hn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zc(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!go(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function xm(t,e,n){const r=ne(t);let s=te.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const y=ne(u),p=y._s.get(f);return p!==void 0?M.resolve(y.os.get(p)):y.Ur.getTargetData(h,f)}(r,a,dn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:te.min(),n?i:ie())).next(l=>(dS(r,t1(e),l),{documents:l,Ts:i})))}function dS(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Cm{constructor(){this.activeTargetIds=a1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fS{constructor(){this.so=new Cm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la=null;function Fu(){return la===null?la=function(){return 268435456+Math.round(2147483648*Math.random())}():la++,"0x"+la.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class yS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Fu(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,a),this.No(n,u,h,s).then(f=>(q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw xs("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+js}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=mS[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Fu();return new Promise((a,l)=>{const u=new S_;u.setWithCredentials(!0),u.listenOnce(A_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Aa.NO_ERROR:const f=u.getResponseJson();q(ut,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case Aa.TIMEOUT:q(ut,`RPC '${e}' ${i} timed out`),l(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case Aa.HTTP_ERROR:const y=u.getStatus();if(q(ut,`RPC '${e}' ${i} failed with status:`,y,"response text:",u.getResponseText()),y>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const S=p==null?void 0:p.error;if(S&&S.status&&S.message){const P=function(O){const I=O.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(I)>=0?I:L.UNKNOWN}(S.status);l(new z(P,S.message))}else l(new z(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(L.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{q(ut,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);q(ut,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Fu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=R_(),l=C_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(ut,`Creating RPC '${e}' stream ${s}: ${f}`,u);const y=a.createWebChannel(f,u);let p=!1,S=!1;const P=new gS({Io:O=>{S?q(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(p||(q(ut,`Opening RPC '${e}' stream ${s} transport.`),y.open(),p=!0),q(ut,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},To:()=>y.close()}),D=(O,I,w)=>{O.listen(I,A=>{try{w(A)}catch(V){setTimeout(()=>{throw V},0)}})};return D(y,yi.EventType.OPEN,()=>{S||(q(ut,`RPC '${e}' stream ${s} transport opened.`),P.yo())}),D(y,yi.EventType.CLOSE,()=>{S||(S=!0,q(ut,`RPC '${e}' stream ${s} transport closed`),P.So())}),D(y,yi.EventType.ERROR,O=>{S||(S=!0,xs(ut,`RPC '${e}' stream ${s} transport errored:`,O),P.So(new z(L.UNAVAILABLE,"The operation could not be completed")))}),D(y,yi.EventType.MESSAGE,O=>{var I;if(!S){const w=O.data[0];me(!!w);const A=w,V=A.error||((I=A[0])===null||I===void 0?void 0:I.error);if(V){q(ut,`RPC '${e}' stream ${s} received error:`,V);const F=V.status;let U=function(v){const T=je[v];if(T!==void 0)return Z_(T)}(F),_=V.message;U===void 0&&(U=L.INTERNAL,_="Unknown error status: "+F+" with message "+V.message),S=!0,P.So(new z(U,_)),y.close()}else q(ut,`RPC '${e}' stream ${s} received:`,w),P.bo(w)}}),D(l,x_.STAT_EVENT,O=>{O.stat===zc.PROXY?q(ut,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===zc.NOPROXY&&q(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return new C1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new z(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _S extends dv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=P1(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?fn(a.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Jc(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Hc(u)?{documents:V1(i,u)}:{query:L1(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=nv(i,a.resumeToken);const h=Kc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=al(i,a.snapshotVersion.toTimestamp());const h=Kc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=M1(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Jc(this.serializer),n.removeTarget=e,this.a_(n)}}class vS extends dv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=D1(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Jc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>N1(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Yc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Yc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(L.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ES{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Dn(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Br(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ne(u);h.L_.add(4),await vo(h),h.q_.set("Unknown"),h.L_.delete(4),await jl(h)}(this))})}),this.q_=new ES(r,s)}}async function jl(t){if(Br(t))for(const e of t.B_)await e(!0)}async function vo(t){for(const e of t.B_)await e(!1)}function fv(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_d(n)?yd(n):Us(n).r_()&&gd(n,e))}function md(t,e){const n=ne(t),r=Us(n);n.N_.delete(e),r.r_()&&pv(n,e),n.N_.size===0&&(r.r_()?r.o_():Br(n)&&n.q_.set("Unknown"))}function gd(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Us(t).A_(e)}function pv(t,e){t.Q_.xe(e),Us(t).R_(e)}function yd(t){t.Q_=new I1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Us(t).start(),t.q_.v_()}function _d(t){return Br(t)&&!Us(t).n_()&&t.N_.size>0}function Br(t){return ne(t).L_.size===0}function mv(t){t.Q_=void 0}async function IS(t){t.q_.set("Online")}async function SS(t){t.N_.forEach((e,n)=>{gd(t,e)})}async function AS(t,e){mv(t),_d(t)?(t.q_.M_(e),yd(t)):t.q_.set("Unknown")}async function xS(t,e,n){if(t.q_.set("Online"),e instanceof tv&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ll(t,r)}else if(e instanceof Ra?t.Q_.Ke(e):e instanceof ev?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await cv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(h);f&&i.N_.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),pv(i,u);const y=new Hn(f.target,u,h,f.sequenceNumber);gd(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await ll(t,r)}}async function ll(t,e,n){if(!go(e))throw e;t.L_.add(1),await vo(t),t.q_.set("Offline"),n||(n=()=>cv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await jl(t)})}function gv(t,e){return e().catch(n=>ll(t,n,e))}async function Fl(t){const e=ne(t),n=lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CS(e);)try{const s=await cS(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,RS(e,s)}catch(s){await ll(e,s)}yv(e)&&_v(e)}function CS(t){return Br(t)&&t.O_.length<10}function RS(t,e){t.O_.push(e);const n=lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yv(t){return Br(t)&&!lr(t).n_()&&t.O_.length>0}function _v(t){lr(t).start()}async function kS(t){lr(t).p_()}async function PS(t){const e=lr(t);for(const n of t.O_)e.m_(n.mutations)}async function NS(t,e,n){const r=t.O_.shift(),s=ud.from(r,e,n);await gv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fl(t)}async function DS(t,e){e&&lr(t).V_&&await async function(r,s){if(function(a){return w1(a)&&a!==L.ABORTED}(s.code)){const i=r.O_.shift();lr(r).s_(),await gv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fl(r)}}(t,e),yv(t)&&_v(t)}async function km(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Br(n);n.L_.add(3),await vo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await jl(n)}async function VS(t,e){const n=ne(t);e?(n.L_.delete(2),await jl(n)):e||(n.L_.add(2),await vo(n),n.q_.set("Unknown"))}function Us(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new _S(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:IS.bind(null,t),Ro:SS.bind(null,t),mo:AS.bind(null,t),d_:xS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_d(t)?yd(t):t.q_.set("Unknown")):(await t.K_.stop(),mv(t))})),t.K_}function lr(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new vS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kS.bind(null,t),mo:DS.bind(null,t),f_:PS.bind(null,t),g_:NS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Fl(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new vd(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wd(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),go(t))return new z(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=_i(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new ys(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.W_=new ke(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ns{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ns(e,n,ys.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OS{constructor(){this.queries=Nm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=Nm(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new z(L.ABORTED,"Firestore shutting down"))}}function Nm(){return new bs(t=>B_(t),Pl)}async function Ed(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new LS,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=wd(a,`Initialization of query '${Gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Id(n)}async function Td(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MS(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&Id(n)}function jS(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Id(t){t.Y_.forEach(e=>{e.next()})}var eh,Dm;(Dm=eh||(eh={})).ea="default",Dm.Cache="cache";class Sd{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.key=e}}class wv{constructor(e){this.key=e}}class FS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=z_(e),this.Ra=new ys(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Pm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,y)=>{const p=s.get(f),S=Nl(this.query,y)?y:null,P=!!p&&this.mutatedKeys.has(p.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;p&&S?p.data.isEqual(S.data)?P!==D&&(r.track({type:3,doc:S}),O=!0):this.ga(p,S)||(r.track({type:2,doc:S}),O=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(l=!0)):!p&&S?(r.track({type:0,doc:S}),O=!0):p&&!S&&(r.track({type:1,doc:p}),O=!0,(u||h)&&(l=!0)),O&&(S?(a=a.add(S),i=D?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,y)=>function(S,P){const D=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return D(S)-D(P)}(f.type,y.type)||this.Aa(f.doc,y.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new Ns(this.query,e.Ra,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new wv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new vv(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ns.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class US{constructor(e){this.key=e,this.va=!1}}class BS{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new bs(l=>B_(l),Pl),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(G.comparator),this.Na=new Map,this.La=new dd,this.Ba={},this.ka=new Map,this.qa=Ps.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function zS(t,e,n=!0){const r=xv(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Ev(r,e,n,!0),s}async function $S(t,e){const n=xv(t);await Ev(n,e,!0,!1)}async function Ev(t,e,n,r){const s=await hS(t.localStore,dn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await WS(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&fv(t.remoteStore,s),l}async function WS(t,e,n,r,s){t.Ka=(y,p,S)=>async function(D,O,I,w){let A=O.view.ma(I);A.ns&&(A=await xm(D.localStore,O.query,!1).then(({documents:_})=>O.view.ma(_,A)));const V=w&&w.targetChanges.get(O.targetId),F=w&&w.targetMismatches.get(O.targetId)!=null,U=O.view.applyChanges(A,D.isPrimaryClient,V,F);return Lm(D,O.targetId,U.wa),U.snapshot}(t,y,p,S);const i=await xm(t.localStore,e,!0),a=new FS(e,i.Ts),l=a.ma(i.documents),u=_o.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);Lm(t,n,h.wa);const f=new bS(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function qS(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Pl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&md(r.remoteStore,s.targetId),th(r,s.targetId)}).catch(mo)):(th(r,s.targetId),await Zc(r.localStore,s.targetId,!0))}async function HS(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),md(n.remoteStore,r.targetId))}async function QS(t,e,n){const r=eA(t);try{const s=await function(a,l){const u=ne(a),h=$e.now(),f=l.reduce((S,P)=>S.add(P.key),ie());let y,p;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=Vn(),D=ie();return u.cs.getEntries(S,f).next(O=>{P=O,P.forEach((I,w)=>{w.isValidDocument()||(D=D.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,P)).next(O=>{y=O;const I=[];for(const w of l){const A=m1(w,y.get(w.key).overlayedDocument);A!=null&&I.push(new dr(w.key,A,V_(A.value.mapValue),vt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,I,l)}).next(O=>{p=O;const I=O.applyToLocalDocumentSet(y,D);return u.documentOverlayCache.saveOverlays(S,O.batchId,I)})}).then(()=>({batchId:p.batchId,changes:W_(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new ke(he)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,s.batchId,n),await wo(r,s.changes),await Fl(r.remoteStore)}catch(s){const i=wd(s,"Failed to persist write");n.reject(i)}}async function Tv(t,e){const n=ne(t);try{const r=await lS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?me(a.va):s.removedDocuments.size>0&&(me(a.va),a.va=!1))}),await wo(n,r,e)}catch(r){await mo(r)}}function Vm(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ne(a);u.onlineState=l;let h=!1;u.queries.forEach((f,y)=>{for(const p of y.j_)p.Z_(l)&&(h=!0)}),h&&Id(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GS(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new ke(G.comparator);a=a.insert(i,dt.newNoDocument(i,te.min()));const l=ie().add(i),u=new Ol(te.min(),new Map,new ke(he),a,l);await Tv(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ad(r)}else await Zc(r.localStore,e,!1).then(()=>th(r,e,n)).catch(mo)}async function KS(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await aS(n.localStore,e);Sv(n,r,null),Iv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wo(n,s)}catch(s){await mo(s)}}async function YS(t,e,n){const r=ne(t);try{const s=await function(a,l){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(y=>(me(y!==null),f=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);Sv(r,e,n),Iv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wo(r,s)}catch(s){await mo(s)}}function Iv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Sv(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function th(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Av(t,r)})}function Av(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(md(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ad(t))}function Lm(t,e,n){for(const r of n)r instanceof vv?(t.La.addReference(r.key,e),XS(t,r)):r instanceof wv?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Av(t,r.key)):ee()}function XS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ad(t))}function Ad(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new US(n)),t.Oa=t.Oa.insert(n,r),fv(t.remoteStore,new Hn(dn(kl(n.path)),r,"TargetPurposeLimboResolution",nd.oe))}}async function wo(t,e,n){const r=ne(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){s.push(h);const y=pd.Wi(u.targetId,h);i.push(y)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,h){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>M.forEach(h,p=>M.forEach(p.$i,S=>f.persistence.referenceDelegate.addReference(y,p.targetId,S)).next(()=>M.forEach(p.Ui,S=>f.persistence.referenceDelegate.removeReference(y,p.targetId,S)))))}catch(y){if(!go(y))throw y;q("LocalStore","Failed to update sequence numbers: "+y)}for(const y of h){const p=y.targetId;if(!y.fromCache){const S=f.os.get(p),P=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(p,D)}}}(r.localStore,i))}async function JS(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await uv(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new z(L.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wo(n,r.hs)}}function ZS(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function xv(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GS.bind(null,e),e.Ca.d_=MS.bind(null,e.eventManager),e.Ca.$a=jS.bind(null,e.eventManager),e}function eA(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YS.bind(null,e),e}class ul{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ml(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return oS(this.persistence,new sS,e.initialUser,this.serializer)}Ga(e){return new tS(fd.Zr,this.serializer)}Wa(e){return new fS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ul.provider={build:()=>new ul};class nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JS.bind(null,this.syncEngine),await VS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OS}()}createDatastore(e){const n=Ml(e.databaseInfo.databaseId),r=function(i){return new yS(i)}(e.databaseInfo);return function(i,a,l,u){return new wS(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new TS(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Vm(this.syncEngine,n,0),function(){return Rm.D()?new Rm:new pS}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,f){const y=new BS(s,i,a,l,u,h);return f&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await vo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nh.provider={build:()=>new nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=P_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uu(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await uv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Om(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nA(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>km(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>km(e.remoteStore,s)),t._onlineComponents=e}async function nA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;xs("Error using user provided cache. Falling back to memory cache: "+n),await Uu(t,new ul)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Uu(t,new ul);return t._offlineComponents}async function Cv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Om(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Om(t,new nh))),t._onlineComponents}function rA(t){return Cv(t).then(e=>e.syncEngine)}async function cl(t){const e=await Cv(t),n=e.eventManager;return n.onListen=zS.bind(null,e.syncEngine),n.onUnlisten=qS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$S.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HS.bind(null,e.syncEngine),n}function sA(t,e,n={}){const r=new xn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new xd({next:p=>{f.Za(),a.enqueueAndForget(()=>Td(i,y));const S=p.docs.has(l);!S&&p.fromCache?h.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&p.fromCache&&u&&u.source==="server"?h.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(p)},error:p=>h.reject(p)}),y=new Sd(kl(l.path),f,{includeMetadataChanges:!0,_a:!0});return Ed(i,y)}(await cl(t),t.asyncQueue,e,n,r)),r.promise}function iA(t,e,n={}){const r=new xn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new xd({next:p=>{f.Za(),a.enqueueAndForget(()=>Td(i,y)),p.fromCache&&u.source==="server"?h.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(p)},error:p=>h.reject(p)}),y=new Sd(l,f,{includeMetadataChanges:!0,_a:!0});return Ed(i,y)}(await cl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t,e,n){if(!n)throw new z(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oA(t,e,n,r){if(e===!0&&r===!0)throw new z(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jm(t){if(!G.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fm(t){if(G.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bl(t);throw new z(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ul{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new II;switch(r.type){case"firstParty":return new CI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mm.get(n);r&&(q("ComponentProvider","Removing Datastore"),Mm.delete(n),r.terminate())}(this),Promise.resolve()}}function aA(t,e,n,r={}){var s;const i=(t=wt(t,Ul))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ct.MOCK_USER;else{l=nT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(h)}t._authCredentials=new SI(new k_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fr(this.firestore,e,this._query)}}class ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}}class rr extends fr{constructor(e,n,r){super(e,n,kl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new G(e))}withConverter(e){return new rr(this.firestore,e,this._path)}}function wn(t,e,...n){if(t=Kt(t),kv("collection","path",e),t instanceof Ul){const r=Ie.fromString(e,...n);return Fm(r),new rr(t,null,r)}{if(!(t instanceof ft||t instanceof rr))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Fm(r),new rr(t.firestore,null,r)}}function zt(t,e,...n){if(t=Kt(t),arguments.length===1&&(e=P_.newId()),kv("doc","path",e),t instanceof Ul){const r=Ie.fromString(e,...n);return jm(r),new ft(t,null,new G(r))}{if(!(t instanceof ft||t instanceof rr))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return jm(r),new ft(t.firestore,t instanceof rr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hv(this,"async_queue_retry"),this.Vu=()=>{const r=bu();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!go(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Dn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=vd.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Bm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class mn extends Ul{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Um,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Um(e),this._firestoreClient=void 0,await e}}}function lA(t,e){const n=typeof t=="object"?t:hI(),r=typeof t=="string"?t:"(default)",s=aI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=eT("firestore");i&&aA(s,...i)}return s}function Eo(t){if(t._terminated)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uA(t),t._firestoreClient}function uA(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,f){return new UI(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Rv(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new tA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ds(tt.fromBase64String(e))}catch(n){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ds(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=/^__.*__$/;class hA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}}class Pv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class kd{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new kd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Nv(this.Cu)&&cA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class dA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ml(e)}Qu(e,n,r,s=!1){return new kd({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Io(t){const e=t._freezeSettings(),n=Ml(t._databaseId);return new dA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pd(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Dd("Data must be an object, but it was:",a,r);const l=Lv(r,a);let u,h;if(i.merge)u=new Ot(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const y of i.mergeFields){const p=rh(e,y,n);if(!a.contains(p))throw new z(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Mv(f,p)||f.push(p)}u=new Ot(f),h=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=a.fieldTransforms;return new hA(new At(l),u,h)}class zl extends Bl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zl}}class Nd extends Bl{_toFieldTransform(e){return new h1(e.path,new oo)}isEqual(e){return e instanceof Nd}}function Dv(t,e,n,r){const s=t.Qu(1,e,n);Dd("Data must be an object, but it was:",s,r);const i=[],a=At.empty();Ur(r,(u,h)=>{const f=Vd(e,u,n);h=Kt(h);const y=s.Nu(f);if(h instanceof zl)i.push(f);else{const p=So(h,y);p!=null&&(i.push(f),a.set(f,p))}});const l=new Ot(i);return new Pv(a,l,s.fieldTransforms)}function Vv(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[rh(e,r,n)],u=[s];if(i.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(rh(e,i[p])),u.push(i[p+1]);const h=[],f=At.empty();for(let p=l.length-1;p>=0;--p)if(!Mv(h,l[p])){const S=l[p];let P=u[p];P=Kt(P);const D=a.Nu(S);if(P instanceof zl)h.push(S);else{const O=So(P,D);O!=null&&(h.push(S),f.set(S,O))}}const y=new Ot(h);return new Pv(f,y,a.fieldTransforms)}function fA(t,e,n,r=!1){return So(n,t.Qu(r?4:3,e))}function So(t,e){if(Ov(t=Kt(t)))return Dd("Unsupported field value:",e,t),Lv(t,e);if(t instanceof Bl)return function(r,s){if(!Nv(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=So(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return l1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$e.fromDate(r);return{timestampValue:al(s.serializer,i)}}if(r instanceof $e){const i=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:al(s.serializer,i)}}if(r instanceof Cd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ds)return{bytesValue:nv(s.serializer,r._byteString)};if(r instanceof ft){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Rd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ld(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${bl(r)}`)}(t,e)}function Lv(t,e){const n={};return N_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,(r,s)=>{const i=So(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Ov(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof Cd||t instanceof Ds||t instanceof ft||t instanceof Bl||t instanceof Rd)}function Dd(t,e,n){if(!Ov(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=bl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rh(t,e,n){if((e=Kt(e))instanceof To)return e._internalPath;if(typeof e=="string")return Vd(t,e);throw hl("Field path arguments must be of type string or ",t,!1,void 0,n)}const pA=new RegExp("[~\\*/\\[\\]]");function Vd(t,e,n){if(e.search(pA)>=0)throw hl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new To(...e.split("."))._internalPath}catch{throw hl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new z(L.INVALID_ARGUMENT,l+t+u)}function Mv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($l("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mA extends jv{data(){return super.data()}}function $l(t,e){return typeof e=="string"?Vd(t,e):e instanceof To?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ld{}class bv extends Ld{}function Bu(t,e,...n){let r=[];e instanceof Ld&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Od).length,l=i.filter(u=>u instanceof Wl).length;if(a>1||a>0&&l>0)throw new z(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wl extends bv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wl(e,n,r)}_apply(e){const n=this._parse(e);return Uv(e._query,n),new fr(e.firestore,e.converter,Qc(e._query,n))}_parse(e){const n=Io(e.firestore);return function(i,a,l,u,h,f,y){let p;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){qm(y,f);const S=[];for(const P of y)S.push(Wm(u,i,P));p={arrayValue:{values:S}}}else p=Wm(u,i,y)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||qm(y,f),p=fA(l,a,y,f==="in"||f==="not-in");return be.create(h,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zm(t,e,n){const r=e,s=$l("where",t);return Wl._create(s,r,n)}class Od extends Ld{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Od(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Uv(a,u),a=Qc(a,u)}(e._query,n),new fr(e.firestore,e.converter,Qc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Md extends bv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Md(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new io(i,a)}(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Fs(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function $m(t,e="asc"){const n=e,r=$l("orderBy",t);return Md._create(r,n)}function Wm(t,e,n){if(typeof(n=Kt(n))=="string"){if(n==="")throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U_(e)&&n.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!G.isDocumentKey(r))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return um(t,new G(r))}if(n instanceof ft)return um(t,n._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bl(n)}.`)}function qm(t,e){if(!Array.isArray(t)||t.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Uv(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gA{convertValue(e,n="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ur(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Oe(a.doubleValue));return new Rd(i)}convertGeoPoint(e){return new Cd(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(no(e));default:return null}}convertTimestamp(e){const n=ar(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);me(lv(r));const s=new ro(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Dn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bv extends jv{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($l("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ka extends Bv{data(e={}){return super.data(e)}}class zv{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ka(this._firestore,this._userDataWriter,r.key,r,new wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new ka(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ka(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:yA(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t){t=wt(t,ft);const e=wt(t.firestore,mn);return sA(Eo(e),t._key).then(n=>$v(e,t,n))}class Fd extends gA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function ua(t){t=wt(t,fr);const e=wt(t.firestore,mn),n=Eo(e),r=new Fd(e);return Fv(t._query),iA(n,t._query).then(s=>new zv(e,r,t,s))}function hi(t,e,n){t=wt(t,ft);const r=wt(t.firestore,mn),s=jd(t.converter,e,n);return Ao(r,[Pd(Io(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,vt.none())])}function ca(t,e,n,...r){t=wt(t,ft);const s=wt(t.firestore,mn),i=Io(s);let a;return a=typeof(e=Kt(e))=="string"||e instanceof To?Vv(i,"updateDoc",t._key,e,n,r):Dv(i,"updateDoc",t._key,e),Ao(s,[a.toMutation(t._key,vt.exists(!0))])}function _A(t){return Ao(wt(t.firestore,mn),[new Ll(t._key,vt.none())])}function Qm(t,e){const n=wt(t.firestore,mn),r=zt(t),s=jd(t.converter,e);return Ao(n,[Pd(Io(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function _r(t,...e){var n,r,s;t=Kt(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Bm(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Bm(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let u,h,f;if(t instanceof ft)h=wt(t.firestore,mn),f=kl(t._key.path),u={next:y=>{e[a]&&e[a]($v(h,t,y))},error:e[a+1],complete:e[a+2]};else{const y=wt(t,fr);h=wt(y.firestore,mn),f=y._query;const p=new Fd(h);u={next:S=>{e[a]&&e[a](new zv(h,p,y,S))},error:e[a+1],complete:e[a+2]},Fv(t._query)}return function(p,S,P,D){const O=new xd(D),I=new Sd(S,O,P);return p.asyncQueue.enqueueAndForget(async()=>Ed(await cl(p),I)),()=>{O.Za(),p.asyncQueue.enqueueAndForget(async()=>Td(await cl(p),I))}}(Eo(h),f,l,u)}function Ao(t,e){return function(r,s){const i=new xn;return r.asyncQueue.enqueueAndForget(async()=>QS(await rA(r),s,i)),i.promise}(Eo(t),e)}function $v(t,e,n){const r=n.docs.get(e._key),s=new Fd(t);return new Bv(t,s,e._key,r,new wi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Io(e)}set(e,n,r){this._verifyNotCommitted();const s=zu(e,this._firestore),i=jd(s.converter,n,r),a=Pd(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,vt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=zu(e,this._firestore);let a;return a=typeof(n=Kt(n))=="string"||n instanceof To?Vv(this._dataReader,"WriteBatch.update",i._key,n,r,s):Dv(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zu(e,this._firestore);return this._mutations=this._mutations.concat(new Ll(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zu(t,e){if((t=Kt(t)).firestore!==e)throw new z(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ha(){return new Nd("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return Eo(t=wt(t,mn)),new vA(t,e=>Ao(t,e))}(function(e,n=!0){(function(s){js=s})(cI),rl(new Zi("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new mn(new AI(r.getProvider("auth-internal")),new kI(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(h.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gs(sm,"4.7.3",e),gs(sm,"4.7.3","esm2017")})();const wA={apiKey:"AIzaSyAic56lPgHqnMSJAgslpTAsNqqwY19UHiQ",authDomain:"sales-project-tracker.firebaseapp.com",projectId:"sales-project-tracker",storageBucket:"sales-project-tracker.firebasestorage.app",messagingSenderId:"275799582428",appId:"1:275799582428:web:a44d210b2d48765d537619",measurementId:"G-6ZQ7SL2DX9"},EA=w_(wA),Le=lA(EA),Ei=[{id:"dale",name:"Dale",initials:"DA"},{id:"justin",name:"Justin",initials:"JU"},{id:"meghan",name:"Meghan",initials:"ME"},{id:"rickielee",name:"Rickie-Lee",initials:"RL"},{id:"roberta",name:"Roberta",initials:"RO"},{id:"sam",name:"Sam",initials:"SA"}].sort((t,e)=>t.name.localeCompare(e.name)),sh=[{id:"railing",name:"Railing",icon:"railing.png"},{id:"deck",name:"Deck",icon:"deck.png"},{id:"hardscapes",name:"Hardscapes",icon:"hardscapes.png"},{id:"fence",name:"Fence",icon:"fence.png"},{id:"pergola",name:"Pergola",icon:"pergola.png"},{id:"turf",name:"Turf",icon:"turf.png"}],$n=60,di="projects",Pa="weeklyRecords",da="appSettings",Km="goals",Ym="streaks",TA="achievements",Xm="personalBests",IA=[{id:"first100",name:"Century Club",description:"First week with 100+ projects",icon:"💯",requirement:t=>t.weeklyProjects>=100},{id:"perfectWeek",name:"Perfect Week",description:"Hit exactly the weekly goal",icon:"🎯",requirement:t=>t.weeklyProjects===t.weeklyGoal},{id:"mondayMotivator",name:"Monday Motivator",description:"20+ projects on a Monday",icon:"💪",requirement:t=>t.mondayProjects>=20},{id:"speedDemon",name:"Speed Demon",description:"10 projects in 1 hour",icon:"⚡",requirement:t=>t.hourlyMax>=10},{id:"allHands",name:"All Hands on Deck",description:"Every salesperson contributed in one day",icon:"🤝",requirement:t=>t.allSalespeopleDay},{id:"doubleGoal",name:"Double Trouble",description:"Achieved 2x the weekly goal",icon:"2️⃣",requirement:t=>t.weeklyProjects>=t.weeklyGoal*2},{id:"streakMaster",name:"Streak Master",description:"Maintained a 7-day streak",icon:"🔥",requirement:t=>t.currentStreak>=7},{id:"varietyPack",name:"Variety Pack",description:"All project types in one day",icon:"🎨",requirement:t=>t.allProjectTypesDay}],Jm={REGINA:{id:"regina",name:"Regina",abbreviation:"RGNA",tileColor:"bg-blue-100/80 border-blue-400",bucketColor:"border-blue-400 bg-blue-50 hover:bg-blue-100",textColor:"text-blue-700",bucketOverColor:"border-blue-600 bg-blue-100 scale-105"},SASKATOON:{id:"saskatoon",name:"Saskatoon",abbreviation:"SKTN",tileColor:"bg-green-100/80 border-green-400",bucketColor:"border-green-400 bg-green-50 hover:bg-green-100",textColor:"text-green-700",bucketOverColor:"border-green-600 bg-green-100 scale-105"}},bd=t=>typeof t=="string"&&(t.startsWith("http")||t.startsWith("/")||t.includes(".")),Zm=(t,e={month:"short",day:"numeric"})=>t?new Date(t).toLocaleDateString(void 0,e):"",Bs=re.createContext(),SA=({children:t})=>{const[e,n]=re.useState([]),[r,s]=re.useState([]),[i,a]=re.useState($n),[l,u]=re.useState("input"),[h,f]=re.useState(!0),[y,p]=re.useState(!1),[S,P]=re.useState(!1),[D,O]=re.useState(!1),[I,w]=re.useState({}),[A,V]=re.useState([]),[F,U]=re.useState({}),[_,g]=re.useState(null),[v,T]=re.useState(0),[x,R]=re.useState([]);re.useEffect(()=>{u((()=>{const H=window.location.hash;return H==="#/display"?"display":H==="#/input"?"input":localStorage.getItem("salesTrackerCurrentPage")==="display"?"display":"input"})())},[]),re.useEffect(()=>{const W=zt(Le,da,Km),H=_r(W,async Q=>{if(Q.exists())a(Q.data().currentWeeklyTarget||$n);else try{await hi(W,{currentWeeklyTarget:$n}),a($n),console.log("Goals document created with default target.")}catch(Y){console.error("Error creating goals document: ",Y)}},Q=>{console.error("Error fetching weekly goal: ",Q),a($n)});return()=>H()},[]),re.useEffect(()=>{const W=zt(Le,Ym,"teamStreak"),H=_r(W,ue=>{ue.exists()&&w(ue.data())}),Q=_r(wn(Le,Xm),ue=>{const Ne={};ue.docs.forEach(ve=>{Ne[ve.id]=ve.data()}),U(Ne)}),Y=zt(Le,da,"monthlyChampion"),fe=_r(Y,ue=>{if(ue.exists()){const Ne=ue.data(),ve=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});Ne.month===ve?g(Ne):g(null)}}),rt=_r(wn(Le,TA),ue=>{const Ne=ue.docs.map(ve=>({id:ve.id,...ve.data()}));V(Ne)});return()=>{H(),Q(),fe(),rt()}},[]),re.useEffect(()=>{f(!0);const W=Bu(wn(Le,di),$m("timestamp","desc")),H=Bu(wn(Le,Pa),$m("weekEndDate","desc"));let Q=!1,Y=!1;const fe=()=>{Q&&Y&&f(!1)};let rt=new Set;const ue=_r(W,ve=>{const Qe=ve.docs.map(ye=>({...ye.data(),id:ye.id})).filter(ye=>!ye.archived),Pt=new Set(Qe.map(ye=>ye.id));rt.size>0&&Qe.forEach(ye=>{if(!rt.has(ye.id)){const gn={id:Date.now()+Math.random(),message:`${ye.salespersonName} just added a ${ye.projectName}!`,time:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})};R(It=>[...It,gn]),setTimeout(()=>{R(It=>It.filter(Ut=>Ut.id!==gn.id))},5e3)}}),rt=Pt,n(Qe),ge(Qe),Q=!0,fe()},ve=>{console.error("Error fetching projects: ",ve),alert("Could not fetch project data."),Q=!0,fe()}),Ne=_r(H,ve=>{const Qe=ve.docs.map(Pt=>({...Pt.data(),id:Pt.id}));s(Qe),Y=!0,fe()},ve=>{console.error("Error fetching weekly records: ",ve),alert("Could not fetch weekly records."),Y=!0,fe()});return Promise.all([ua(W),ua(H)]).then(()=>{Q=!0,Y=!0,fe()}).catch(()=>{Q=!0,Y=!0,fe()}),()=>{ue(),Ne()}},[]);const E=W=>{u(W),localStorage.setItem("salesTrackerCurrentPage",W),window.location.hash=W==="display"?"#/display":"#/input"},K=async(W,H)=>{const Q=new Date;Q.setDate(Q.getDate()-Q.getDay()),Q.setHours(0,0,0,0);const Y=e.filter(ue=>ue.salespersonId===W&&ue.timestamp&&new Date(ue.timestamp.seconds*1e3)>=Q).length+1,fe=zt(Le,Xm,W),rt=await Hm(fe);if(rt.exists()){const ue=rt.data().weeklyBest||0;Y>ue&&(await ca(fe,{weeklyBest:Y,achievedDate:new Date().toISOString(),salespersonName:H}),setTimeout(()=>{J(H,Y)},1e3))}else await hi(fe,{weeklyBest:Y,achievedDate:new Date().toISOString(),salespersonName:H})},J=(W,H)=>{us("achievement");const Q=document.createElement("div");Q.className="personal-best-popup",Q.innerHTML=`
            <div class="personal-best-content">
                <h2>🏆 NEW PERSONAL BEST! 🏆</h2>
                <p>${W} just set a new weekly record!</p>
                <p class="count">${H} projects this week!</p>
            </div>
        `;const Y=document.createElement("style");Y.textContent=`
            .personal-best-popup {
                position: fixed;
                top: 20%;
                left: 50%;
                transform: translateX(-50%);
                z-index: 10003;
                animation: best-appear 0.5s ease-out;
            }
            .personal-best-content {
                background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
                padding: 2rem 3rem;
                border-radius: 1rem;
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                text-align: center;
                color: white;
            }
            .personal-best-content h2 {
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 0.5rem;
            }
            .personal-best-content .count {
                font-size: 2rem;
                font-weight: bold;
                margin-top: 0.5rem;
            }
            @keyframes best-appear {
                from { transform: translateX(-50%) translateY(-50px) scale(0.8); opacity: 0; }
                to { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }
            }
        `,document.head.appendChild(Y),document.body.appendChild(Q),Ud(200),setTimeout(()=>{Q.remove(),Y.remove()},4e3)},Pe=async(W,H,Q)=>{const Y=Ei.find(ue=>ue.id===W),fe=sh.find(ue=>ue.id===H),rt=Jm[Q.toUpperCase()];if(!Y||!fe||!rt)return alert("Error: Invalid salesperson, project type, or location selected."),!1;try{await Qm(wn(Le,di),{salespersonId:W,salespersonInitials:Y.initials,salespersonName:Y.name,projectTypeId:H,projectIcon:fe.icon,projectName:fe.name,location:rt.id,timestamp:ha()});const ue=new Date().toDateString(),Ne=zt(Le,Ym,"teamStreak"),ve=await Hm(Ne);if(ve.exists()){const Qe=ve.data(),Pt=Qe.lastDate,ye=new Date;ye.setDate(ye.getDate()-1),Pt===ue||(Pt===ye.toDateString()?await ca(Ne,{currentStreak:Qe.currentStreak+1,lastDate:ue,bestStreak:Math.max(Qe.currentStreak+1,Qe.bestStreak||0)}):await ca(Ne,{currentStreak:1,lastDate:ue}))}else await hi(Ne,{currentStreak:1,lastDate:ue,bestStreak:1});return await K(W,Y.name),!0}catch(ue){return console.error("Error adding project: ",ue),alert("Error logging project. Please check console for details."),!1}},nt=async W=>{if(isNaN(W)||W<=0)return alert("Please enter a valid positive number for the target."),!1;P(!0);const H=zt(Le,da,Km);try{return await hi(H,{currentWeeklyTarget:Number(W)},{merge:!0}),alert("Weekly target updated successfully!"),!0}catch(Q){return console.error("Error updating weekly target: ",Q),alert("Failed to update weekly target."),!1}finally{P(!1)}},B=async()=>{const W=await ua(wn(Le,di));if(W.empty)return;const H=Gm(Le),Q=new Date().toISOString();W.docs.forEach(Y=>{H.update(zt(Le,di,Y.id),{archived:!0,archivedAt:Q,visible:!1})});try{await H.commit(),console.log(`Archived ${W.size} projects instead of deleting`)}catch(Y){throw console.error("Failed to archive projects:",Y),Y}},X=async(W=!1,H=e)=>{if(!(!W&&!window.confirm("This will log the current week's project count, save it, and then clear the display board. Are you sure?"))){p(!0);try{const Q=new Date,Y=new Date(Q);Y.setDate(Q.getDate()-(Q.getDay()+1)%7),Y.setHours(23,59,59,999);const fe=new Date(Y);fe.setDate(Y.getDate()-6),fe.setHours(0,0,0,0);const rt=`${Zm(fe)} - ${Zm(Y)}`,ue=H.length;let Ne="N/A",ve=0;if(H.length>0){const It=H.reduce((Ue,Nt)=>(Ue[Nt.salespersonId]=(Ue[Nt.salespersonId]||0)+1,Ue),{});let Ut=0,Bt=null;for(const Ue in It)It[Ue]>Ut&&(Ut=It[Ue],Bt=Ue);if(Bt){const Ue=Ei.find(Nt=>Nt.id===Bt);Ue&&(Ne=Ue.name,ve=Ut)}}const Qe={weekDisplay:rt,completed:ue,target:i,weekEndDate:Y.toISOString(),topSalespersonName:Ne,topSalespersonProjects:ve,loggedAt:ha()},Pt=await Qm(wn(Le,Pa),Qe),ye=new Date,gn=new Date(ye);if(gn.setDate(ye.getDate()+1),ye.getMonth()!==gn.getMonth()){const It=new Date(ye.getFullYear(),ye.getMonth(),1),Ut=new Date(ye.getFullYear(),ye.getMonth()+1,0),Bt=await ua(Bu(wn(Le,di),zm("timestamp",">=",It),zm("timestamp","<=",Ut))),Ue={};Bt.docs.forEach(yn=>{const Yt=yn.data();Ue[Yt.salespersonId]=(Ue[Yt.salespersonId]||0)+1});let Nt=null,zr=0;for(const[yn,Yt]of Object.entries(Ue))Yt>zr&&(zr=Yt,Nt=yn);if(Nt){const yn=Ei.find(zs=>zs.id===Nt),Yt=zt(Le,da,"monthlyChampion");await hi(Yt,{salespersonId:Nt,salespersonName:(yn==null?void 0:yn.name)||"Unknown",projectCount:zr,month:ye.toLocaleDateString("en-US",{month:"long",year:"numeric"}),crownedAt:ha()})}}if(Pt.id){const It=wn(Le,"projectsBackup"),Ut=Gm(Le);for(const Bt of H){const Ue=zt(It);Ut.set(Ue,{...Bt,backedUpAt:ha(),weekArchived:rt,originalId:Bt.id})}try{await Ut.commit(),console.log(`Backed up ${H.length} projects before deletion`)}catch(Bt){console.error("Failed to backup projects:",Bt)}await B(),W?console.log("Weekly projects automatically logged and board reset for week ending: "+Y.toLocaleDateString()):alert("Current projects logged for the week and display board has been reset.")}else throw new Error("Failed to save weekly record - projects NOT deleted for safety")}catch(Q){console.error("Error logging week and resetting board: ",Q),alert("An error occurred while logging the week and resetting the board.")}finally{p(!1)}}},Z=async(W,H)=>{if(!W||!H)return alert("Missing data for update."),!1;O(!0);const Q=zt(Le,Pa,W);try{return await ca(Q,H),alert("Weekly record updated successfully!"),!0}catch(Y){return console.error("Error updating weekly record: ",Y),alert("Failed to update weekly record."),!1}finally{O(!1)}},ge=async W=>{const H=new Date;if(H.getDay()===0){const Q=H.toISOString().split("T")[0];localStorage.getItem("lastAutoResetSunday")!==Q&&(console.log("Attempting automatic Sunday log and reset..."),await X(!0,W),localStorage.setItem("lastAutoResetSunday",Q))}},de=()=>{const W={projects:e,weeklyRecords:r,weeklyGoal:i,exportDate:new Date().toISOString(),exportVersion:"1.0"},H=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),Q=URL.createObjectURL(H),Y=document.createElement("a");Y.href=Q,Y.download=`project-tracker-backup-${new Date().toISOString().split("T")[0]}.json`,Y.click(),URL.revokeObjectURL(Q)};return C.jsx(Bs.Provider,{value:{loggedProjects:e,weeklyRecords:r,addProject:Pe,currentPage:l,setCurrentPage:E,weeklyGoal:i,updateWeeklyTarget:nt,salespersons:Ei,projectTypes:sh,logWeekAndResetBoard:X,updateWeeklyRecord:Z,isLoading:h,isProcessingWeek:y,isUpdatingTarget:S,isUpdatingRecord:D,locationsData:Jm,exportDataToJSON:de,lastMilestone:v,setLastMilestone:T,streakData:I,achievements:A,personalBests:F,monthlyChampion:_,liveUpdates:x,setLiveUpdates:R},children:t})},Wv=({updates:t})=>{const[e,n]=re.useState([]);return re.useEffect(()=>{n(t.slice(-3))},[t]),e.length===0?null:C.jsxs("div",{className:"fixed bottom-4 right-4 space-y-2 z-[9999]",children:[e.map((r,s)=>C.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-4 border-2 border-blue-400 animate-slide-in-right",style:{animation:"slide-in-right 0.3s ease-out",animationDelay:`${s*.1}s`},children:[C.jsx("p",{className:"font-semibold text-blue-700",children:r.message}),C.jsx("p",{className:"text-sm text-gray-600",children:r.time})]},r.id)),C.jsx("style",{jsx:!0,children:`
                @keyframes slide-in-right {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `})]})},AA=({streakData:t})=>!t||!t.currentStreak?null:C.jsx("div",{className:"fixed top-4 right-4 bg-white shadow-lg rounded-lg p-4 border-2 border-orange-400 z-[9998]",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:"text-3xl",children:"🔥"}),C.jsxs("div",{children:[C.jsxs("p",{className:"font-bold text-lg text-orange-600",children:[t.currentStreak," Day Streak!"]}),C.jsxs("p",{className:"text-sm text-gray-600",children:["Best: ",t.bestStreak||t.currentStreak," days"]})]})]})}),xA=({achievements:t,expandable:e=!0})=>{const[n,r]=re.useState(!1),s=IA.filter(i=>t.some(a=>a.id===i.id));return s.length===0?null:C.jsxs("div",{className:`bg-white shadow-lg rounded-lg border-2 border-purple-400 ${e?"fixed bottom-4 left-4 z-[9998]":""}`,children:[C.jsx("div",{className:`p-4 ${e?"cursor-pointer":""}`,onClick:()=>e&&r(!n),children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:"text-2xl",children:"🏆"}),C.jsxs("p",{className:"font-bold text-lg text-purple-600",children:[s.length," Achievement",s.length!==1?"s":""]})]}),e&&C.jsx("span",{className:"text-gray-400",children:n?"▼":"▶"})]})}),(n||!e)&&C.jsx("div",{className:"border-t border-purple-200 p-4 space-y-2 max-h-64 overflow-y-auto",children:s.map(i=>{const a=t.find(l=>l.id===i.id);return C.jsxs("div",{className:"flex items-start gap-3 p-2 bg-purple-50 rounded",children:[C.jsx("span",{className:"text-2xl",children:i.icon}),C.jsxs("div",{className:"flex-1",children:[C.jsx("p",{className:"font-semibold text-purple-700",children:i.name}),C.jsx("p",{className:"text-sm text-gray-600",children:i.description}),a&&C.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Achieved: ",new Date(a.achievedDate).toLocaleDateString()]})]})]},i.id)})})]})},Oi=({children:t,className:e=""})=>C.jsx("div",{className:`bg-white shadow-xl rounded-lg p-6 md:p-8 ${e}`,children:t}),_s=({children:t,onClick:e,className:n="",variant:r="primary",disabled:s=!1})=>C.jsx("button",{onClick:e,disabled:s,className:`px-6 py-3 rounded-lg font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-opacity-75 transition-all ${r==="primary"?"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500":r==="secondary"?"bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-400":"bg-red-500 hover:bg-red-600 text-white focus:ring-red-400"} ${s?"opacity-50 cursor-not-allowed":""} ${n}`,children:t}),kr=({message:t="Loading..."})=>C.jsxs("div",{className:"flex flex-col items-center justify-center p-10 text-gray-700",children:[C.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-600 mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"opacity-25"}),C.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"opacity-75"})]}),C.jsx("p",{className:"text-lg",children:t})]}),CA=()=>{const t=document.createElement("div");return t.style.position="fixed",t.style.left=`${Math.random()*100}vw`,t.style.top=`${Math.random()*-20-10}vh`,t.style.width=`${Math.random()*12+6}px`,t.style.height=t.style.width,t.style.backgroundColor=`hsl(${Math.random()*360}, 100%, 60%)`,t.style.opacity="0",t.style.zIndex="10001",t.style.borderRadius=`${Math.random()>.5?"50%":"0px"}`,t.style.transform=`rotate(${Math.random()*360}deg)`,document.body.appendChild(t),t},RA=t=>{const e=Math.random()*3+2.5,n=Math.random()*200-100,r=Math.random()*720+360;t.animate([{transform:`translate3d(0, 0, 0) rotate(${t.style.transform.match(/\d+/)[0]}deg)`,opacity:1},{transform:`translate3d(${n}px, 110vh, 0) rotate(${r}deg)`,opacity:0}],{duration:e*1e3,easing:"ease-out",iterations:1}),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},e*1e3)},Ud=(t=150)=>{for(let e=0;e<t;e++)setTimeout(()=>{const n=CA();RA(n)},e*15)},us=t=>{switch(new Audio,t){case"drop":const e=new(window.AudioContext||window.webkitAudioContext),n=e.createOscillator(),r=e.createGain();n.connect(r),r.connect(e.destination),n.frequency.setValueAtTime(800,e.currentTime),n.frequency.exponentialRampToValueAtTime(400,e.currentTime+.1),r.gain.setValueAtTime(.3,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),n.start(e.currentTime),n.stop(e.currentTime+.1);break;case"milestone":const s=new(window.AudioContext||window.webkitAudioContext);[523,659,784].forEach((a,l)=>{const u=s.createOscillator(),h=s.createGain();u.connect(h),h.connect(s.destination),u.frequency.setValueAtTime(a,s.currentTime+l*.1),h.gain.setValueAtTime(.3,s.currentTime+l*.1),h.gain.exponentialRampToValueAtTime(.01,s.currentTime+l*.1+.3),u.start(s.currentTime+l*.1),u.stop(s.currentTime+l*.1+.3)});break;case"achievement":const i=new(window.AudioContext||window.webkitAudioContext);[523,659,784,1047].forEach((a,l)=>{const u=i.createOscillator(),h=i.createGain();u.connect(h),h.connect(i.destination),u.frequency.setValueAtTime(a,i.currentTime+l*.15),h.gain.setValueAtTime(.4,i.currentTime+l*.15),h.gain.exponentialRampToValueAtTime(.01,i.currentTime+l*.15+.5),u.start(i.currentTime+l*.15),u.stop(i.currentTime+l*.15+.5)});break}},kA=(t,e,n)=>{let r="small",s="",i=150;if(t>=100?(r="epic",s="🎉 GOAL ACHIEVED! AMAZING WORK TEAM! 🎉",i=300,us("achievement")):t>=75?(r="large",s="🔥 75% THERE! FINAL PUSH! 🔥",i=200,us("milestone")):t>=50?(r="medium",s="⭐ HALFWAY POINT! KEEP GOING! ⭐",i=150,us("milestone")):t>=25&&(r="small",s="✨ 25% COMPLETE! GREAT START! ✨",i=100,us("milestone")),s){const a=document.createElement("div");a.className="milestone-popup",a.innerHTML=`
            <div class="milestone-content ${r}">
                <h2>${s}</h2>
                <p>${e} of ${n} projects completed!</p>
            </div>
        `;const l=document.createElement("style");l.textContent=`
            .milestone-popup {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 10002;
                animation: milestone-appear 0.5s ease-out;
            }
            .milestone-content {
                background: white;
                padding: 2rem 3rem;
                border-radius: 1rem;
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                text-align: center;
            }
            .milestone-content h2 {
                font-size: 2rem;
                font-weight: bold;
                margin-bottom: 0.5rem;
                color: #1e40af;
            }
            .milestone-content.epic h2 {
                font-size: 3rem;
                background: linear-gradient(45deg, #f59e0b, #ef4444, #8b5cf6);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                animation: pulse 1s ease-in-out infinite;
            }
            @keyframes milestone-appear {
                from { transform: translate(-50%, -50%) scale(0); opacity: 0; }
                to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            }
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }
        `,document.head.appendChild(l),document.body.appendChild(a),Ud(i),setTimeout(()=>{a.remove(),l.remove()},3e3)}},PA=({project:t,onDragStart:e})=>C.jsx("div",{draggable:!0,onDragStart:n=>e(n,t.id),className:"flex flex-col items-center justify-center p-1 sm:p-2 m-1 border-2 border-dashed border-gray-300 rounded-lg cursor-grab hover:bg-gray-100 transition-colors aspect-square",title:t.name,children:bd(t.icon)?C.jsx("img",{src:t.icon,alt:t.name,className:"w-20 h-20 sm:w-24 sm:h-24 object-contain pointer-events-none",onError:n=>{n.target.src="https://placehold.co/64x64/cccccc/969696?text=IMG",n.target.alt="Image not found"}}):C.jsx("span",{className:"text-5xl sm:text-6xl pointer-events-none",children:t.icon})}),eg=({locationDetails:t,onDrop:e,onDragOver:n,onDragLeave:r,isOver:s,projectCount:i})=>C.jsxs("div",{onDrop:a=>e(a,t.id),onDragOver:n,onDragLeave:r,className:`mt-6 p-6 md:p-8 border-4 border-dashed rounded-xl text-center transition-all duration-200 ease-in-out min-h-[150px] flex flex-col justify-center items-center
                  ${s?t.bucketOverColor:t.bucketColor}`,children:[C.jsxs("h3",{className:`text-xl font-semibold mb-2 ${t.textColor}`,children:[t.name," Projects"]}),C.jsx("svg",{className:`w-12 h-12 mb-2 ${t.textColor} opacity-70`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),C.jsx("p",{className:`text-md font-medium ${t.textColor}`,children:s?"Release to log!":"Drag Project Here"}),C.jsxs("p",{className:`text-sm ${t.textColor} opacity-80`,children:[i," logged"]})]}),NA=()=>{const{weeklyGoal:t,updateWeeklyTarget:e,isUpdatingTarget:n,logWeekAndResetBoard:r,isProcessingWeek:s,exportDataToJSON:i,isLoading:a,isUpdatingRecord:l}=re.useContext(Bs)||{},[u,h]=re.useState((t||$n).toString());re.useEffect(()=>{h((t||$n).toString())},[t]);const f=async y=>{y.preventDefault();const p=parseInt(u,10);!isNaN(p)&&p>0?await e(p):alert("Please enter a valid positive number for the target.")};return C.jsxs(Oi,{className:"bg-gray-50",children:[C.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Admin Controls"}),C.jsxs("form",{onSubmit:f,className:"mb-4",children:[C.jsx("label",{htmlFor:"weeklyTargetInput",className:"block text-sm font-medium text-gray-700 mb-1",children:"Set Weekly Target:"}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("input",{type:"number",id:"weeklyTargetInput",value:u,onChange:y=>h(y.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 text-md",disabled:n||a,min:"1"}),C.jsx(_s,{type:"submit",variant:"secondary",className:"py-2 px-4 text-sm",disabled:n||a,children:n?"Saving...":"Set"})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("button",{type:"button",onClick:()=>r(!1),className:"w-full text-sm text-orange-600 hover:text-orange-800 disabled:opacity-50 py-2 rounded-md border border-orange-300 hover:bg-orange-50 transition-colors font-medium",disabled:a||s||l,children:s?"Processing...":"Manual Week Log & Reset"}),C.jsx("button",{type:"button",onClick:i,className:"w-full text-sm text-blue-600 hover:text-blue-800 disabled:opacity-50 py-2 rounded-md border border-blue-300 hover:bg-blue-50 transition-colors font-medium",disabled:a,children:"Export Data Backup (JSON)"})]})]})},DA=()=>{const{weeklyRecords:t,isLoading:e,updateWeeklyRecord:n,isUpdatingRecord:r}=re.useContext(Bs),[s,i]=re.useState(null),[a,l]=re.useState({completed:"",topSalespersonName:"",topSalespersonProjects:""}),u=p=>{var S;i(p.id),l({completed:p.completed.toString(),topSalespersonName:p.topSalespersonName||"",topSalespersonProjects:((S=p.topSalespersonProjects)==null?void 0:S.toString())||"0",target:p.target.toString()})},h=p=>{l({...a,[p.target.name]:p.target.value})},f=async p=>{const S=parseInt(a.completed,10),P=parseInt(a.topSalespersonProjects,10);if(isNaN(S)||S<0){alert("Please enter a valid number for completed projects.");return}if(isNaN(P)||P<0){alert("Please enter a valid number for top salesperson projects.");return}await n(p,{completed:S,topSalespersonName:a.topSalespersonName,topSalespersonProjects:P})&&i(null)},y=async(p,S)=>{if(window.confirm(`Are you sure you want to permanently delete the record for ${S}? This cannot be undone.`))try{const P=zt(Le,Pa,p);await _A(P),alert("Weekly record deleted successfully!"),i(null)}catch(P){console.error("Error deleting weekly record: ",P),console.error("Error details:",P.message,P.code),alert(`Failed to delete weekly record. Error: ${P.message}`)}};return e&&t.length===0?C.jsx(kr,{message:"Loading weekly records..."}):C.jsxs(Oi,{className:"bg-gray-50 h-full flex flex-col",children:[C.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4 text-center",children:"Weekly Performance"}),t.length>0?C.jsx("ul",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 flex-grow mb-4",children:t.map(p=>C.jsx("li",{className:`p-3 rounded-lg shadow text-gray-700 ${p.completed>=p.target?"bg-green-100 border-green-400":"bg-red-100 border-red-400"}`,children:s===p.id?C.jsxs("div",{className:"space-y-2",children:[C.jsxs("p",{className:"font-medium text-md mb-1",children:[p.weekDisplay," (Target: ",a.target,")"]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`editCompleted-${p.id}`,className:"text-xs font-medium text-gray-600",children:"Completed:"}),C.jsx("input",{type:"number",name:"completed",id:`editCompleted-${p.id}`,value:a.completed,onChange:h,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`editTopSalespersonName-${p.id}`,className:"text-xs font-medium text-gray-600",children:"Top Salesperson:"}),C.jsx("input",{type:"text",name:"topSalespersonName",id:`editTopSalespersonName-${p.id}`,value:a.topSalespersonName,onChange:h,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`editTopSalespersonProjects-${p.id}`,className:"text-xs font-medium text-gray-600",children:"Their Projects:"}),C.jsx("input",{type:"number",name:"topSalespersonProjects",id:`editTopSalespersonProjects-${p.id}`,value:a.topSalespersonProjects,onChange:h,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),C.jsxs("div",{className:"flex gap-2 mt-2",children:[C.jsx(_s,{onClick:()=>f(p.id),variant:"primary",className:"py-1 px-3 text-xs",disabled:r,children:r?"Saving...":"Save"}),C.jsx(_s,{onClick:()=>i(null),variant:"secondary",className:"py-1 px-3 text-xs",children:"Cancel"}),C.jsx(_s,{onClick:()=>y(p.id,p.weekDisplay),variant:"danger",className:"py-1 px-3 text-xs ml-auto",children:"Delete"})]})]}):C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"font-medium text-md",children:p.weekDisplay}),C.jsxs("span",{className:`font-bold text-lg ml-2 ${p.completed>=p.target?"text-green-600":"text-red-600"}`,children:[p.completed,"/",p.target]})]}),p.topSalespersonName&&p.topSalespersonName!=="N/A"&&C.jsxs("p",{className:"text-xs text-gray-600",children:["Top: ",p.topSalespersonName," (",p.topSalespersonProjects,")"]}),C.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:p.completed>=p.target?`Goal Met! 🎉 (+${p.completed-p.target})`:`Short by ${p.target-p.completed}`})]}),C.jsx("button",{onClick:()=>u(p),className:"p-1 text-gray-500 hover:text-blue-600 disabled:opacity-50 text-lg",disabled:r||isProcessingWeek,title:"Edit Log Entry",children:"✏️"})]})},p.id))}):C.jsx("p",{className:"text-gray-600 text-center py-4 flex-grow flex items-center justify-center",children:"No weekly records yet."})]})},VA=()=>{const t=re.useContext(Bs)||{},{addProject:e,salespersons:n=[],projectTypes:r=[],setCurrentPage:s,isLoading:i=!0,isProcessingWeek:a=!1,locationsData:l,loggedProjects:u=[],weeklyGoal:h=$n,lastMilestone:f=0,setLastMilestone:y,liveUpdates:p=[],streakData:S={},personalBests:P={},achievements:D=[],monthlyChampion:O=null}=t,[I,w]=re.useState(""),[A,V]=re.useState(null),[F,U]=re.useState({show:!1,name:"",project:"",location:""}),_=l||{},g=(K,J)=>K.dataTransfer.setData("projectId",J),v=async(K,J)=>{var nt;K.preventDefault(),V(null);const Pe=K.dataTransfer.getData("projectId");if(I&&Pe&&J){if(await e(I,Pe,J)){us("drop");const X=r.find(H=>H.id===Pe),Z=n.find(H=>H.id===I);U({show:!0,name:Z?Z.name:"Valued Team Member",project:X?X.name:"a project",location:((nt=_[J.toUpperCase()])==null?void 0:nt.name)||J}),Ud(150),setTimeout(()=>U({show:!1,name:"",project:"",location:""}),3e3);const ge=u.length+1,de=ge/h*100,W=[25,50,75,100];for(const H of W)if(de>=H&&f<H){setTimeout(()=>{kA(H,ge,h),y(H)},3500);break}}}else I||alert("Please select a salesperson first.")},T=(K,J)=>{K.preventDefault(),V(J)},x=()=>V(null),R=K=>u.filter(J=>J.location===K).length,E=Ei.map(K=>({...K,projectCount:u.filter(J=>J.salespersonId===K.id).length})).sort((K,J)=>J.projectCount-K.projectCount);return l?C.jsxs("div",{className:"container mx-auto p-4 md:p-6 max-w-screen-xl",children:[C.jsx(Wv,{updates:p}),C.jsx(AA,{streakData:S}),C.jsx(xA,{achievements:D}),F.show&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[10000] p-4",children:C.jsxs("div",{className:"bg-white p-6 sm:p-10 rounded-xl shadow-2xl text-center max-w-md w-full",children:[C.jsx("span",{role:"img","aria-label":"gift",className:"text-6xl sm:text-7xl mb-4 inline-block animate-bounce",children:"🎉"}),C.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-blue-600 mb-3",children:"CONGRATS"}),C.jsxs("p",{className:"text-2xl sm:text-3xl text-gray-800 mb-2",children:[C.jsx("span",{className:"font-semibold",children:F.name}),"!"]}),C.jsxs("p",{className:"text-md sm:text-lg text-gray-600",children:["You successfully logged ",C.jsx("span",{className:"font-semibold",children:F.project})," in ",F.location,"."]})]})}),C.jsx("div",{className:"mb-6 lg:mb-8",children:C.jsxs(Oi,{children:[C.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[C.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800",children:"Log New Project"}),C.jsx(_s,{onClick:()=>s("display"),variant:"secondary",disabled:i||a,children:"View Display Board"})]}),i&&!a&&C.jsx(kr,{message:"Connecting to Database..."}),C.jsxs("div",{className:"mb-6",children:[C.jsx("label",{htmlFor:"salesperson",className:"block text-lg font-medium text-gray-700 mb-2",children:"Salesperson:"}),C.jsxs("select",{id:"salesperson",value:I,onChange:K=>w(K.target.value),className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 text-lg",disabled:i||a,required:!0,children:[C.jsx("option",{value:"",disabled:!0,children:"Select Salesperson"}),n.map(K=>C.jsx("option",{value:K.id,children:K.name},K.id))]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Available Projects (Drag to Location):"}),C.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:r.map(K=>C.jsx(PA,{project:K,onDragStart:g},K.id))})]}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[C.jsx(eg,{locationDetails:_.REGINA,onDrop:v,onDragOver:K=>T(K,_.REGINA.id),onDragLeave:x,isOver:A===_.REGINA.id,projectCount:R(_.REGINA.id)}),C.jsx(eg,{locationDetails:_.SASKATOON,onDrop:v,onDragOver:K=>T(K,_.SASKATOON.id),onDragLeave:x,isOver:A===_.SASKATOON.id,projectCount:R(_.SASKATOON.id)})]})]})}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[C.jsx("div",{children:C.jsxs(Oi,{className:"bg-gray-50 h-full",children:[C.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4 text-center",children:"Salesperson Leaderboard"}),i&&E.length===0?C.jsx(kr,{message:"Loading leaderboard..."}):E.length>0?C.jsx("ul",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:E.map((K,J)=>{var B;const Pe=((B=P[K.id])==null?void 0:B.weeklyBest)||0,nt=Pe>0&&K.projectCount>=Pe;return C.jsxs("li",{className:`p-3 rounded-lg shadow flex justify-between items-center text-gray-700 ${J===0?"bg-yellow-100 border-yellow-400":J===1?"bg-gray-200 border-gray-400":J===2?"bg-orange-100 border-orange-400":"bg-white border-gray-300"} ${(O==null?void 0:O.salespersonId)===K.id?"ring-2 ring-purple-500":""}`,children:[C.jsxs("div",{children:[C.jsxs("span",{className:"font-medium text-lg",children:[J+1,". ",K.name,J===0&&"🥇",J===1&&"🥈",J===2&&"🥉",(O==null?void 0:O.salespersonId)===K.id&&" 👑"]}),Pe>0&&C.jsxs("p",{className:"text-xs text-gray-600",children:["Personal Best: ",Pe," ",nt&&"🎯"]}),(O==null?void 0:O.salespersonId)===K.id&&C.jsx("p",{className:"text-xs text-purple-600 font-semibold",children:"Monthly Champion!"})]}),C.jsx("span",{className:"font-bold text-xl",children:K.projectCount})]},K.id)})}):C.jsx("p",{className:"text-gray-600 text-center py-4",children:"No projects logged yet."})]})}),C.jsx("div",{children:C.jsx(DA,{})}),C.jsx("div",{children:C.jsxs(Oi,{className:"bg-gray-50 h-full",children:[C.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4 text-center",children:"Project Types This Week"}),(()=>{const K=sh.map(J=>({...J,count:u.filter(Pe=>Pe.projectTypeId===J.id).length})).sort((J,Pe)=>Pe.count-J.count).filter(J=>J.count>0);return K.length>0?C.jsx("ul",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:K.map((J,Pe)=>C.jsxs("li",{className:"p-3 rounded-lg shadow bg-white flex justify-between items-center",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[bd(J.icon)?C.jsx("img",{src:J.icon,alt:J.name,className:"w-8 h-8 object-contain"}):C.jsx("span",{className:"text-2xl",children:J.icon}),C.jsx("span",{className:"font-medium text-lg",children:J.name}),Pe===0&&C.jsx("span",{title:"Most Popular!",children:"🏆"})]}),C.jsx("span",{className:"font-bold text-xl",children:J.count})]},J.id))}):C.jsx("p",{className:"text-gray-600 text-center py-4",children:"No projects logged yet."})})()]})})]}),C.jsx("div",{className:"mt-6",children:C.jsx(NA,{})})]}):C.jsx(kr,{message:"Initializing app data..."})},LA=({project:t,locationMap:e})=>{const r=Object.values(e||{}).find(i=>i.id===t.location),s=r?r.tileColor:"bg-gray-100/80 border-gray-400";return C.jsxs("div",{className:`aspect-square shadow-lg rounded-lg flex flex-col items-center justify-center p-1.5 sm:p-2 text-center border ${s} hover:shadow-xl transition-shadow`,children:[C.jsx("div",{className:"w-[80%] h-[80%] flex items-center justify-center",children:bd(t.projectIcon)?C.jsx("img",{src:t.projectIcon,alt:t.projectName,className:"max-w-full max-h-full object-contain",onError:i=>{i.target.src="https://placehold.co/64x64/cccccc/969696?text=FAIL",i.target.alt="Error"}}):C.jsx("span",{className:"text-5xl sm:text-6xl md:text-7xl lg:text-7xl",style:{lineHeight:1},children:t.projectIcon})}),C.jsxs("div",{className:"w-full text-center mt-auto pt-0.5",children:[C.jsx("p",{className:"text-sm sm:text-lg font-semibold text-gray-800 truncate px-1",children:t.salespersonName}),r&&C.jsx("p",{className:"text-xs sm:text-base text-gray-700",children:r.abbreviation})]})]})},OA=()=>{const{loggedProjects:t,weeklyGoal:e,setCurrentPage:n,isLoading:r,isProcessingWeek:s,locationsData:i,liveUpdates:a}=re.useContext(Bs)||{},[l,u]=re.useState(new Date);re.useEffect(()=>{const S=setInterval(()=>u(new Date),1e3);return()=>clearInterval(S)},[]);const h=i||{},f=t.slice(0,e),y=Math.max(0,e-f.length),p=6;return i?C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white p-2 sm:p-4 md:p-6 flex flex-col items-center justify-center",children:[C.jsx(Wv,{updates:a}),C.jsxs("div",{className:"w-full max-w-[2560px] h-full flex flex-col",children:[C.jsxs("header",{className:"w-full mb-2 md:mb-4 text-center py-1 sm:py-2",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2 sm:mb-3 px-2",children:[C.jsx("img",{src:"TUDS Logo Colour.png",alt:"TUDS Logo",className:"h-16 sm:h-20 md:h-24 rounded",onError:S=>{S.target.onerror=null,S.target.src="https://placehold.co/200x60/CCCCCC/FFFFFF?text=TUDS+Logo"}}),C.jsxs("div",{className:"text-right",children:[C.jsx("p",{className:"text-md sm:text-lg md:text-xl font-medium text-gray-300",children:l.toLocaleDateString(void 0,{month:"long",day:"numeric"})}),C.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-100",children:l.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),C.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-teal-400 to-green-400 leading-tight px-1",children:"Customer Projects This Week!"}),C.jsxs("p",{className:"mt-1 text-2xl sm:text-3xl md:text-4xl font-bold text-yellow-400",children:[t.length," ",C.jsx("span",{className:"text-xl sm:text-2xl text-gray-300",children:"of"})," ",e," ",C.jsx("span",{className:"text-xl sm:text-2xl text-gray-300",children:"Done!"})]}),t.length>=e&&C.jsx("p",{className:"mt-1 text-xl sm:text-2xl text-green-400 animate-pulse",children:"🎉 Goal Achieved! 🎉"})]}),C.jsxs("main",{className:"w-full flex-grow flex items-center justify-center px-1 sm:px-2",children:[r&&t.length===0&&C.jsx(kr,{message:"Loading Projects..."}),!r&&C.jsxs("div",{className:"grid gap-1 sm:gap-1.5 md:gap-2 w-full",style:{gridTemplateColumns:`repeat(${p}, minmax(0, 1fr))`},children:[f.map(S=>C.jsx(LA,{project:S,locationMap:h},S.id)),Array.from({length:y}).map((S,P)=>C.jsx("div",{className:"aspect-square bg-slate-800/70 rounded-lg opacity-60"},`empty_${P}`))]}),!r&&t.length===0&&y===e&&C.jsx("div",{className:"text-center py-10",children:C.jsx("p",{className:"text-2xl sm:text-3xl text-gray-400",children:"No projects logged yet for this week."})})]}),C.jsx("footer",{className:"w-full mt-2 md:mt-4 text-center py-1 sm:py-2",children:C.jsx(_s,{onClick:()=>n("input"),variant:"secondary",className:"mr-2 sm:mr-4 text-xs sm:text-sm",disabled:r||s,children:"Input Page"})})]})]}):C.jsx(kr,{message:"Initializing display data..."})};function MA(){const t=re.useContext(Bs);if(!t)return C.jsx(kr,{message:"Initializing Application..."});const{currentPage:e}=t;return re.useEffect(()=>{const n=()=>{const r=window.location.hash;t&&t.setCurrentPage&&(r==="#/display"?t.setCurrentPage("display"):(r==="#/input"||r==="")&&t.setCurrentPage("input"))};return window.addEventListener("hashchange",n,!1),n(),()=>window.removeEventListener("hashchange",n,!1)},[t]),C.jsx("div",{className:"min-h-screen bg-gray-100 font-sans",children:e==="input"?C.jsx(VA,{}):C.jsx(OA,{})})}function jA(){return C.jsx(SA,{children:C.jsx(MA,{})})}$u.createRoot(document.getElementById("root")).render(C.jsx(V0.StrictMode,{children:C.jsx(jA,{})}));
